"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[572],{9913:(C,g,a)=>{a.d(g,{Z:()=>E});var e=a(1571),t=a(433),d=a(8372),l=a(9766),m=a(6895),u=a(2210),_=a(805),o=a(5722);function r(s,f){if(1&s&&(e.TgZ(0,"div",9)(1,"em"),e._uU(2),e.qZA()()),2&s){const p=e.oxw(2);e.xp6(2),e.Oqu(p.filter.metadata.visibleName)}}const i=function(){return[]};function n(s,f){if(1&s&&(e.TgZ(0,"p-dropdown",7),e.YNc(1,r,3,1,"ng-template",8),e.qZA()),2&s){const p=e.oxw();e.Q6J("formControl",p.control)("options",p.filter.metadata.options||e.DdM(5,i))("filter",!0)("placeholder",p.filter.metadata.visibleName)("showClear",p.filter.value&&!p.filter.metadata.required)}}function c(s,f){if(1&s&&e._UZ(0,"p-multiSelect",10),2&s){const p=e.oxw();e.Q6J("formControl",p.control)("options",p.filter.metadata.options||e.DdM(3,i))("placeholder",p.filter.metadata.visibleName)}}function h(s,f){if(1&s&&e._UZ(0,"p-multiSelect",11),2&s){const p=e.oxw();e.Q6J("formControl",p.control)("filter",!1)("options",p.filter.metadata.options||e.DdM(4,i))("placeholder",p.filter.metadata.visibleName)}}function D(s,f){if(1&s&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&s){const p=f.$implicit;e.Q6J("value",p.value),e.xp6(1),e.Oqu(p.name)}}function P(s,f){if(1&s&&(e.TgZ(0,"select",12),e.YNc(1,D,2,2,"option",13),e.qZA()),2&s){const p=e.oxw();e.Q6J("formControl",p.control),e.xp6(1),e.Q6J("ngForOf",p.filter.metadata.options)}}function v(s,f){if(1&s){const p=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){e.CHM(p);const M=e.oxw();return e.KtG(M.onRemove.emit())}),e._UZ(1,"i",16),e.qZA()}}let E=(()=>{class s{constructor(){this.canRemove=!0,this.filterClass="",this.onRemove=new e.vpe}get FilterType(){return l.v}ngOnInit(){this.control=new t.p4(this.filter.value),this.control.valueChanges.pipe((0,d.b)(200)).subscribe(p=>{this.filter.value=p}),this.filter.valueChanges.subscribe(()=>{this.control.setValue(this.filter.value,{emitEvent:!1})})}}return s.\u0275fac=function(p){return new(p||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["alasta-filter-item"]],inputs:{filter:"filter",canRemove:"canRemove",filterClass:"filterClass"},outputs:{onRemove:"onRemove"},decls:7,vars:6,consts:[["id","filter-item",3,"ngClass"],["id","filter-value",3,"ngSwitch"],["optionLabel","name","optionValue","value","styleClass","alasta-filter-dropdown",3,"formControl","options","filter","placeholder","showClear",4,"ngSwitchCase"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","options","placeholder",4,"ngSwitchCase"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","filter","options","placeholder",4,"ngSwitchCase"],[3,"formControl",4,"ngSwitchDefault"],["id","filter-remover","class","btn btn-sm btn-secondary-outline p-1",3,"click",4,"ngIf"],["optionLabel","name","optionValue","value","styleClass","alasta-filter-dropdown",3,"formControl","options","filter","placeholder","showClear"],["pTemplate","header"],[1,"filter-dropdown-header"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","options","placeholder"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","filter","options","placeholder"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","filter-remover",1,"btn","btn-sm","btn-secondary-outline","p-1",3,"click"],[1,"fas","fa-trash-alt"]],template:function(p,O){1&p&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,n,2,6,"p-dropdown",2),e.YNc(3,c,1,4,"p-multiSelect",3),e.YNc(4,h,1,5,"p-multiSelect",4),e.YNc(5,P,2,2,"select",5),e.qZA(),e.YNc(6,v,2,0,"a",6),e.qZA()),2&p&&(e.Q6J("ngClass",O.filterClass),e.xp6(1),e.Q6J("ngSwitch",O.filter.metadata.type),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.DROPDOWN_SEARCH),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.MULTISELECT_SEARCH),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.MULTISELECT),e.xp6(2),e.Q6J("ngIf",O.canRemove))},dependencies:[m.mk,m.sg,m.O5,m.RF,m.n9,m.ED,t.YN,t.Kr,t.EJ,t.JJ,t.oH,u.Lt,_.jx,o.NU],styles:["#filter-item[_ngcontent-%COMP%]{border-radius:.25rem;display:inline-flex;justify-content:center;align-items:center}#filter-item[_ngcontent-%COMP%]   #filter-remover[_ngcontent-%COMP%]{margin:0 .3rem;width:1.4rem;height:1.4rem;line-height:0;border-radius:.25%}.filter-dropdown-header[_ngcontent-%COMP%]{padding:.2rem .75rem;background-color:#efefef}"]}),s})()},7064:(C,g,a)=>{a.d(g,{i:()=>o});var e=a(6895),t=a(433),d=a(9245),l=a(3345),m=a(2210),u=a(5722),_=a(1571);let o=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=_.oAB({type:r}),r.\u0275inj=_.cJS({imports:[e.ez,t.UX,d.mr,l.k,m.kW,u.q4]}),r})()},5653:(C,g,a)=>{a.d(g,{i:()=>m});var e=a(1571),t=a(1135),d=a(7197),l=a(6817);let m=(()=>{class u{constructor(o){this._filterGroupSubject=new t.X([]),this.filterGroupsState=this._filterGroupSubject.asObservable(),this.valueChange=new e.vpe,this.lastInformed=void 0,o?(this.dropdownOptions=o.dropdownOptions,this.filtersMetadata=o.filtersMetadata):(this.dropdownOptions=[],this.filtersMetadata=[]);for(const r of this.filtersMetadata)if(r.required){let i=new l.w(r,"");this.addFilter(i)}}recursiveFindFiltersMetadata(o,r,i=!1){r||(r=this.filtersMetadata);for(const n of r){if(o(n))return n;if(n.children){const c=this.recursiveFindFiltersMetadata(o,n.children);if(c)return i&&this.addFilter(new l.w(n,"")),c}}}getMetadataWithId(o){return this.recursiveFindFiltersMetadata(r=>r.id==o)}addFilter(o,r=!1,i=!0){let n=this._filterGroupSubject.getValue(),c=n.find(h=>h.groupName==o.metadata.group);if(c){if(!o.metadata.multiple){const h=c.filters.find(D=>D.metadata.id==o.metadata.id);if(h)return void(r&&h.value!=o.value?h.setValue(o.value,!0,{ignoreChange:i}):console.warn("Filter already selected and has value"))}c.filters.push(o)}else c={groupName:o.metadata.group,filters:[o]},n.push(c);o.valueChanges.subscribe(h=>{h&&h.additional&&h.additional.ignoreChange||this.informChange()}),this._filterGroupSubject.next(n)}addFilterWithId(o,r=""){const i=this.recursiveFindFiltersMetadata(n=>n.id==o,void 0,!0);if(i){const n=new l.w(i,r);this.addFilter(n,!0,!1)}else console.warn("There is no filter with this ID")}canRemoveFilter(o){return!(o.metadata.required||o.metadata.children&&o.metadata.children.length>0&&this.getUngroupedFilters().some(r=>o.metadata.children?.some(i=>i.id==r.metadata.id)))}removeFilter(o){if(!this.canRemoveFilter(o))return;let r=this._filterGroupSubject.getValue(),i=r.find(n=>n.groupName==o.metadata.group);i&&(i.filters=i.filters.filter(n=>n!=o),0==i.filters.length&&r.splice(r.indexOf(i),1)),this._filterGroupSubject.next(r),this.informChange()}getUngroupedFilters(){const o=this._filterGroupSubject.getValue();let r=[];for(const i of o)r.push(...i.filters);return r}getSimpleFilterListValue(){let o={};const r=this.getUngroupedFilters();for(const i of r)if(d.g.hasValue(i.value)){if(r.some(n=>n.metadata.children&&n.metadata.children.some(c=>i.metadata.id==c.id)&&!d.g.hasValue(n.value)))continue;Object.keys(o).includes(i.metadata.key)?Array.isArray(o[i.metadata.key])?o[i.metadata.key].push(i.value):o[i.metadata.key]=[o[i.metadata.key],i.value]:o[i.metadata.key]=i.value}return o}informChange(){const o=this.getSimpleFilterListValue();this.isEqual(this.lastInformed,o)||(this.valueChange.emit(o),this.lastInformed=o)}addFilterValues(o){const r=this.getSimpleFilterListValue();for(let i of Object.keys(o)){const n=this.recursiveFindFiltersMetadata(c=>c.key==i);if(n){const c=new l.w(n,o[i]);this.addFilter(c,!0)}else console.warn("There is no filter with this key")}this.isEqual(this.getSimpleFilterListValue(),r)||this.informChange()}isEqual(o,r){return JSON.stringify(o)==JSON.stringify(r)}}return u.\u0275fac=function(o){return new(o||u)(e.LFG("filterConfiguration",8))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac}),u})()},4829:(C,g,a)=>{a.d(g,{a:()=>P});var e=a(7197),t=a(1571),d=a(6895),l=a(9245),m=a(9913);const u=["selector"];function _(v,E){1&v&&t.Hsn(0,0,["*ngTemplateOutlet","selector ? selector : defaultSelector"])}function o(v,E){if(1&v&&(t.TgZ(0,"span",9),t._uU(1),t.qZA()),2&v){const s=t.oxw().$implicit;t.xp6(1),t.Oqu(s.groupName)}}function r(v,E){if(1&v){const s=t.EpF();t.TgZ(0,"alasta-filter-item",10),t.NdJ("onRemove",function(){const O=t.CHM(s).$implicit,M=t.oxw(2);return t.KtG(M.service.removeFilter(O))}),t.qZA()}if(2&v){const s=E.$implicit,f=t.oxw(2);t.Gre("order-",s.metadata.groupOrder," mx-1 mb-1"),t.Q6J("filter",s)("filterClass",f.filterNeedsValue(s)?"border border-danger":"border border-secondary")("canRemove",f.service.canRemoveFilter(s))}}function i(v,E){if(1&v&&(t.TgZ(0,"div",5),t.YNc(1,o,2,1,"span",6),t.TgZ(2,"div",7),t.YNc(3,r,1,6,"alasta-filter-item",8),t.qZA()()),2&v){const s=E.$implicit;t.xp6(1),t.Q6J("ngIf",s.groupName),t.xp6(2),t.Q6J("ngForOf",s.filters)}}function n(v,E){if(1&v){const s=t.EpF();t.TgZ(0,"li",17)(1,"button",18),t.NdJ("click",function(){const O=t.CHM(s).$implicit,M=t.oxw(3);return t.KtG(M.service.addFilterWithId(O.id))}),t._uU(2),t.qZA()()}if(2&v){const s=E.$implicit,f=t.oxw(3);t.xp6(1),t.Q6J("disabled",f.canSelectDropdownOption(s.id)),t.xp6(1),t.hij(" ",s.name," ")}}function c(v,E){if(1&v&&(t.TgZ(0,"ul",15),t.YNc(1,n,3,2,"li",16),t.qZA()),2&v){const s=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",s.service.dropdownOptions)}}function h(v,E){1&v&&(t.TgZ(0,"div",11)(1,"button",12),t._uU(2," Add filter "),t._UZ(3,"span",13),t.qZA(),t.YNc(4,c,2,1,"ul",14),t.qZA())}const D=["*"];let P=(()=>{class v{constructor(){}ngOnInit(){}canSelectDropdownOption(s){return!!this.service.getUngroupedFilters().some(f=>f.metadata.id==s&&!f.metadata.multiple)}filterNeedsValue(s){return!(e.g.hasValue(s.value)||!s.metadata.children||!this.service.getUngroupedFilters().some(f=>s.metadata.children?.some(p=>p.id==f.metadata.id)&&e.g.hasValue(f.value)))}}return v.\u0275fac=function(s){return new(s||v)},v.\u0275cmp=t.Xpm({type:v,selectors:[["alasta-filters-list"]],contentQueries:function(s,f,p){if(1&s&&t.Suo(p,u,5),2&s){let O;t.iGM(O=t.CRH())&&(f.selector=O.first)}},inputs:{service:"service"},ngContentSelectors:D,decls:7,vars:4,consts:[["id","filters-list",1,"d-flex","flex-wrap"],["id","filters-dropdown",1,"mr-1"],[4,"ngTemplateOutlet"],["class","filter-group border border-primary mr-1 mb-1",4,"ngFor","ngForOf"],["defaultSelector",""],[1,"filter-group","border","border-primary","mr-1","mb-1"],["class","filter-group-title",4,"ngIf"],[1,"d-flex","flex-wrap"],[3,"class","filter","filterClass","canRemove","onRemove",4,"ngFor","ngForOf"],[1,"filter-group-title"],[3,"filter","filterClass","canRemove","onRemove"],["dropdown","",1,"btn-group"],["id","filter-dropdown-button","dropdownToggle","","type","button","aria-controls","filter-dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["id","filter-dropdown","class","dropdown-menu","role","menu","aria-labelledby","filter-dropdown-button",4,"dropdownMenu"],["id","filter-dropdown","role","menu","aria-labelledby","filter-dropdown-button",1,"dropdown-menu"],["role","menuitem",4,"ngFor","ngForOf"],["role","menuitem"],[1,"dropdown-item",3,"disabled","click"]],template:function(s,f){if(1&s&&(t.F$t(),t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,_,1,0,"ng-content",2),t.qZA(),t.YNc(3,i,4,2,"div",3),t.ALo(4,"async"),t.qZA(),t.YNc(5,h,5,0,"ng-template",null,4,t.W1O)),2&s){const p=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",f.selector?f.selector:p),t.xp6(1),t.Q6J("ngForOf",t.lcZ(4,2,f.service.filterGroupsState))}},dependencies:[d.sg,d.O5,d.tP,l.Hz,l.Mq,l.TO,m.Z,d.Ov],styles:[".filter-group[_ngcontent-%COMP%]{border-radius:.25rem}.filter-group[_ngcontent-%COMP%] > .filter-group-title[_ngcontent-%COMP%]{display:block;font-size:.8rem;margin:0 .8rem}"]}),v})()},9766:(C,g,a)=>{a.d(g,{v:()=>e});var e=(()=>{return(t=e||(e={}))[t.DROPDOWN_SEARCH=0]="DROPDOWN_SEARCH",t[t.MULTISELECT_SEARCH=1]="MULTISELECT_SEARCH",t[t.MULTISELECT=2]="MULTISELECT",t[t.TEXT_INPUT=3]="TEXT_INPUT",t[t.TOGGLE=4]="TOGGLE",e;var t})()},6817:(C,g,a)=>{a.d(g,{w:()=>t});var e=a(1571);class t{constructor(l,m){this.valueChanges=new e.vpe,this.metadata=l,this.value=m}set value(l){this.setValue(l)}setValue(l,m=!0,u){this._value=l,m&&this.valueChanges.emit({value:this._value,additional:u})}get value(){return this._value}}},797:(C,g,a)=>{a.d(g,{_:()=>_});var e=a(3905),t=a(4004),d=a(262),l=a(2340),m=a(1571),u=a(529);let _=(()=>{class o{constructor(i){this.http=i,this.serverUrl=l.N.apiServer,this.serverV2Url=l.N.v2apiServer}findDistinctLocations(i,n){return(0,e.z)(this.http.post(this.serverUrl+"location/filter-distinct",{...i?{country:i}:{},...n?{location:n}:{}}).pipe((0,t.U)(c=>({countries:c.distinctOptions[0].countries,properties:c.distinctOptions[0].locations})),(0,d.K)(c=>(console.error(c.error),[]))))}getAllProperties(){return(0,e.z)(this.http.get(this.serverV2Url+"property").pipe((0,t.U)(i=>({properties:i})),(0,d.K)(i=>(console.error(i.error),[]))))}}return o.\u0275fac=function(i){return new(i||o)(m.LFG(u.eN))},o.\u0275prov=m.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},917:(C,g,a)=>{a.d(g,{m:()=>u});var e=a(3905),t=a(4004),d=a(2340),l=a(1571),m=a(529);let u=(()=>{class _{constructor(r){this.http=r,this.serverUrl=d.N.apiServer,this.serverV2Url=d.N.v2apiServer}findDistinctPositions(r,i,n){return(0,e.z)(this.http.post(this.serverUrl+"position/filter-distinct",{...r?{area:r}:{},...i?{department:i}:{},...n?{position:n}:{}}).pipe((0,t.U)(c=>({areas:c.distinctOptions[0].areas,departments:c.distinctOptions[0].departments,positions:c.distinctOptions[0].positions}))))}getAllPositions(){return(0,e.z)(this.http.get(this.serverV2Url+"position").pipe((0,t.U)(r=>({positions:r}))))}listPositions(r,i,n){return(0,e.z)(this.http.get(this.serverV2Url+"position/list",{params:{...r?{search:r}:{},...n?{page:n}:{},...i?{count:i}:{}}}).pipe((0,t.U)(c=>c)))}createPosition(r){return(0,e.z)(this.http.post(this.serverV2Url+"position",{...r.name?{name:r.name}:{},...r.department?{department:r.department}:{},...r.area?{area:r.area}:{},...r.description?{description:r.description}:{}}).pipe((0,t.U)(i=>i)))}editPosition(r,i){return(0,e.z)(this.http.put(this.serverV2Url+"position/"+r,{...i.name?{name:i.name}:{},...i.department?{department:i.department}:{},...i.area?{area:i.area}:{},...i.description?{description:i.description}:{}}).pipe((0,t.U)(n=>n)))}}return _.\u0275fac=function(r){return new(r||_)(l.LFG(m.eN))},_.\u0275prov=l.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},4954:(C,g,a)=>{a.d(g,{m:()=>o});var e=a(3905),t=a(4004),d=a(262),l=a(2340),m=a(2027),u=a(1571),_=a(529);let o=(()=>{class r{constructor(n){this.http=n,this.serverUrl=l.N.apiServer,this.serverV2Url=l.N.v2apiServer}findReviewWindows(){return this.http.get(this.serverUrl+"window").pipe((0,t.U)(n=>({reviewWindows:n.windows})),(0,d.K)(n=>(console.error(n.error),[])))}getProgressBarStats(n,c){return(0,e.z)(this.http.put(this.serverV2Url+"statistics/progress-bar/"+n,c).pipe((0,t.U)(h=>({...h,reviewCycle:r.formatDates(h.reviewCycle)}))))}getTalentMapStats(n,c){return(0,e.z)(this.http.put(this.serverV2Url+"statistics/talent-map/"+n,c).pipe(h=>h))}static formatDates(n){if(n)return{...n,...n.startDate?{startDate:new m.p({ISODateString:n.startDate})}:{},...n.endDate?{endDate:new m.p({ISODateString:n.endDate})}:{}}}getAllReviewCycles(){return(0,e.z)(this.http.get(this.serverV2Url+"review-cycle").pipe((0,t.U)(n=>({reviewCycles:n.map(c=>r.formatDates(c))}))))}getCurrentReviewCycle(){return(0,e.z)(this.http.get(this.serverV2Url+"review-cycle/current").pipe((0,t.U)(n=>({reviewCycle:r.formatDates(n)}))))}createReviewCycle(n){return(0,e.z)(this.http.post(this.serverV2Url+"review-cycle",{...n.name?{name:n.name}:{},...n.startDate?{startDate:n.startDate}:{},...n.endDate?{endDate:n.endDate}:{}}).pipe((0,t.U)(c=>r.formatDates(c))))}editReviewCycle(n){return(0,e.z)(this.http.put(this.serverV2Url+"review-cycle/"+n._id,{...n.name?{name:n.name}:{},...n.startDate?{startDate:n.startDate}:{},...n.endDate?{endDate:n.endDate}:{}}).pipe((0,t.U)(c=>r.formatDates(c))))}deleteReviewCycle(n){return(0,e.z)(this.http.delete(this.serverV2Url+"review-cycle/"+n).pipe((0,t.U)(c=>c)))}}return r.\u0275fac=function(n){return new(n||r)(u.LFG(_.eN))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},8254:(C,g,a)=>{a.d(g,{M:()=>u});var e=a(3905),t=a(4004),d=a(2340),l=a(1571),m=a(529);let u=(()=>{class _{constructor(r){this.http=r,this.serverUrl=d.N.v2apiServer}getBoxes(){return(0,e.z)(this.http.get(this.serverUrl+"talent-map-box").pipe((0,t.U)(r=>({boxes:r.sort((i,n)=>i.pos-n.pos)}))))}}return _.\u0275fac=function(r){return new(r||_)(l.LFG(m.eN))},_.\u0275prov=l.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},2338:(C,g,a)=>{a.d(g,{F:()=>e});class e{static encodeObjectToURLParam(d,l=""){const m=Object.keys(d).map(u=>{const _=d[u];return d.constructor===Array?u=`${l}[]`:d.constructor===Object&&(u=l?`${l}[${u}]`:u),"object"==typeof _?this.encodeObjectToURLParam(_,u):`${u}=${encodeURIComponent(_)}`});return[].concat.apply([],m).join("&")}static decodeURLParamToObject(d){let l={};for(const m of d.split("&")){let[u,_]=m.split("=");_=decodeURIComponent(_),this.handleSingleValue(l,u,_)}return l}static handleSingleValue(d,l,m){if(l.includes("["))if("[]"==l)d.push(m);else{const u=l.indexOf("["),_=l.indexOf("]"),o=l.substring(0,u);if(u+1==_){const r=l.substring(u);if(""!=o)null==d[o]&&(d[o]=[]),this.handleSingleValue(d[o],r,m);else{const i=l.substring(_+1),n=i.indexOf("["),c=i.indexOf("]");if(n+1==c){let h=[];d.push(h),this.handleSingleValue(h,i,m)}else{const h=i.substring(n+1,c)+i.substring(c+1);let D={};d.push(D),this.handleSingleValue(D,h,m)}}}else{const r=l.substring(u+1,_)+l.substring(_+1);null==d[o]&&(d[o]={}),this.handleSingleValue(d[o],r,m)}}else d[l]=m}}}}]);