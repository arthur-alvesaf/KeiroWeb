"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[261],{76:(U,b,n)=>{n.d(b,{S:()=>E});var t=n(5e3),s=n(9808);function T(p,_){if(1&p&&(t.TgZ(0,"p",6),t._uU(1),t.qZA()),2&p){const i=t.oxw();t.xp6(1),t.Oqu(i.context)}}function g(p,_){1&p&&(t.TgZ(0,"p"),t.TgZ(1,"strong"),t._uU(2,"This action cannot be undone."),t.qZA(),t.qZA())}let E=(()=>{class p{constructor(){this.modalHeader="Delete?",this.context="",this.confirmationPrompt="Are you sure you want to delete?",this.canUndo=!1,this.rejectButtonText="Cancel",this.confirmButtonIconClasses="fa fa-trash-alt",this.confirmButtonText="Delete",this.onConfirm=new t.vpe,this.onReject=new t.vpe}reject(){this.onReject.emit()}confirm(){this.onConfirm.emit()}}return p.\u0275fac=function(i){return new(i||p)},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-shared-confirmation"]],inputs:{modalHeader:"modalHeader",context:"context",confirmationPrompt:"confirmationPrompt",canUndo:"canUndo",rejectButtonText:"rejectButtonText",confirmButtonIconClasses:"confirmButtonIconClasses",confirmButtonText:"confirmButtonText"},outputs:{onConfirm:"onConfirm",onReject:"onReject"},decls:20,vars:7,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","text-center"],["class","my-3",4,"ngIf"],[1,"my-3"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",3,"ngClass"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"]],template:function(i,m){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return m.reject()}),t.TgZ(5,"span",3),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,T,2,1,"p",5),t.TgZ(9,"p",6),t._uU(10),t.qZA(),t.YNc(11,g,3,0,"p",7),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"div",9),t.TgZ(14,"button",10),t.NdJ("click",function(){return m.confirm()}),t._UZ(15,"i",11),t._uU(16),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return m.reject()}),t._UZ(18,"i",13),t._uU(19),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(m.modalHeader),t.xp6(5),t.Q6J("ngIf",m.context),t.xp6(2),t.Oqu(m.confirmationPrompt),t.xp6(1),t.Q6J("ngIf",!m.canUndo),t.xp6(4),t.Q6J("ngClass",m.confirmButtonIconClasses),t.xp6(1),t.hij(" ",m.confirmButtonText," "),t.xp6(3),t.hij(" ",m.rejectButtonText," "))},directives:[s.O5,s.mk],encapsulation:2}),p})()},1892:(U,b,n)=>{n.d(b,{C:()=>T});var t=n(9808),s=n(5e3);let T=(()=>{class g{}return g.\u0275fac=function(p){return new(p||g)},g.\u0275mod=s.oAB({type:g}),g.\u0275inj=s.cJS({imports:[[t.ez]]}),g})()},6660:(U,b,n)=>{n.d(b,{S:()=>$});var t=n(5e3),s=n(2382),T=n(9147),g=n(2733),E=n(9808),p=n(845),_=n(1424),i=n(7311),m=n(5652),d=n(4036),r=n(3407),l=n(727),f=n(8372),h=n(3905),I=n(2340),O=n(520);let x=(()=>{class a{constructor(e){this.http=e,this.serverUrl=I.N.apiServer}findTalentsFilterSearch(e,o,u,c,Z,y,A,C,M,D){return(0,h.z)(this.http.post(this.serverUrl+"talent/finder",Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({step:e,page:o},u?{search:u}:{}),c?{windowRId:c}:{}),Z?{boxPosition:Z}:{}),y?{country:y}:{}),A?{hotel:A}:{}),C?{area:C}:{}),M?{department:M}:{}),D?{position:D}:{})).pipe(F=>F))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(O.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var S=n(4255),q=n(9783);const J=["searchInput"];function j(a,v){1&a&&(t.TgZ(0,"tr"),t._UZ(1,"th",11),t.TgZ(2,"th"),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Current employment"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Nationality"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Languages"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Email"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Available for Relocation"),t.qZA(),t.qZA())}function P(a,v){if(1&a&&(t.TgZ(0,"tr",12),t.TgZ(1,"td"),t._UZ(2,"p-tableRadioButton",13),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.qZA()),2&a){const e=v.$implicit;t.Q6J("pSelectableRow",e),t.xp6(2),t.Q6J("value",e),t.xp6(2),t.AsE("",e.name.given," ",e.name.last,""),t.xp6(2),t.Oqu((null==e.position?null:e.position.name)||""),t.xp6(2),t.Oqu(e.nationality),t.xp6(2),t.Oqu(e.languages.join(", ")),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.mobility?"Yes":"")}}let B=(()=>{class a{constructor(e,o){this.talentsManagementApi=e,this.modalsController=o,this.searchInputControl=new s.NI,this.subscriptions=new l.w0,this.total=0,this.page=0,this.step=10,this.rows=[],this.loadingIndicator=!1,this.onSelectTalent=new t.vpe,this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,f.b)(350)).subscribe(u=>{this.searchInputControl.valid&&this.fetchTalentsWithSearch()}))}ngAfterViewInit(){var e;null===(e=this.input)||void 0===e||e.nativeElement.focus()}setPage(e){this.step=e.rows,this.page=Math.floor(e.first/e.rows),this.fetchTalentsWithSearch()}fetchTalentsWithSearch(){this.talentsManagementApi.findTalentsFilterSearch(this.step,this.page+1,this.searchInputControl.value).then(e=>{this.rows=e.talents,this.total=e.total})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(x),t.Y36(g.l))},a.\u0275cmp=t.Xpm({type:a,selectors:[["keiro-talents-table"]],viewQuery:function(e,o){if(1&e&&t.Gf(J,5),2&e){let u;t.iGM(u=t.CRH())&&(o.input=u.first)}},outputs:{onSelectTalent:"onSelectTalent"},decls:15,vars:7,consts:[[1,"form-row","justify-content-end"],[1,"col","mb-1"],[1,"has-search"],[1,"fa","fa-search","has-search-icon"],["type","text","placeholder","Search by name, email, or Keiro ID",1,"form-control",3,"formControl"],["searchInput",""],["selectionMode","single","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","lazy","loading","paginator","rows","totalRecords","onLazyLoad","selectionChange"],["pTemplate","header"],["pTemplate","body"],["routerLink","/app/talent/create",1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-user-plus"],[2,"width","3rem"],[3,"pSelectableRow"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"span",3),t._UZ(4,"input",4,5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"p-table",6),t.NdJ("onLazyLoad",function(c){return o.setPage(c)})("selectionChange",function(c){return o.onSelectTalent.emit(c)}),t.YNc(7,j,14,0,"ng-template",7),t.YNc(8,P,15,9,"ng-template",8),t.qZA(),t.TgZ(9,"p"),t._uU(10," Is the Talent you're looking for not in the list?"),t._UZ(11,"br"),t.TgZ(12,"a",9),t.NdJ("click",function(){return o.modalsController.closeAllModals()}),t._UZ(13,"i",10),t._uU(14," Click here to create a new Talent profile "),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("formControl",o.searchInputControl),t.xp6(2),t.Q6J("value",o.rows)("lazy",!0)("loading",o.loadingIndicator)("paginator",!0)("rows",o.step)("totalRecords",o.total))},directives:[s.Fj,s.JJ,s.oH,S.iA,q.jx,S.Ei,S.GE,i.yS],styles:[".has-search[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%] > .has-search-icon[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}"]}),a})();function N(a,v){1&a&&(t.TgZ(0,"span"),t._uU(1,"Assign talent to job"),t.qZA())}function R(a,v){1&a&&t._uU(0,"Edit employment information")}function L(a,v){if(1&a){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2),c=t.MAs(34);return u.modalsControllerService.openModal(c,{class:"modal-lg"})}),t._uU(1," Choose Talent "),t.qZA()}}function z(a,v){if(1&a){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).clearTalentFromForm()}),t.qZA()}}function w(a,v){if(1&a&&(t.TgZ(0,"div",26),t._UZ(1,"input",27),t.YNc(2,z,1,0,"button",28),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",!0)("value",(null==e.currentlySelectedTalent?null:e.currentlySelectedTalent.name.given)+" "+(null==e.currentlySelectedTalent?null:e.currentlySelectedTalent.name.last)),t.xp6(1),t.Q6J("ngIf",e.addingEmployment)}}const k=function(a){return["/app/talent/view/",a]};function W(a,v){if(1&a){const e=t.EpF();t.TgZ(0,"div",30),t._uU(1," This talent has history, "),t.TgZ(2,"a",31),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).modalsControllerService.closeUpperModal()}),t._uU(3,"click here to view profile"),t.qZA(),t.qZA()}if(2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.VKq(1,k,null==e.currentlySelectedTalent?null:e.currentlySelectedTalent._id))}}function Y(a,v){if(1&a&&(t.TgZ(0,"div",18),t.TgZ(1,"h6",7),t._uU(2,"End Date"),t.qZA(),t.TgZ(3,"div",19),t._UZ(4,"p-calendar",32),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("showIcon",!0)("minDate",(null==e.existing?null:e.existing.from)||e.today)("maxDate",e.today)}}function K(a,v){if(1&a&&(t.TgZ(0,"div",18),t.TgZ(1,"h6",7),t._uU(2,"End Reason"),t.qZA(),t.TgZ(3,"div",19),t._UZ(4,"p-dropdown",33),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("options",e.statusOptions)("autoDisplayFirst",!1)}}function Q(a,v){1&a&&(t.TgZ(0,"div",18),t.TgZ(1,"h6",7),t._uU(2,"Notes"),t.qZA(),t.TgZ(3,"div",19),t._UZ(4,"textarea",34),t.qZA(),t.qZA())}function H(a,v){if(1&a&&(t.TgZ(0,"form",17),t.TgZ(1,"div",18),t.TgZ(2,"h6",7),t._uU(3,"Talent"),t.qZA(),t.TgZ(4,"div",19),t.YNc(5,L,2,0,"button",20),t.YNc(6,w,3,3,"div",21),t.qZA(),t.YNc(7,W,4,3,"div",22),t.qZA(),t.TgZ(8,"div",18),t.TgZ(9,"h6",7),t._uU(10,"Start Date"),t.qZA(),t.TgZ(11,"div",19),t._UZ(12,"p-calendar",23),t.qZA(),t.qZA(),t.YNc(13,Y,5,3,"div",24),t.YNc(14,K,5,2,"div",24),t.YNc(15,Q,5,0,"div",24),t.qZA()),2&a){const e=t.oxw();t.Q6J("formGroup",e.createEmploymentForm),t.xp6(5),t.Q6J("ngIf",!e.talentIsSelected),t.xp6(1),t.Q6J("ngIf",e.talentIsSelected),t.xp6(1),t.Q6J("ngIf",e.currentlySelectedTalent&&e.warnAboutSelectedTalent),t.xp6(5),t.Q6J("showIcon",!0)("maxDate",e.today),t.xp6(1),t.Q6J("ngIf",e.editingEndedEmployment),t.xp6(1),t.Q6J("ngIf",e.editingEndedEmployment),t.xp6(1),t.Q6J("ngIf",e.editingEndedEmployment)}}function V(a,v){1&a&&(t.TgZ(0,"span"),t._UZ(1,"i",35),t._uU(2," Assign talent "),t.qZA())}function G(a,v){1&a&&(t._UZ(0,"i",36),t._uU(1," Edit employment "))}function X(a,v){if(1&a){const e=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.TgZ(2,"span"),t._uU(3,"Talent Search"),t.qZA(),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().modalsControllerService.closeUpperModal()}),t.TgZ(5,"span",5),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"keiro-talents-table",37),t.NdJ("onSelectTalent",function(u){return t.CHM(e),t.oxw().selectTalent(u)}),t.qZA(),t.qZA(),t.TgZ(9,"div",10),t.TgZ(10,"div",11),t.TgZ(11,"button",38),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return u.clearTalentFromForm(),u.modalsControllerService.closeUpperModal()}),t._UZ(12,"i",13),t._uU(13," Cancel "),t.qZA(),t.TgZ(14,"button",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().modalsControllerService.closeUpperModal()}),t._UZ(15,"i",40),t._uU(16," Select "),t.qZA(),t.qZA(),t.qZA()}}let $=(()=>{class a{constructor(e,o,u){this.fb=e,this.modalsControllerService=o,this.employmentServiceApi=u,this.addingEmployment=!0,this.editingEndedEmployment=!1,this.onSumbit=new t.vpe,this.onCloseModal=new t.vpe,this.processing=!1,this.warnAboutSelectedTalent=!1,this.today=new Date,this.statusOptions=[{label:"Ended amicably",value:2},{label:"Terminated",value:3}]}ngOnInit(){var e,o,u,c,Z,y,A;if(this.currentlySelectedTalent=(null===(e=this.existing)||void 0===e?void 0:e.talent)||void 0,void 0!==this.existing){this.addingEmployment=!1,this.addingEmployment=!1;let C={talent:[(null===(o=this.existing)||void 0===o?void 0:o.talent._id)||null,s.kI.required],startDate:[null===(u=this.existing)||void 0===u?void 0:u.from,s.kI.required]};(null===(c=this.existing)||void 0===c?void 0:c.until)&&(this.editingEndedEmployment=!0,Object.assign(C,{endDate:[null===(Z=this.existing)||void 0===Z?void 0:Z.until,s.kI.required]},{endReason:[null===(y=this.existing)||void 0===y?void 0:y.status,s.kI.required]},{notes:[null===(A=this.existing)||void 0===A?void 0:A.notes]})),this.createEmploymentForm=this.fb.group(C)}else this.createEmploymentForm=this.fb.group({talent:[null,s.kI.required],startDate:[null,s.kI.required]})}get talentIsSelected(){var e,o;return(null===(o=null===(e=this.createEmploymentForm)||void 0===e?void 0:e.get("talent"))||void 0===o?void 0:o.value)||!1}selectTalent(e){var o,u,c,Z,y,A,C,M;this.warnAboutSelectedTalent=!1,this.currentlySelectedTalent=e,null===(u=null===(o=this.createEmploymentForm)||void 0===o?void 0:o.get("talent"))||void 0===u||u.setValue(e._id),(null==e?void 0:e.position._id)==(null===(c=this.forJob)||void 0===c?void 0:c.position._id)&&(null==e?void 0:e.location._id)==(null===(Z=this.forJob)||void 0===Z?void 0:Z.property._id)&&(null===(A=null===(y=this.createEmploymentForm)||void 0===y?void 0:y.get("startDate"))||void 0===A||A.setValue(new Date(e.startDate)),null===(M=null===(C=this.createEmploymentForm)||void 0===C?void 0:C.get("startDate"))||void 0===M||M.markAsDirty()),this.employmentServiceApi.getEmploymentsForTalent(e._id).then(D=>{this.warnAboutSelectedTalent=D.some(F=>F.status===T.V.TERMINATED)})}clearTalentFromForm(){var e,o,u,c,Z,y,A,C,M,D;this.warnAboutSelectedTalent=!1,null===(o=null===(e=this.createEmploymentForm)||void 0===e?void 0:e.get("talent"))||void 0===o||o.setValue(null),(null===(u=this.currentlySelectedTalent)||void 0===u?void 0:u.position._id)==(null===(c=this.forJob)||void 0===c?void 0:c.position._id)&&(null===(Z=this.currentlySelectedTalent)||void 0===Z?void 0:Z.location._id)==(null===(y=this.forJob)||void 0===y?void 0:y.property._id)&&(null===(C=null===(A=this.createEmploymentForm)||void 0===A?void 0:A.get("startDate"))||void 0===C||C.setValue(null),null===(D=null===(M=this.createEmploymentForm)||void 0===M?void 0:M.get("startDate"))||void 0===D||D.markAsPristine()),this.currentlySelectedTalent=void 0}getFormValue(){var e,o,u,c,Z,y,A,C;return Object.assign(Object.assign(Object.assign({talentId:null===(e=this.createEmploymentForm)||void 0===e?void 0:e.value.talent,startDate:null===(o=this.createEmploymentForm)||void 0===o?void 0:o.value.startDate},(null===(u=this.createEmploymentForm)||void 0===u?void 0:u.value.endDate)?{endDate:null===(c=this.createEmploymentForm)||void 0===c?void 0:c.value.endDate}:{}),(null===(Z=this.createEmploymentForm)||void 0===Z?void 0:Z.value.endReason)?{endReason:null===(y=this.createEmploymentForm)||void 0===y?void 0:y.value.endReason}:{}),(null===(A=this.createEmploymentForm)||void 0===A?void 0:A.value.notes)?{notes:null===(C=this.createEmploymentForm)||void 0===C?void 0:C.value.notes}:{notes:null})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.qu),t.Y36(g.l),t.Y36(T.I))},a.\u0275cmp=t.Xpm({type:a,selectors:[["team-add-edit-employment-modal"]],inputs:{existing:"existing",forJob:"forJob"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal"},decls:35,vars:10,consts:[[1,"modal-header"],[1,"modal-title"],[4,"ngIf","ngIfElse"],["editEmploymentModalTitle",""],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-0"],[1,"mb-2"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["editEmploymentButtonContent",""],["talentSelectorModal",""],[3,"formGroup"],[1,"my-2"],[1,"p-fluid"],["pButton","",3,"click",4,"ngIf"],["class","p-inputgroup",4,"ngIf"],["class","mt-1 alert alert-warning","role","alert",4,"ngIf"],["formControlName","startDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","maxDate"],["class","my-2",4,"ngIf"],["pButton","",3,"click"],[1,"p-inputgroup"],["type","text","pInputText","",3,"disabled","value"],["type","button","pButton","","icon","pi pi-times","label","Clear","class","p-button-danger",3,"click",4,"ngIf"],["type","button","pButton","","icon","pi pi-times","label","Clear",1,"p-button-danger",3,"click"],["role","alert",1,"mt-1","alert","alert-warning"],[3,"routerLink","click"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","minDate","maxDate"],["formControlName","endReason",3,"options","autoDisplayFirst"],["pInputTextarea","","formControlName","notes"],["aria-hidden","true",1,"fa","fa-briefcase"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[3,"onSelectTalent"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-check-circle"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.YNc(2,N,2,0,"span",2),t.YNc(3,R,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(c){return o.onCloseModal.emit(c)}),t.TgZ(6,"span",5),t._uU(7,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t.TgZ(9,"div"),t.TgZ(10,"h5"),t._uU(11,"Job:"),t.qZA(),t.TgZ(12,"h6",7),t._uU(13),t.qZA(),t.TgZ(14,"h6",8),t.TgZ(15,"small"),t._uU(16),t._UZ(17,"br"),t._uU(18),t.qZA(),t.qZA(),t.TgZ(19,"h6"),t._uU(20),t.qZA(),t.qZA(),t._UZ(21,"hr"),t.TgZ(22,"div"),t.YNc(23,H,16,9,"form",9),t.qZA(),t.qZA(),t.TgZ(24,"div",10),t.TgZ(25,"div",11),t.TgZ(26,"button",12),t.NdJ("click",function(c){return o.onCloseModal.emit(c)}),t._UZ(27,"i",13),t._uU(28," Cancel "),t.qZA(),t.TgZ(29,"button",14),t.NdJ("click",function(){return o.onSumbit.emit(o.getFormValue())}),t.YNc(30,V,3,0,"span",2),t.YNc(31,G,2,0,"ng-template",null,15,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.YNc(33,X,17,0,"ng-template",null,16,t.W1O)),2&e){const u=t.MAs(4),c=t.MAs(32);t.xp6(2),t.Q6J("ngIf",o.addingEmployment)("ngIfElse",u),t.xp6(11),t.Oqu(null==o.forJob?null:o.forJob.position.name),t.xp6(3),t.hij(" ",null==o.forJob?null:o.forJob.position.area,""),t.xp6(2),t.hij(" ",null==o.forJob?null:o.forJob.position.department," "),t.xp6(2),t.Oqu(null==o.forJob?null:o.forJob.property.name),t.xp6(3),t.Q6J("ngIf",o.createEmploymentForm),t.xp6(6),t.Q6J("disabled",o.processing||(null==o.createEmploymentForm?null:o.createEmploymentForm.pristine)||(null==o.createEmploymentForm?null:o.createEmploymentForm.invalid)),t.xp6(1),t.Q6J("ngIf",o.addingEmployment)("ngIfElse",c)}},directives:[E.O5,s._Y,s.JL,s.sg,p.Hq,_.o,i.yS,m.f,s.JJ,s.u,d.Lt,s.Fj,r.g,B],styles:[""]}),a})()},2727:(U,b,n)=>{n.d(b,{Z:()=>r});var t=n(9808),s=n(2382),T=n(5652),g=n(4036),E=n(4255),p=n(7311),_=n(5e3);let i=(()=>{class l{}return l.\u0275fac=function(h){return new(h||l)},l.\u0275mod=_.oAB({type:l}),l.\u0275inj=_.cJS({imports:[[t.ez,p.Bz,s.UX,E.U$]]}),l})();var m=n(1424),d=n(3407);let r=(()=>{class l{}return l.\u0275fac=function(h){return new(h||l)},l.\u0275mod=_.oAB({type:l}),l.\u0275inj=_.cJS({imports:[[i,t.ez,p.Bz,s.UX,g.kW,T._8,m.j,d.A]]}),l})()},7182:(U,b,n)=>{n.d(b,{Q:()=>i});var t=n(5e3),s=n(2382),T=n(9808),g=n(5652),E=n(4036),p=n(3407);function _(m,d){if(1&m&&(t.TgZ(0,"form",14),t.TgZ(1,"div",5),t.TgZ(2,"h6",6),t._uU(3,"Ended at:"),t.qZA(),t.TgZ(4,"div",15),t._UZ(5,"p-calendar",16),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"h6",6),t._uU(8,"End with status:"),t.qZA(),t.TgZ(9,"div",15),t._UZ(10,"p-dropdown",17),t.qZA(),t.qZA(),t.TgZ(11,"div",5),t.TgZ(12,"h6",6),t._uU(13,"Additional notes:"),t.qZA(),t.TgZ(14,"div",15),t._UZ(15,"textarea",18),t.qZA(),t.qZA(),t.qZA()),2&m){const r=t.oxw();t.Q6J("formGroup",r.editEmploymentForm),t.xp6(5),t.Q6J("showIcon",!0)("maxDate",r.today)("minDate",(null==r.employment?null:r.employment.from)||r.today),t.xp6(5),t.Q6J("options",r.endStatusOptions)("autoDisplayFirst",!1)}}let i=(()=>{class m{constructor(r){this.fb=r,this.onSumbit=new t.vpe,this.onCloseModal=new t.vpe,this.processing=!1,this.endStatusOptions=[{label:"Ended amicably",value:2},{label:"Terminated",value:3}],this.today=new Date}ngOnInit(){this.editEmploymentForm=this.fb.group({newStatus:[2,s.kI.required],endDate:[null,s.kI.required],notes:[null]})}getFormValue(){var r,l,f,h;return Object.assign({newStatus:null===(r=this.editEmploymentForm)||void 0===r?void 0:r.value.newStatus,until:null===(l=this.editEmploymentForm)||void 0===l?void 0:l.value.endDate},(null===(f=this.editEmploymentForm)||void 0===f?void 0:f.value.notes)?{notes:null===(h=this.editEmploymentForm)||void 0===h?void 0:h.value.notes}:{})}}return m.\u0275fac=function(r){return new(r||m)(t.Y36(s.qu))},m.\u0275cmp=t.Xpm({type:m,selectors:[["team-end-employment-modal"]],inputs:{job:"job",employment:"employment"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal"},decls:30,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"my-2"],[1,"mb-0"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-save"],[3,"formGroup"],[1,"p-fluid"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","maxDate","minDate"],["formControlName","newStatus",3,"options","autoDisplayFirst"],["pInputTextarea","","formControlName","notes"]],template:function(r,l){1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.TgZ(2,"span"),t._uU(3,"End employment"),t.qZA(),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(h){return l.onCloseModal.emit(h)}),t.TgZ(5,"span",3),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"h5",5),t._uU(9),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"h6",6),t._uU(12,"Job title:"),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA(),t.qZA(),t.TgZ(15,"div",5),t.TgZ(16,"h6",6),t._uU(17,"Started at:"),t.qZA(),t.TgZ(18,"span"),t._uU(19),t.ALo(20,"date"),t.qZA(),t.qZA(),t.YNc(21,_,16,6,"form",7),t.qZA(),t.TgZ(22,"div",8),t.TgZ(23,"div",9),t.TgZ(24,"button",10),t.NdJ("click",function(h){return l.onCloseModal.emit(h)}),t._UZ(25,"i",11),t._uU(26," Cancel "),t.qZA(),t.TgZ(27,"button",12),t.NdJ("click",function(){return l.onSumbit.emit(l.getFormValue())}),t._UZ(28,"i",13),t._uU(29," End employment "),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(9),t.AsE("",null==l.employment||null==l.employment.talent||null==l.employment.talent.name?null:l.employment.talent.name.given," ",null==l.employment||null==l.employment.talent||null==l.employment.talent.name?null:l.employment.talent.name.last,""),t.xp6(5),t.Oqu(null==l.job||null==l.job.position?null:l.job.position.name),t.xp6(5),t.Oqu(t.xi3(20,6,null==l.employment?null:l.employment.from,"dd MMM yyyy")),t.xp6(2),t.Q6J("ngIf",l.editEmploymentForm),t.xp6(6),t.Q6J("disabled",l.processing||(null==l.editEmploymentForm?null:l.editEmploymentForm.pristine)||(null==l.editEmploymentForm?null:l.editEmploymentForm.invalid)))},directives:[T.O5,s._Y,s.JL,s.sg,g.f,s.JJ,s.u,E.Lt,s.Fj,p.g],pipes:[T.uU],styles:[""]}),m})()},9147:(U,b,n)=>{n.d(b,{I:()=>_,V:()=>p});var t=n(3905),s=n(4004),T=n(2340),g=n(5e3),E=n(520),p=(()=>{return(i=p||(p={}))[i.CANDIDATE=0]="CANDIDATE",i[i.ACTIVE=1]="ACTIVE",i[i.ENDED=2]="ENDED",i[i.TERMINATED=3]="TERMINATED",p;var i})();let _=(()=>{class i{constructor(d){this.http=d,this.serverUrl=T.N.v2apiServer}static formatDates(d){return Object.assign(Object.assign(Object.assign({},d),d.from?{from:new Date(d.from)}:{}),d.until?{until:new Date(d.until)}:{})}createEmploymentRecord(d,r,l,f,h){return(0,t.z)(this.http.post(this.serverUrl+"employment/",Object.assign({job:d,talent:r,status:l,from:f.toISOString()},h?{allowMultiple:h}:{})).pipe((0,s.U)(I=>i.formatDates(I))))}getEmploymentsForTalent(d){return(0,t.z)(this.http.get(this.serverUrl+"employment/talent/"+d).pipe((0,s.U)(r=>r.map(l=>i.formatDates(l)))))}editEmployment(d,r,l,f,h){return(0,t.z)(this.http.put(this.serverUrl+"employment/"+d,Object.assign(Object.assign(Object.assign({from:r.toISOString()},void 0!==l?{status:l}:{}),void 0!==f?{until:f}:{}),void 0!==h?{notes:h}:{})).pipe((0,s.U)(I=>i.formatDates(I))))}endEmployment(d,r,l,f){return(0,t.z)(this.http.put(this.serverUrl+"employment/"+d,Object.assign({status:r,until:l.toISOString()},f?{notes:f}:{})).pipe((0,s.U)(h=>i.formatDates(h))))}}return i.\u0275fac=function(d){return new(d||i)(g.LFG(E.eN))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},797:(U,b,n)=>{n.d(b,{_:()=>p});var t=n(4004),s=n(262),T=n(2340),g=n(5e3),E=n(520);let p=(()=>{class _{constructor(m){this.http=m,this.serverUrl=T.N.apiServer,this.serverV2Url=T.N.v2apiServer}findDistinctLocations(m,d){return this.http.post(this.serverUrl+"location/filter-distinct",Object.assign(Object.assign({},m?{country:m}:{}),d?{location:d}:{})).pipe((0,t.U)(r=>({countries:r.distinctOptions[0].countries,properties:r.distinctOptions[0].locations})),(0,s.K)(r=>(console.error(r.error),[])))}getAllProperties(){return this.http.get(this.serverV2Url+"property").pipe((0,t.U)(m=>({properties:m})),(0,s.K)(m=>(console.error(m.error),[])))}}return _.\u0275fac=function(m){return new(m||_)(g.LFG(E.eN))},_.\u0275prov=g.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},4053:(U,b,n)=>{n.d(b,{U:()=>_});var t=n(3905),s=n(4004),T=n(2340),g=n(9147),E=n(5e3),p=n(520);let _=(()=>{class i{constructor(d){this.http=d,this.serverUrl=T.N.v2apiServer}getTeamByLeader(d){return(0,t.z)(this.http.get(this.serverUrl+"team/"+d).pipe((0,s.U)(r=>Object.assign(Object.assign(Object.assign({},r),r.employment?{employment:g.I.formatDates(r.employment)}:{}),{teamMembers:r.teamMembers.map(l=>Object.assign(Object.assign({},l),l.employment?{employment:g.I.formatDates(l.employment)}:{}))}))))}getRelevantJobByTalent(d){return(0,t.z)(this.http.get(this.serverUrl+"team/relevant-job/"+d).pipe((0,s.U)(r=>r)))}addEndedEmployment(d,r,l,f,h,I,O){return(0,t.z)(this.http.post(this.serverUrl+"team/ended-employment",Object.assign({title:void 0,leaderJob:void 0,property:d,position:r,talent:l,status:f,from:h,until:I},O?{notes:O}:{})).pipe((0,s.U)(x=>x)))}addJob(d,r,l){return(0,t.z)(this.http.post(this.serverUrl+"job/",{leader:d,property:r,position:l}).pipe((0,s.U)(f=>f)))}removeJob(d){return(0,t.z)(this.http.delete(this.serverUrl+"job/"+d).pipe((0,s.U)(r=>r)))}}return i.\u0275fac=function(d){return new(d||i)(E.LFG(p.eN))},i.\u0275prov=E.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},3407:(U,b,n)=>{n.d(b,{A:()=>E,g:()=>g});var t=n(5e3),s=n(9808),T=n(2382);let g=(()=>{class p{constructor(i,m,d,r){this.el=i,this.ngModel=m,this.control=d,this.cd=r,this.onResize=new t.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(i){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(i){this.autoResize&&this.resize(i)}onBlur(i){this.autoResize&&this.resize(i)}resize(i){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(i||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return p.\u0275fac=function(i){return new(i||p)(t.Y36(t.SBq),t.Y36(T.On,8),t.Y36(T.a5,8),t.Y36(t.sBO))},p.\u0275dir=t.lG2({type:p,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(i,m){1&i&&t.NdJ("input",function(r){return m.onInput(r)})("focus",function(r){return m.onFocus(r)})("blur",function(r){return m.onBlur(r)}),2&i&&t.ekj("p-filled",m.filled)("p-inputtextarea-resizable",m.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),p})(),E=(()=>{class p{}return p.\u0275fac=function(i){return new(i||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[[s.ez]]}),p})()}}]);