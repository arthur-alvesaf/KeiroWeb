"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[189],{76:(R,S,i)=>{i.d(S,{S:()=>_});var t=i(1571),e=i(6895);function E(h,T){if(1&h&&(t.TgZ(0,"p",6),t._uU(1),t.qZA()),2&h){const m=t.oxw();t.xp6(1),t.Oqu(m.context)}}function p(h,T){1&h&&(t.TgZ(0,"p")(1,"strong"),t._uU(2,"This action cannot be undone."),t.qZA()())}let _=(()=>{class h{constructor(){this.modalHeader="Delete?",this.context="",this.confirmationPrompt="Are you sure you want to delete?",this.canUndo=!1,this.rejectButtonText="Cancel",this.confirmButtonIconClasses="fa fa-trash-alt",this.confirmButtonText="Delete",this.onConfirm=new t.vpe,this.onReject=new t.vpe}reject(){this.onReject.emit()}confirm(){this.onConfirm.emit()}}return h.\u0275fac=function(m){return new(m||h)},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-shared-confirmation"]],inputs:{modalHeader:"modalHeader",context:"context",confirmationPrompt:"confirmationPrompt",canUndo:"canUndo",rejectButtonText:"rejectButtonText",confirmButtonIconClasses:"confirmButtonIconClasses",confirmButtonText:"confirmButtonText"},outputs:{onConfirm:"onConfirm",onReject:"onReject"},decls:20,vars:7,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","text-center"],["class","my-3",4,"ngIf"],[1,"my-3"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",3,"ngClass"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"]],template:function(m,r){1&m&&(t.TgZ(0,"div",0)(1,"h4",1)(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"button",2),t.NdJ("click",function(){return r.reject()}),t.TgZ(5,"span",3),t._uU(6,"\xd7"),t.qZA()()(),t.TgZ(7,"div",4),t.YNc(8,E,2,1,"p",5),t.TgZ(9,"p",6),t._uU(10),t.qZA(),t.YNc(11,p,3,0,"p",7),t.qZA(),t.TgZ(12,"div",8)(13,"div",9)(14,"button",10),t.NdJ("click",function(){return r.confirm()}),t._UZ(15,"i",11),t._uU(16),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return r.reject()}),t._UZ(18,"i",13),t._uU(19),t.qZA()()()),2&m&&(t.xp6(3),t.Oqu(r.modalHeader),t.xp6(5),t.Q6J("ngIf",r.context),t.xp6(2),t.Oqu(r.confirmationPrompt),t.xp6(1),t.Q6J("ngIf",!r.canUndo),t.xp6(4),t.Q6J("ngClass",r.confirmButtonIconClasses),t.xp6(1),t.hij(" ",r.confirmButtonText," "),t.xp6(3),t.hij(" ",r.rejectButtonText," "))},dependencies:[e.mk,e.O5],encapsulation:2}),h})()},1892:(R,S,i)=>{i.d(S,{C:()=>E});var t=i(6895),e=i(1571);let E=(()=>{class p{}return p.\u0275fac=function(h){return new(h||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[t.ez]}),p})()},6433:(R,S,i)=>{i.d(S,{S:()=>ae});var t=i(5861),e=i(1571),E=i(433),p=i(727),_=i(9147),h=i(625),T=i(2733),m=i(3113),r=i(171),a=i(8283),u=i(8372),C=i(9649),U=i(4789),Z=i(793),N=i(805);const L=["searchInput"];function F(c,y){1&c&&(e.TgZ(0,"tr"),e._UZ(1,"th",11),e.TgZ(2,"th"),e._uU(3,"Name"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Position"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Property"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Nationality"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Email"),e.qZA()())}function P(c,y){if(1&c&&(e.TgZ(0,"tr",12)(1,"td"),e._UZ(2,"p-tableRadioButton"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&c){const n=y.$implicit;e.Q6J("pSelectableRow",n),e.xp6(4),e.AsE("",n.talentName.given," ",n.talentName.last,""),e.xp6(2),e.Oqu(n.position||""),e.xp6(2),e.Oqu(n.property||""),e.xp6(2),e.Oqu(n.nationality),e.xp6(2),e.Oqu(n.accountEmail)}}let k=(()=>{class c{constructor(n,l){this.talentsManagementApi=n,this.modalsController=l,this.searchInputControl=new E.p4,this.subscriptions=new p.w0,this.total=0,this.page=0,this.step=10,this.rows=[],this.loadingIndicator=!1,this.onSelectTalent=new e.vpe,this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,u.b)(350)).subscribe(v=>{this.searchInputControl.valid&&this.fetchTalentsWithSearch()}))}ngAfterViewInit(){this.input?.nativeElement.focus()}setPage(n){this.step=n.rows,this.page=Math.floor(n.first/n.rows),this.fetchTalentsWithSearch()}fetchTalentsWithSearch(){this.talentsManagementApi.findTalentsFilterSearch(this.step,this.page+1,this.searchInputControl.value).then(n=>{this.rows=n.talents,this.total=n.total})}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(C.C),e.Y36(T.l))},c.\u0275cmp=e.Xpm({type:c,selectors:[["keiro-talents-table"]],viewQuery:function(n,l){if(1&n&&e.Gf(L,5),2&n){let v;e.iGM(v=e.CRH())&&(l.input=v.first)}},outputs:{onSelectTalent:"onSelectTalent"},decls:15,vars:7,consts:[[1,"form-row","justify-content-end"],[1,"col","mb-1"],[1,"has-search"],[1,"fa","fa-search","has-search-icon"],["type","text","placeholder","Search by name, email, or Keiro ID",1,"form-control",3,"formControl"],["searchInput",""],["selectionMode","single","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","lazy","loading","paginator","rows","totalRecords","onLazyLoad","selectionChange"],["pTemplate","header"],["pTemplate","body"],["routerLink","/app/talent/create",1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-user-plus"],[2,"width","3rem"],[3,"pSelectableRow"]],template:function(n,l){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"span",3)(4,"input",4,5),e.qZA()()(),e.TgZ(6,"p-table",6),e.NdJ("onLazyLoad",function(I){return l.setPage(I)})("selectionChange",function(I){return l.onSelectTalent.emit(I)}),e.YNc(7,F,12,0,"ng-template",7),e.YNc(8,P,13,7,"ng-template",8),e.qZA(),e.TgZ(9,"p"),e._uU(10," Is the Talent you're looking for not in the list?"),e._UZ(11,"br"),e.TgZ(12,"a",9),e.NdJ("click",function(){return l.modalsController.closeAllModals()}),e._UZ(13,"i",10),e._uU(14," Click here to create a new Talent profile "),e.qZA()()),2&n&&(e.xp6(4),e.Q6J("formControl",l.searchInputControl),e.xp6(2),e.Q6J("value",l.rows)("lazy",!0)("loading",l.loadingIndicator)("paginator",!0)("rows",l.step)("totalRecords",l.total))},dependencies:[U.yS,E.Fj,E.JJ,E.oH,Z.iA,N.jx,Z.Ei,Z.GE],styles:[".has-search[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%] > .has-search-icon[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}"]}),c})();var w=i(6895),K=i(2210),V=i(585),Q=i(5593),W=i(1740),J=i(3054),B=i(1507),Y=i(2962);function H(c,y){1&c&&(e.TgZ(0,"span"),e._uU(1,"Assign talent to job"),e.qZA())}function f(c,y){1&c&&e._uU(0,"Edit employment information")}function M(c,y){if(1&c){const n=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(n);const v=e.oxw(2),I=e.MAs(35);return e.KtG(v.modalsControllerService.openModal(I,{class:"modal-lg"}))}),e._uU(1," Choose Talent "),e.qZA()}}function o(c,y){if(1&c){const n=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(n);const v=e.oxw(3);return e.KtG(v.clearTalentFromForm())}),e.qZA()}}function g(c,y){if(1&c&&(e.TgZ(0,"div",28),e._UZ(1,"input",29),e.YNc(2,o,1,0,"button",30),e.qZA()),2&c){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",!0)("value",(null==n.currentlySelectedTalent||null==n.currentlySelectedTalent.talentName?null:n.currentlySelectedTalent.talentName.given)+" "+(null==n.currentlySelectedTalent||null==n.currentlySelectedTalent.talentName?null:n.currentlySelectedTalent.talentName.last)),e.xp6(1),e.Q6J("ngIf",n.addingEmployment)}}const b=function(c){return["/app/talent/view/",c]};function s(c,y){if(1&c){const n=e.EpF();e.TgZ(0,"div",32),e._uU(1," This talent has history, "),e.TgZ(2,"a",33),e.NdJ("click",function(){e.CHM(n);const v=e.oxw(2);return e.KtG(v.modalsControllerService.closeUpperModal())}),e._uU(3,"click here to view profile"),e.qZA()()}if(2&c){const n=e.oxw(2);e.xp6(2),e.Q6J("routerLink",e.VKq(1,b,null==n.currentlySelectedTalent?null:n.currentlySelectedTalent.talentId))}}function A(c,y){1&c&&(e.TgZ(0,"div",34),e._uU(1," This job coincides with the last previously known work information for this talent. "),e._UZ(2,"br"),e._uU(3,"We have autocompleted the date for you. "),e.qZA())}const d=function(c){return["/","app","talent","view",c]};function x(c,y){if(1&c&&(e.TgZ(0,"div",32),e._uU(1," This job "),e.TgZ(2,"strong"),e._uU(3,"does not"),e.qZA(),e._uU(4," coincide with the last previously known work information for this talent. "),e._UZ(5,"br"),e._uU(6,"Please validate if this information is correct before proceeding. "),e.TgZ(7,"a",35),e._UZ(8,"i",36),e._uU(9,"View talent in new tab "),e.qZA()()),2&c){const n=e.oxw(2);e.xp6(7),e.Q6J("routerLink",e.VKq(1,d,null==n.currentlySelectedTalent?null:n.currentlySelectedTalent.talentId))}}function O(c,y){if(1&c&&(e.TgZ(0,"div",19)(1,"h6",7),e._uU(2,"End Date"),e.qZA(),e.TgZ(3,"div",20),e._UZ(4,"p-calendar",37),e.qZA()()),2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("showIcon",!0)("minDate",(null==n.existing?null:n.existing.from)||n.today)("maxDate",n.today)}}function j(c,y){if(1&c&&(e.TgZ(0,"div",40)(1,"span"),e._uU(2),e.qZA()()),2&c){const n=y.$implicit;e.xp6(2),e.Oqu(n.label)}}function q(c,y){if(1&c&&(e.TgZ(0,"div",19)(1,"h6",7),e._uU(2,"End Reason"),e.qZA(),e.TgZ(3,"div",20)(4,"p-dropdown",38),e.YNc(5,j,3,1,"ng-template",39),e.qZA()()()),2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("options",n.endStatusOptions)("autoDisplayFirst",!1)("group",!0)}}function z(c,y){1&c&&(e.TgZ(0,"div",19)(1,"h6",7),e._uU(2,"Notes"),e.qZA(),e.TgZ(3,"div",20),e._UZ(4,"textarea",41),e.qZA()())}function G(c,y){if(1&c&&(e.TgZ(0,"form",18)(1,"div",19)(2,"h6",7),e._uU(3,"Talent"),e.qZA(),e.TgZ(4,"div",20),e.YNc(5,M,2,0,"button",21),e.YNc(6,g,3,3,"div",22),e.qZA(),e.YNc(7,s,4,3,"div",23),e.qZA(),e.TgZ(8,"div",19)(9,"h6",7),e._uU(10,"Start Date"),e.qZA(),e.TgZ(11,"div",20),e._UZ(12,"p-calendar",24),e.qZA(),e.YNc(13,A,4,0,"div",25),e.YNc(14,x,10,3,"div",23),e.qZA(),e.YNc(15,O,5,3,"div",26),e.YNc(16,q,6,3,"div",26),e.YNc(17,z,5,0,"div",26),e.qZA()),2&c){const n=e.oxw();e.Q6J("formGroup",n.createEmploymentForm),e.xp6(5),e.Q6J("ngIf",!n.talentIsSelected),e.xp6(1),e.Q6J("ngIf",n.talentIsSelected),e.xp6(1),e.Q6J("ngIf",n.currentlySelectedTalent&&n.warnAboutSelectedTalent),e.xp6(5),e.Q6J("showIcon",!0)("maxDate",n.today),e.xp6(1),e.Q6J("ngIf",n.selectedTalentOnTrack),e.xp6(1),e.Q6J("ngIf",n.selectedTalentNotOnTrack),e.xp6(1),e.Q6J("ngIf",n.editingEndedEmployment),e.xp6(1),e.Q6J("ngIf",n.editingEndedEmployment),e.xp6(1),e.Q6J("ngIf",n.editingEndedEmployment)}}function $(c,y){1&c&&e._UZ(0,"app-shared-icon-tooltip",46)}function X(c,y){if(1&c){const n=e.EpF();e.TgZ(0,"keiro-account-form",47),e.NdJ("statusChanges",function(v){e.CHM(n);const I=e.oxw(2);return e.KtG(I.formStatusChange(v))})("valueChanges",function(v){e.CHM(n);const I=e.oxw(2);return e.KtG(I.formValueChange(v))}),e.qZA()}if(2&c){const n=e.oxw(2);e.Q6J("initialValue",null==n.selectedTalent?null:n.selectedTalent.account)("canCreateRoles",n.canCreateRoles)}}function ee(c,y){if(1&c&&(e.TgZ(0,"div")(1,"div",42)(2,"div",48)(3,"h6"),e._uU(4,"Login email address"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA()(),e.TgZ(7,"div",48)(8,"h6"),e._uU(9,"Keiro access level"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"roleName"),e.qZA()()()()),2&c){const n=e.oxw(2);e.xp6(6),e.hij(" ",null==n.selectedTalent||null==n.selectedTalent.account?null:n.selectedTalent.account.email," "),e.xp6(5),e.Oqu(e.lcZ(12,2,null==n.selectedTalent||null==n.selectedTalent.account?null:n.selectedTalent.account.role))}}function te(c,y){if(1&c&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"div",42)(3,"h5",43),e._uU(4,"Account info"),e.qZA(),e.YNc(5,$,1,0,"app-shared-icon-tooltip",44),e.qZA(),e.TgZ(6,"div"),e.YNc(7,X,1,2,"keiro-account-form",45),e.YNc(8,ee,13,4,"div",10),e.qZA()()),2&c){const n=e.oxw();e.xp6(5),e.Q6J("ngIf",n.canEditAccount),e.xp6(2),e.Q6J("ngIf",n.canEditAccount),e.xp6(1),e.Q6J("ngIf",!n.canEditAccount)}}function ne(c,y){1&c&&(e.TgZ(0,"span"),e._UZ(1,"i",49),e._uU(2," Assign talent "),e.qZA())}function ie(c,y){1&c&&(e._UZ(0,"i",50),e._uU(1," Edit employment "))}function oe(c,y){if(1&c){const n=e.EpF();e.TgZ(0,"div",0)(1,"h4",1)(2,"span"),e._uU(3,"Talent Search"),e.qZA()(),e.TgZ(4,"button",4),e.NdJ("click",function(){e.CHM(n);const v=e.oxw();return e.KtG(v.modalsControllerService.closeUpperModal())}),e.TgZ(5,"span",5),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",6)(8,"keiro-talents-table",51),e.NdJ("onSelectTalent",function(v){e.CHM(n);const I=e.oxw();return e.KtG(I.selectTalent(v))}),e.qZA()(),e.TgZ(9,"div",11)(10,"div",12)(11,"button",52),e.NdJ("click",function(){e.CHM(n);const v=e.oxw();return v.clearTalentFromForm(),e.KtG(v.modalsControllerService.closeUpperModal())}),e._UZ(12,"i",14),e._uU(13," Cancel "),e.qZA(),e.TgZ(14,"button",53),e.NdJ("click",function(){e.CHM(n);const v=e.oxw();return e.KtG(v.modalsControllerService.closeUpperModal())}),e._UZ(15,"i",54),e._uU(16," Select "),e.qZA()()()}}let ae=(()=>{class c{constructor(n,l,v,I,se,le){this.fb=n,this.modalsControllerService=l,this.employmentServiceApi=v,this.roleNamePipe=I,this.authStateService=se,this.accountServiceApi=le,this.addingEmployment=!0,this.editingEndedEmployment=!1,this.selectedTalentOnTrack=!1,this.selectedTalentNotOnTrack=!1,this.onSumbit=new e.vpe,this.onCloseModal=new e.vpe,this.talentHasAccount=!1,this.canEditAccount=!1,this.formValid=!1,this.onlyRoleChange=!1,this.processing=!1,this.warnAboutSelectedTalent=!1,this.endStatusOptions=[{label:"Change of job",items:[_.Vg.CHANGE_PROMOTION,_.Vg.CHANGE_LATERAL_MOVEMENT,_.Vg.CHANGE_TRANSFER_SAME_POSITION,_.Vg.CHANGE_TRANSFER_PROMOTION].map(D=>({label:_.ub.statusNameMap.get(D),value:D}))},{label:"Voluntary dismissals",items:[_.Vg.DISMISSAL_VOLUNTARY_ABSENTEEISM,_.Vg.DISMISSAL_VOLUNTARY_ABANDONMENT,_.Vg.DISMISSAL_VOLUNTARY_RETIREMENT,_.Vg.DISMISSAL_VOLUNTARY_BETTER_OFFER,_.Vg.DISMISSAL_VOLUNTARY_PERSONAL].map(D=>({label:_.ub.statusNameMap.get(D),value:D}))},{label:"Forced dismissals",items:[_.Vg.DISMISSAL_FORCED_END_OF_CONTRACT,_.Vg.DISMISSAL_FORCED_DISEASE,_.Vg.DISMISSAL_FORCED_DEATH,_.Vg.DISMISSAL_FORCED_LOW_PERFORMANCE,_.Vg.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,_.Vg.DISMISSAL_FORCED_OTHERS].map(D=>({label:_.ub.statusNameMap.get(D),value:D}))}],this.today=new Date,this.subscriptions=new p.w0,this.subscriptions.add(this.authStateService.authState.subscribe(D=>{this.currentUserIdentity=D.identity}))}ngOnInit(){if(void 0!==this.existing){this.currentlySelectedTalent={talentName:this.existing?.talent.name},this.addingEmployment=!1,this.addingEmployment=!1;let n={talent:[this.existing?.talent._id||null,E.kI.required],startDate:[this.existing?.from,E.kI.required]};this.existing?.until&&(this.editingEndedEmployment=!0,Object.assign(n,{endDate:[this.existing?.until,E.kI.required]},{endReason:[this.existing?.status,E.kI.required]},{notes:[this.existing?.notes]})),this.createEmploymentForm=this.fb.group(n)}else this.createEmploymentForm=this.fb.group({talent:[null,E.kI.required],startDate:[null,E.kI.required]})}ngOnDestroy(){this.subscriptions.unsubscribe()}get talentIsSelected(){return this.createEmploymentForm?.get("talent")?.value||!1}selectTalent(n){var l=this;return(0,t.Z)(function*(){if(l.warnAboutSelectedTalent=!1,l.currentlySelectedTalent=n,l.selectedTalentOnTrack=!1,l.selectedTalentNotOnTrack=!1,n){if(l.createEmploymentForm?.get("talent")?.setValue(n.talentId),n.positionId==l.forJob?.position._id&&n.propertyId==l.forJob?.property._id&&n.legacyStartDate?(l.createEmploymentForm?.get("startDate")?.setValue(new Date(n.legacyStartDate)),l.createEmploymentForm?.get("startDate")?.markAsDirty(),l.selectedTalentOnTrack=!0):l.selectedTalentNotOnTrack=!0,l.employmentServiceApi.getEmploymentsForTalent(n.talentId).then(v=>{l.warnAboutSelectedTalent=v.some(I=>_.ub.forcedDismissalReasons.includes(I.status))}),n.accountId){let v=(yield l.accountServiceApi.getAccount(n.accountId)).account;l.selectedTalent={_id:n.talentId,account:v}}l.manageAccountActions()}else l.createEmploymentForm?.get("talent")?.setValue(null)})()}clearTalentFromForm(){this.warnAboutSelectedTalent=!1,this.createEmploymentForm?.get("talent")?.setValue(null),this.selectedTalentOnTrack=!1,this.selectedTalentNotOnTrack=!1,this.talentHasAccount=!1,this.selectedTalent=void 0,this.currentlySelectedTalent?.positionId==this.forJob?.position._id&&this.currentlySelectedTalent?.propertyId==this.forJob?.property._id&&(this.createEmploymentForm?.get("startDate")?.setValue(null),this.createEmploymentForm?.get("startDate")?.markAsPristine()),this.currentlySelectedTalent=void 0}getFormValue(){let n={employment:{talentId:this.createEmploymentForm?.value.talent,startDate:this.createEmploymentForm?.value.startDate,...this.createEmploymentForm?.value.endDate?{endDate:this.createEmploymentForm?.value.endDate}:{},...this.createEmploymentForm?.value.endReason?{endReason:this.createEmploymentForm?.value.endReason}:{},...this.createEmploymentForm?.value.notes?{notes:this.createEmploymentForm?.value.notes}:{notes:null}}};if(this.talentHasAccount){let l={};this.formValue&&(this.selectedTalent?.account?.email!==this.formValue.email&&(l.email=this.formValue.email),this.selectedTalent?.account?.role!==this.formValue.role&&(l.role=this.formValue.role),l.changeAcc=!(!l?.email&&!l?.role)),n.account=l,n.accountId=this.selectedTalent?.account?._id}return n}formStatusChange(n){this.formValid="VALID"===n}formValueChange(n){this.onlyRoleChange=this.selectedTalent?.account?.email===n.email&&this.selectedTalent?.account?.role!=n.role,this.formValue=n}getRoleOptions(){return Object.values(h.u).filter(n=>n!=h.u.SUPER_ADMIN).map(n=>({name:this.roleNamePipe.transform(n),value:n}))}manageAccountActions(){switch(this.talentHasAccount=!!this.selectedTalent?.account,this.currentUserIdentity?.role){case h.u.SUPER_ADMIN:case h.u.ADMIN:this.canCreateRoles=[h.u.ADMIN,h.u.MANAGER,h.u.EMPLOYEE],this.canEditAccount=!0;break;case h.u.MANAGER:this.canEditAccount=!0,this.selectedTalent?.account&&(this.canCreateRoles=[this.selectedTalent.account.role])}this.currentUserIdentity?.talent?._id===this.selectedTalent?._id&&(this.canEditAccount=!1)}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(E.QS),e.Y36(T.l),e.Y36(_.Ib),e.Y36(m.p),e.Y36(r.V),e.Y36(a.B))},c.\u0275cmp=e.Xpm({type:c,selectors:[["team-add-edit-employment-modal"]],inputs:{existing:"existing",forJob:"forJob"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal"},decls:36,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],[4,"ngIf","ngIfElse"],["editEmploymentModalTitle",""],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-0"],[1,"mb-2"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["editEmploymentButtonContent",""],["talentSelectorModal",""],[3,"formGroup"],[1,"my-2"],[1,"p-fluid"],["pButton","",3,"click",4,"ngIf"],["class","p-inputgroup",4,"ngIf"],["class","mt-1 alert alert-warning","role","alert",4,"ngIf"],["formControlName","startDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","maxDate"],["class","mt-1 alert alert-info","role","alert",4,"ngIf"],["class","my-2",4,"ngIf"],["pButton","",3,"click"],[1,"p-inputgroup"],["type","text","pInputText","",3,"disabled","value"],["type","button","pButton","","icon","pi pi-times","label","Clear","class","p-button-danger",3,"click",4,"ngIf"],["type","button","pButton","","icon","pi pi-times","label","Clear",1,"p-button-danger",3,"click"],["role","alert",1,"mt-1","alert","alert-warning"],[3,"routerLink","click"],["role","alert",1,"mt-1","alert","alert-info"],["target","_blank",1,"btn","btn-link","btn-sm",3,"routerLink"],["aria-hidden","true",1,"fa","fa-eye","mr-1"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","minDate","maxDate"],["formControlName","endReason",3,"options","autoDisplayFirst","group"],["pTemplate","group"],[1,"flex","align-items-center"],["pInputTextarea","","formControlName","notes"],[1,"row"],[1,"col-auto"],["accentLevel","warning","iconClasses","fa fa-door-open","tooltipMessage","When you change a talent's email, they are required to register again with their new email address. Their current password will be reset.",4,"ngIf"],[3,"initialValue","canCreateRoles","statusChanges","valueChanges",4,"ngIf"],["accentLevel","warning","iconClasses","fa fa-door-open","tooltipMessage","When you change a talent's email, they are required to register again with their new email address. Their current password will be reset."],[3,"initialValue","canCreateRoles","statusChanges","valueChanges"],[1,"col-12","col-md-6"],["aria-hidden","true",1,"fa","fa-briefcase"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[3,"onSelectTalent"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-check-circle"]],template:function(n,l){if(1&n&&(e.TgZ(0,"div",0)(1,"h4",1),e.YNc(2,H,2,0,"span",2),e.YNc(3,f,1,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(I){return l.onCloseModal.emit(I)}),e.TgZ(6,"span",5),e._uU(7,"\xd7"),e.qZA()()(),e.TgZ(8,"div",6)(9,"div")(10,"h5"),e._uU(11,"Job:"),e.qZA(),e.TgZ(12,"h6",7),e._uU(13),e.qZA(),e.TgZ(14,"h6",8)(15,"small"),e._uU(16),e._UZ(17,"br"),e._uU(18),e.qZA()(),e.TgZ(19,"h6"),e._uU(20),e.qZA()(),e._UZ(21,"hr"),e.TgZ(22,"div"),e.YNc(23,G,18,11,"form",9),e.qZA(),e.YNc(24,te,9,3,"div",10),e.qZA(),e.TgZ(25,"div",11)(26,"div",12)(27,"button",13),e.NdJ("click",function(I){return l.onCloseModal.emit(I)}),e._UZ(28,"i",14),e._uU(29," Cancel "),e.qZA(),e.TgZ(30,"button",15),e.NdJ("click",function(){return l.onSumbit.emit(l.getFormValue())}),e.YNc(31,ne,3,0,"span",2),e.YNc(32,ie,2,0,"ng-template",null,16,e.W1O),e.qZA()()(),e.YNc(34,oe,17,0,"ng-template",null,17,e.W1O)),2&n){const v=e.MAs(4),I=e.MAs(33);e.xp6(2),e.Q6J("ngIf",l.addingEmployment)("ngIfElse",v),e.xp6(11),e.Oqu(null==l.forJob||null==l.forJob.position?null:l.forJob.position.name),e.xp6(3),e.hij(" ",null==l.forJob||null==l.forJob.position?null:l.forJob.position.area,""),e.xp6(2),e.hij(" ",null==l.forJob||null==l.forJob.position?null:l.forJob.position.department," "),e.xp6(2),e.Oqu(null==l.forJob||null==l.forJob.property?null:l.forJob.property.name),e.xp6(3),e.Q6J("ngIf",l.createEmploymentForm),e.xp6(1),e.Q6J("ngIf",l.talentHasAccount),e.xp6(6),e.Q6J("disabled",l.processing||(null==l.createEmploymentForm?null:l.createEmploymentForm.pristine)||(null==l.createEmploymentForm?null:l.createEmploymentForm.invalid)),e.xp6(1),e.Q6J("ngIf",l.addingEmployment)("ngIfElse",I)}},dependencies:[k,w.O5,U.yS,E._Y,E.Fj,E.JJ,E.JL,E.sg,E.u,K.Lt,N.jx,V.f,Q.Hq,W.o,J.g,B.g,Y.s,m.p]}),c})()},5609:(R,S,i)=>{i.d(S,{Z:()=>b});var t=i(6895),e=i(433),E=i(4789),p=i(585),_=i(2210),h=i(1740),T=i(3054),m=i(1571),r=i(1795);let J=(()=>{class s{}return s.\u0275fac=function(d){return new(d||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[t.ez,r.T]}),s})();var B=i(7913),Y=i(5973),H=i(3113),f=i(2342),M=i(793);let o=(()=>{class s{}return s.\u0275fac=function(d){return new(d||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({imports:[t.ez,E.Bz,e.UX,M.U$]}),s})();var g=i(3345);let b=(()=>{class s{}return s.\u0275fac=function(d){return new(d||s)},s.\u0275mod=m.oAB({type:s}),s.\u0275inj=m.cJS({providers:[H.p],imports:[o,t.ez,E.Bz,e.UX,e.u5,_.kW,p._8,h.j,T.A,J,B.Iu,f.M,Y.s,g.k]}),s})()},7182:(R,S,i)=>{i.d(S,{Q:()=>H});var t=i(1571),e=i(433),E=i(727),p=i(9147),_=i(625),h=i(527),T=i(3113),m=i(171),r=i(6895),a=i(2210),u=i(805),C=i(585),U=i(3054),Z=i(1507),N=i(2962);function L(f,M){1&f&&(t.TgZ(0,"div",16),t._UZ(1,"i",17),t._uU(2,"You cannot end this employment "),t.qZA())}function F(f,M){if(1&f&&(t.TgZ(0,"div",24)(1,"span"),t._uU(2),t.qZA()()),2&f){const o=M.$implicit;t.xp6(2),t.Oqu(o.label)}}function P(f,M){if(1&f&&(t.TgZ(0,"form",18)(1,"div",5)(2,"h6",6),t._uU(3,"Ended at:"),t.qZA(),t.TgZ(4,"div",19),t._UZ(5,"p-calendar",20),t.qZA()(),t.TgZ(6,"div",5)(7,"h6",6),t._uU(8,"End with status:"),t.qZA(),t.TgZ(9,"div",19)(10,"p-dropdown",21),t.YNc(11,F,3,1,"ng-template",22),t.qZA()()(),t.TgZ(12,"div",5)(13,"h6",6),t._uU(14,"Additional notes:"),t.qZA(),t.TgZ(15,"div",19),t._UZ(16,"textarea",23),t.qZA()()()),2&f){const o=t.oxw();t.Q6J("formGroup",o.editEmploymentForm),t.xp6(5),t.Q6J("showIcon",!0)("maxDate",o.today)("minDate",(null==o.employment?null:o.employment.from)||o.today),t.xp6(5),t.Q6J("options",o.endStatusOptions)("autoDisplayFirst",!1)("group",!0)}}function k(f,M){1&f&&t._UZ(0,"app-shared-icon-tooltip",28)}function w(f,M){if(1&f&&(t.TgZ(0,"div")(1,"div",25)(2,"div",29)(3,"h6"),t._uU(4,"Login email address"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"div",29)(8,"h6"),t._uU(9,"Keiro access level"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"roleName"),t.qZA()()()()),2&f){const o=t.oxw(2);t.xp6(6),t.hij(" ",null==o.employment||null==o.employment.talent||null==o.employment.talent.account?null:o.employment.talent.account.email," "),t.xp6(5),t.Oqu(t.lcZ(12,2,null==o.employment||null==o.employment.talent||null==o.employment.talent.account?null:o.employment.talent.account.role))}}function K(f,M){if(1&f){const o=t.EpF();t.TgZ(0,"div")(1,"keiro-account-form",31),t.NdJ("statusChanges",function(b){t.CHM(o);const s=t.oxw(3);return t.KtG(s.formStatusChange(b))})("valueChanges",function(b){t.CHM(o);const s=t.oxw(3);return t.KtG(s.formValueChange(b))}),t.qZA()()}if(2&f){const o=t.oxw(3);t.xp6(1),t.Q6J("initialValue",null==o.employment||null==o.employment.talent?null:o.employment.talent.account)("canCreateRoles",o.canCreateRoles)}}const V=function(f,M){return{"btn-primary":f,"btn-outline-primary":M}},Q=function(f,M){return{"btn-danger":f,"btn-outline-danger":M}};function W(f,M){if(1&f){const o=t.EpF();t.TgZ(0,"div",32)(1,"button",33),t.NdJ("click",function(){t.CHM(o);const b=t.oxw(3);return t.KtG(b.toggleRevoke(!1))}),t._UZ(2,"i",34),t._uU(3," Keep account "),t.qZA(),t.TgZ(4,"button",33),t.NdJ("click",function(){t.CHM(o);const b=t.oxw(3);return t.KtG(b.toggleRevoke(!0))}),t._UZ(5,"i",35),t._uU(6," Revoke account "),t.qZA()()}if(2&f){const o=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.WLB(2,V,!o.currentRevoke,o.currentRevoke)),t.xp6(3),t.Q6J("ngClass",t.WLB(5,Q,o.currentRevoke,!o.currentRevoke))}}function J(f,M){if(1&f&&(t.TgZ(0,"div"),t.YNc(1,K,2,2,"div",9),t.YNc(2,W,7,8,"div",30),t.qZA()),2&f){const o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!o.showAccInfo),t.xp6(1),t.Q6J("ngIf",o.canEditAccount)}}function B(f,M){1&f&&(t.TgZ(0,"div",16),t._UZ(1,"i",36),t._uU(2,"The account for this talent will be revoked "),t.qZA())}function Y(f,M){if(1&f&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",25)(3,"h5",26),t._uU(4,"Account info"),t.qZA(),t.YNc(5,k,1,0,"app-shared-icon-tooltip",27),t.qZA(),t.YNc(6,w,13,4,"div",9),t.YNc(7,J,3,2,"div",9),t.YNc(8,B,3,0,"div",7),t.qZA()),2&f){const o=t.oxw();t.xp6(5),t.Q6J("ngIf",!o.showAccInfo),t.xp6(1),t.Q6J("ngIf",o.showAccInfo),t.xp6(1),t.Q6J("ngIf",o.currentStatus!==(null==o.employment?null:o.employment.status)&&!o.isEmploymentEnding),t.xp6(1),t.Q6J("ngIf",o.isEmploymentEnding&&(null==o.editEmploymentForm?null:o.editEmploymentForm.dirty)&&o.canEditAccount)}}let H=(()=>{class f{constructor(o,g,b){this.fb=o,this.roleNamePipe=g,this.authStateService=b,this.onSumbit=new t.vpe,this.onCloseModal=new t.vpe,this.currentStatus=p.Vg.ACTIVE,this.showAccInfo=!0,this.isEmploymentEnding=!1,this.talentHasAccount=!1,this.canEditAccount=!1,this.formValid=!1,this.onlyRoleChange=!1,this._currentRevoke=!1,this.subscriptions=new E.w0,this.processing=!1,this.endStatusOptions=[{label:"Change of job",items:[p.Vg.CHANGE_PROMOTION,p.Vg.CHANGE_LATERAL_MOVEMENT,p.Vg.CHANGE_TRANSFER_SAME_POSITION,p.Vg.CHANGE_TRANSFER_PROMOTION].map(s=>({label:p.ub.statusNameMap.get(s),value:s}))},{label:"Voluntary dismissals",items:[p.Vg.DISMISSAL_VOLUNTARY_ABSENTEEISM,p.Vg.DISMISSAL_VOLUNTARY_ABANDONMENT,p.Vg.DISMISSAL_VOLUNTARY_RETIREMENT,p.Vg.DISMISSAL_VOLUNTARY_BETTER_OFFER,p.Vg.DISMISSAL_VOLUNTARY_PERSONAL].map(s=>({label:p.ub.statusNameMap.get(s),value:s}))},{label:"Forced dismissals",items:[p.Vg.DISMISSAL_FORCED_END_OF_CONTRACT,p.Vg.DISMISSAL_FORCED_DISEASE,p.Vg.DISMISSAL_FORCED_DEATH,p.Vg.DISMISSAL_FORCED_LOW_PERFORMANCE,p.Vg.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,p.Vg.DISMISSAL_FORCED_OTHERS].map(s=>({label:p.ub.statusNameMap.get(s),value:s}))}],this.today=new Date,this.subscriptions.add(this.authStateService.authState.subscribe(s=>{this.currentUserIdentity=s.identity}))}set currentRevoke(o){this._currentRevoke=this.canEditAccount?o:this.currentRevoke,this.showAccInfo=this.isEmploymentEnding&&this.canEditAccount?this.isEmploymentEnding:this.currentRevoke,this.formValue=void 0}get currentRevoke(){return this._currentRevoke}formStatusChange(o){this.formValid="VALID"===o}formValueChange(o){this.onlyRoleChange=this.employment?.talent.account?.email===o.email&&this.employment?.talent.account?.role!=o.role,this.formValue=o}ngOnInit(){switch(this.editEmploymentForm=this.fb.group({newStatus:[p.Vg.ACTIVE,[h.d.valueInArray([...p.ub.changesReasons,...p.ub.allDismissalReasons]),e.kI.required]],endDate:[null,e.kI.required],notes:[null]}),this.talentHasAccount=!!this.employment?.talent.account,this.currentStatus=this.employment?.status?this.employment?.status:p.Vg.ACTIVE,this.currentUserIdentity?.role){case _.u.SUPER_ADMIN:case _.u.ADMIN:this.canCreateRoles=[_.u.ADMIN,_.u.MANAGER,_.u.EMPLOYEE],this.canEditAccount=!0;break;case _.u.MANAGER:this.canEditAccount=!0,this.employment?.talent?.account?.role===_.u.ADMIN&&(this.canEditAccount=!1),this.employment?.talent.account&&(this.canCreateRoles=[this.employment?.talent.account.role]);break;case _.u.EMPLOYEE:(this.employment?.talent?.account?.role===_.u.ADMIN||this.employment?.talent?.account?.role===_.u.MANAGER)&&(this.canEditAccount=!1)}this.currentUserIdentity?.talent?._id===this.employment?.talent?._id&&(this.canEditAccount=!1),this.onChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}onChanges(){this.editEmploymentForm?.valueChanges.subscribe(o=>{this.currentStatus=o.newStatus,this.isEmploymentEnding=p.ub.allDismissalReasons.includes(o.newStatus),this.currentStatus!==this.employment?.status&&this.canEditAccount&&(this.showAccInfo=this.isEmploymentEnding?this.isEmploymentEnding:this.currentRevoke)})}toggleRevoke(o){this.currentRevoke=o}getRoleOptions(){return Object.values(_.u).filter(o=>o!=_.u.SUPER_ADMIN).map(o=>({name:this.roleNamePipe.transform(o),value:o}))}canEndEmployment(){const o=this.talentHasAccount&&!this.canEditAccount;return o&&!1===this.editEmploymentForm?.disabled&&this.editEmploymentForm?.disable(),!o}getFormValue(){let o={employment:{newStatus:this.editEmploymentForm?.value.newStatus,until:this.editEmploymentForm?.value.endDate,...this.editEmploymentForm?.value.notes?{notes:this.editEmploymentForm?.value.notes}:{}}};if(this.talentHasAccount){let g={},b=this.isEmploymentEnding&&this.canEditAccount?this.isEmploymentEnding:this.currentRevoke;this.formValue&&!b&&(this.employment?.talent?.account?.email!==this.formValue.email&&(g.email=this.formValue.email),this.employment?.talent?.account?.role!==this.formValue.role&&(g.role=this.formValue.role),g.changeAcc=!(!g?.email&&!g?.role||b)),b&&(g.revokeAcc={talentId:this.employment.talent._id,email:this.employment.talent.account.email}),o.account=g,o.accountId=this.employment.talent.account._id}return o}}return f.\u0275fac=function(o){return new(o||f)(t.Y36(e.QS),t.Y36(T.p),t.Y36(m.V))},f.\u0275cmp=t.Xpm({type:f,selectors:[["team-end-employment-modal"]],inputs:{job:"job",employment:"employment"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal"},decls:32,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"my-2"],[1,"mb-0"],["class","mt-1 alert alert-warning","role","alert",4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-save"],["role","alert",1,"mt-1","alert","alert-warning"],["aria-hidden","true",1,"fa","fa-exclamation-triangle","mr-1"],[3,"formGroup"],[1,"p-fluid"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","maxDate","minDate"],["formControlName","newStatus",3,"options","autoDisplayFirst","group"],["pTemplate","group"],["pInputTextarea","","formControlName","notes"],[1,"flex","align-items-center"],[1,"row"],[1,"col-auto"],["accentLevel","warning","iconClasses","fa fa-door-open","tooltipMessage","When you change a talent's email, they are required to register again with their new email address. Their current password will be reset.",4,"ngIf"],["accentLevel","warning","iconClasses","fa fa-door-open","tooltipMessage","When you change a talent's email, they are required to register again with their new email address. Their current password will be reset."],[1,"col-12","col-md-6"],["class","btn-group","role","group","aria-label","Toggle revoke",4,"ngIf"],[3,"initialValue","canCreateRoles","statusChanges","valueChanges"],["role","group","aria-label","Toggle revoke",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],["aria-hidden","true",1,"fa","fa-door-open"],["aria-hidden","true",1,"fa","fa-door-closed"],["aria-hidden","true",1,"fa","fa-door-closed","mr-1"]],template:function(o,g){1&o&&(t.TgZ(0,"div",0)(1,"h4",1)(2,"span"),t._uU(3,"End employment"),t.qZA()(),t.TgZ(4,"button",2),t.NdJ("click",function(s){return g.onCloseModal.emit(s)}),t.TgZ(5,"span",3),t._uU(6,"\xd7"),t.qZA()()(),t.TgZ(7,"div",4)(8,"h5",5),t._uU(9),t.qZA(),t.TgZ(10,"div",5)(11,"h6",6),t._uU(12,"Job title:"),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"div",5)(16,"h6",6),t._uU(17,"Started at:"),t.qZA(),t.TgZ(18,"span"),t._uU(19),t.ALo(20,"date"),t.qZA()(),t.YNc(21,L,3,0,"div",7),t.YNc(22,P,17,7,"form",8),t.YNc(23,Y,9,4,"div",9),t.qZA(),t.TgZ(24,"div",10)(25,"div",11)(26,"button",12),t.NdJ("click",function(s){return g.onCloseModal.emit(s)}),t._UZ(27,"i",13),t._uU(28," Cancel "),t.qZA(),t.TgZ(29,"button",14),t.NdJ("click",function(){return g.onSumbit.emit(g.getFormValue())}),t._UZ(30,"i",15),t._uU(31," End employment "),t.qZA()()()),2&o&&(t.xp6(9),t.AsE("",null==g.employment||null==g.employment.talent||null==g.employment.talent.name?null:g.employment.talent.name.given," ",null==g.employment||null==g.employment.talent||null==g.employment.talent.name?null:g.employment.talent.name.last,""),t.xp6(5),t.Oqu(null==g.job||null==g.job.position?null:g.job.position.name),t.xp6(5),t.Oqu(t.xi3(20,8,null==g.employment?null:g.employment.from,"dd MMM yyyy")),t.xp6(2),t.Q6J("ngIf",!g.canEndEmployment()),t.xp6(1),t.Q6J("ngIf",g.editEmploymentForm),t.xp6(1),t.Q6J("ngIf",g.talentHasAccount),t.xp6(6),t.Q6J("disabled",g.processing||(null==g.editEmploymentForm?null:g.editEmploymentForm.pristine)||(null==g.editEmploymentForm?null:g.editEmploymentForm.invalid)))},dependencies:[r.mk,r.O5,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,a.Lt,u.jx,C.f,U.g,Z.g,N.s,r.uU,T.p]}),f})()},8283:(R,S,i)=>{i.d(S,{B:()=>h});var t=i(3905),e=i(4004),E=i(2340),p=i(1571),_=i(529);let h=(()=>{class T{constructor(r){this.http=r,this.serverUrl=E.N.v2apiServer}listAccounts(r,a,u,C){return(0,t.z)(this.http.post(this.serverUrl+"account/list",C,{params:{...r?{search:r}:{},...u?{page:u}:{},...a?{count:a}:{}}}).pipe(U=>U))}sendRegistrationReminder(r){return(0,t.z)(this.http.post(this.serverUrl+"account/remind-registration/"+r,{}).pipe((0,e.U)(a=>({account:a}))))}editAccount(r,a,u){return(0,t.z)(this.http.put(this.serverUrl+"account/"+r,{...a?{email:a}:{},...u?{role:u}:{}}).pipe((0,e.U)(C=>({account:C}))))}getAccount(r){return(0,t.z)(this.http.get(this.serverUrl+"account/"+r).pipe((0,e.U)(a=>({account:a}))))}}return T.\u0275fac=function(r){return new(r||T)(p.LFG(_.eN))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},797:(R,S,i)=>{i.d(S,{_:()=>T});var t=i(3905),e=i(4004),E=i(262),p=i(2340),_=i(1571),h=i(529);let T=(()=>{class m{constructor(a){this.http=a,this.serverUrl=p.N.apiServer,this.serverV2Url=p.N.v2apiServer}findDistinctLocations(a,u){return(0,t.z)(this.http.post(this.serverUrl+"location/filter-distinct",{...a?{country:a}:{},...u?{location:u}:{}}).pipe((0,e.U)(C=>({countries:C.distinctOptions[0].countries,properties:C.distinctOptions[0].locations})),(0,E.K)(C=>(console.error(C.error),[]))))}getAllProperties(){return(0,t.z)(this.http.get(this.serverV2Url+"property").pipe((0,e.U)(a=>({properties:a})),(0,E.K)(a=>(console.error(a.error),[]))))}}return m.\u0275fac=function(a){return new(a||m)(_.LFG(h.eN))},m.\u0275prov=_.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},917:(R,S,i)=>{i.d(S,{m:()=>h});var t=i(3905),e=i(4004),E=i(2340),p=i(1571),_=i(529);let h=(()=>{class T{constructor(r){this.http=r,this.serverUrl=E.N.apiServer,this.serverV2Url=E.N.v2apiServer}findDistinctPositions(r,a,u){return(0,t.z)(this.http.post(this.serverUrl+"position/filter-distinct",{...r?{area:r}:{},...a?{department:a}:{},...u?{position:u}:{}}).pipe((0,e.U)(C=>({areas:C.distinctOptions[0].areas,departments:C.distinctOptions[0].departments,positions:C.distinctOptions[0].positions}))))}getAllPositions(){return(0,t.z)(this.http.get(this.serverV2Url+"position").pipe((0,e.U)(r=>({positions:r}))))}listPositions(r,a,u){return(0,t.z)(this.http.get(this.serverV2Url+"position/list",{params:{...r?{search:r}:{},...u?{page:u}:{},...a?{count:a}:{}}}).pipe((0,e.U)(C=>C)))}createPosition(r){return(0,t.z)(this.http.post(this.serverV2Url+"position",{...r.name?{name:r.name}:{},...r.department?{department:r.department}:{},...r.area?{area:r.area}:{},...r.description?{description:r.description}:{}}).pipe((0,e.U)(a=>a)))}editPosition(r,a){return(0,t.z)(this.http.put(this.serverV2Url+"position/"+r,{...a.name?{name:a.name}:{},...a.department?{department:a.department}:{},...a.area?{area:a.area}:{},...a.description?{description:a.description}:{}}).pipe((0,e.U)(u=>u)))}}return T.\u0275fac=function(r){return new(r||T)(p.LFG(_.eN))},T.\u0275prov=p.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},7913:(R,S,i)=>{i.d(S,{Iu:()=>T,Ql:()=>h});var t=i(1571),e=i(6895),E=i(433);const p=function(m,r,a){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":m,"p-disabled":r,"p-focus":a}},_={provide:E.JU,useExisting:(0,t.Gpc)(()=>h),multi:!0};let h=(()=>{class m{constructor(a){this.cd=a,this.trueValue=!0,this.falseValue=!1,this.onChange=new t.vpe,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(a,u){!this.disabled&&!this.readonly&&(a.preventDefault(),this.toggle(a),u.focus())}onInputChange(a){this.readonly||this.updateModel(a,a.target.checked)}toggle(a){this.updateModel(a,!this.checked())}updateModel(a,u){this.modelValue=u?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:a,checked:this.modelValue})}onFocus(a){this.focused=!0}onBlur(a){this.focused=!1,this.onModelTouched()}writeValue(a){this.modelValue=a,this.cd.markForCheck()}registerOnChange(a){this.onModelChange=a}registerOnTouched(a){this.onModelTouched=a}setDisabledState(a){this.disabled=a,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return m.\u0275fac=function(a){return new(a||m)(t.Y36(t.sBO))},m.\u0275cmp=t.Xpm({type:m,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[t._Bn([_])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(a,u){if(1&a){const C=t.EpF();t.TgZ(0,"div",0),t.NdJ("click",function(Z){t.CHM(C);const N=t.MAs(3);return t.KtG(u.onClick(Z,N))}),t.TgZ(1,"div",1)(2,"input",2,3),t.NdJ("change",function(Z){return u.onInputChange(Z)})("focus",function(Z){return u.onFocus(Z)})("blur",function(Z){return u.onBlur(Z)}),t.qZA()(),t._UZ(4,"span",4),t.qZA()}2&a&&(t.Tol(u.styleClass),t.Q6J("ngClass",t.kEZ(12,p,u.checked(),u.disabled,u.focused))("ngStyle",u.style),t.xp6(2),t.Q6J("checked",u.checked())("disabled",u.disabled),t.uIk("aria-label",u.ariaLabel)("id",u.inputId)("name",u.name)("tabindex",u.tabindex)("aria-checked",u.checked())("aria-labelledby",u.ariaLabelledBy))},dependencies:[e.mk,e.PC],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),m})(),T=(()=>{class m{}return m.\u0275fac=function(a){return new(a||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[e.ez]}),m})()},3054:(R,S,i)=>{i.d(S,{A:()=>_,g:()=>p});var t=i(1571),e=i(6895),E=i(433);let p=(()=>{class h{constructor(m,r,a,u){this.el=m,this.ngModel=r,this.control=a,this.cd=u,this.onResize=new t.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(m){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(m){this.autoResize&&this.resize(m)}onBlur(m){this.autoResize&&this.resize(m)}resize(m){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(m||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return h.\u0275fac=function(m){return new(m||h)(t.Y36(t.SBq),t.Y36(E.On,8),t.Y36(E.a5,8),t.Y36(t.sBO))},h.\u0275dir=t.lG2({type:h,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(m,r){1&m&&t.NdJ("input",function(u){return r.onInput(u)})("focus",function(u){return r.onFocus(u)})("blur",function(u){return r.onBlur(u)}),2&m&&t.ekj("p-filled",r.filled)("p-inputtextarea-resizable",r.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),h})(),_=(()=>{class h{}return h.\u0275fac=function(m){return new(m||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[e.ez]}),h})()}}]);