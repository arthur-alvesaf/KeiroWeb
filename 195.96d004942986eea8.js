"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[195],{76:(q,U,i)=>{i.d(U,{S:()=>y});var t=i(5e3),e=i(9808);function E(h,A){if(1&h&&(t.TgZ(0,"p",6),t._uU(1),t.qZA()),2&h){const u=t.oxw();t.xp6(1),t.Oqu(u.context)}}function d(h,A){1&h&&(t.TgZ(0,"p"),t.TgZ(1,"strong"),t._uU(2,"This action cannot be undone."),t.qZA(),t.qZA())}let y=(()=>{class h{constructor(){this.modalHeader="Delete?",this.context="",this.confirmationPrompt="Are you sure you want to delete?",this.canUndo=!1,this.rejectButtonText="Cancel",this.confirmButtonIconClasses="fa fa-trash-alt",this.confirmButtonText="Delete",this.onConfirm=new t.vpe,this.onReject=new t.vpe}reject(){this.onReject.emit()}confirm(){this.onConfirm.emit()}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-shared-confirmation"]],inputs:{modalHeader:"modalHeader",context:"context",confirmationPrompt:"confirmationPrompt",canUndo:"canUndo",rejectButtonText:"rejectButtonText",confirmButtonIconClasses:"confirmButtonIconClasses",confirmButtonText:"confirmButtonText"},outputs:{onConfirm:"onConfirm",onReject:"onReject"},decls:20,vars:7,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","text-center"],["class","my-3",4,"ngIf"],[1,"my-3"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",3,"ngClass"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"]],template:function(u,r){1&u&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return r.reject()}),t.TgZ(5,"span",3),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,E,2,1,"p",5),t.TgZ(9,"p",6),t._uU(10),t.qZA(),t.YNc(11,d,3,0,"p",7),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"div",9),t.TgZ(14,"button",10),t.NdJ("click",function(){return r.confirm()}),t._UZ(15,"i",11),t._uU(16),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return r.reject()}),t._UZ(18,"i",13),t._uU(19),t.qZA(),t.qZA(),t.qZA()),2&u&&(t.xp6(3),t.Oqu(r.modalHeader),t.xp6(5),t.Q6J("ngIf",r.context),t.xp6(2),t.Oqu(r.confirmationPrompt),t.xp6(1),t.Q6J("ngIf",!r.canUndo),t.xp6(4),t.Q6J("ngClass",r.confirmButtonIconClasses),t.xp6(1),t.hij(" ",r.confirmButtonText," "),t.xp6(3),t.hij(" ",r.rejectButtonText," "))},directives:[e.O5,e.mk],encapsulation:2}),h})()},1892:(q,U,i)=>{i.d(U,{C:()=>E});var t=i(9808),e=i(5e3);let E=(()=>{class d{}return d.\u0275fac=function(h){return new(h||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[t.ez]]}),d})()},6433:(q,U,i)=>{i.d(U,{S:()=>he});var t=i(5861),e=i(5e3),E=i(2382),d=i(9147),y=i(625),h=i(727),A=i(2733),u=i(3113),r=i(171),s=i(8283),p=i(9808),I=i(845),P=i(1424),N=i(7311),Y=i(5652),G=i(4036),K=i(9783),$=i(3407),X=i(2962),ee=i(1507),pe=i(8372),te=i(9649),z=i(4851);const _e=["searchInput"];function ne(c,M){1&c&&(e.TgZ(0,"tr"),e._UZ(1,"th",11),e.TgZ(2,"th"),e._uU(3,"Name"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Last known Position"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Last known Property"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Nationality"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Email"),e.qZA(),e.qZA())}function ie(c,M){if(1&c&&(e.TgZ(0,"tr",12),e.TgZ(1,"td"),e._UZ(2,"p-tableRadioButton"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.qZA()),2&c){const n=M.$implicit;e.Q6J("pSelectableRow",n),e.xp6(4),e.AsE("",n.name.given," ",n.name.last,""),e.xp6(2),e.Oqu((null==n.position?null:n.position.name)||""),e.xp6(2),e.Oqu((null==n.location?null:n.location.name)||""),e.xp6(2),e.Oqu(n.nationality),e.xp6(2),e.Oqu(n.email)}}let oe=(()=>{class c{constructor(n,o){this.talentsManagementApi=n,this.modalsController=o,this.searchInputControl=new E.NI,this.subscriptions=new h.w0,this.total=0,this.page=0,this.step=10,this.rows=[],this.loadingIndicator=!1,this.onSelectTalent=new e.vpe,this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,pe.b)(350)).subscribe(g=>{this.searchInputControl.valid&&this.fetchTalentsWithSearch()}))}ngAfterViewInit(){var n;null===(n=this.input)||void 0===n||n.nativeElement.focus()}setPage(n){this.step=n.rows,this.page=Math.floor(n.first/n.rows),this.fetchTalentsWithSearch()}fetchTalentsWithSearch(){this.talentsManagementApi.findTalentsFilterSearch(this.step,this.page+1,this.searchInputControl.value).then(n=>{this.rows=n.talents,this.total=n.total})}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(te.C),e.Y36(A.l))},c.\u0275cmp=e.Xpm({type:c,selectors:[["keiro-talents-table"]],viewQuery:function(n,o){if(1&n&&e.Gf(_e,5),2&n){let g;e.iGM(g=e.CRH())&&(o.input=g.first)}},outputs:{onSelectTalent:"onSelectTalent"},decls:15,vars:7,consts:[[1,"form-row","justify-content-end"],[1,"col","mb-1"],[1,"has-search"],[1,"fa","fa-search","has-search-icon"],["type","text","placeholder","Search by name, email, or Keiro ID",1,"form-control",3,"formControl"],["searchInput",""],["selectionMode","single","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","lazy","loading","paginator","rows","totalRecords","onLazyLoad","selectionChange"],["pTemplate","header"],["pTemplate","body"],["routerLink","/app/talent/create",1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-user-plus"],[2,"width","3rem"],[3,"pSelectableRow"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"span",3),e._UZ(4,"input",4,5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"p-table",6),e.NdJ("onLazyLoad",function(f){return o.setPage(f)})("selectionChange",function(f){return o.onSelectTalent.emit(f)}),e.YNc(7,ne,12,0,"ng-template",7),e.YNc(8,ie,13,7,"ng-template",8),e.qZA(),e.TgZ(9,"p"),e._uU(10," Is the Talent you're looking for not in the list?"),e._UZ(11,"br"),e.TgZ(12,"a",9),e.NdJ("click",function(){return o.modalsController.closeAllModals()}),e._UZ(13,"i",10),e._uU(14," Click here to create a new Talent profile "),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.Q6J("formControl",o.searchInputControl),e.xp6(2),e.Q6J("value",o.rows)("lazy",!0)("loading",o.loadingIndicator)("paginator",!0)("rows",o.step)("totalRecords",o.total))},directives:[E.Fj,E.JJ,E.oH,z.iA,K.jx,z.Ei,z.GE,N.yS],styles:[".has-search[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%] > .has-search-icon[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}"]}),c})();function le(c,M){1&c&&(e.TgZ(0,"span"),e._uU(1,"Assign talent to job"),e.qZA())}function v(c,M){1&c&&e._uU(0,"Edit employment information")}function S(c,M){if(1&c){const n=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(n);const g=e.oxw(2),f=e.MAs(35);return g.modalsControllerService.openModal(f,{class:"modal-lg"})}),e._uU(1," Choose Talent "),e.qZA()}}function l(c,M){if(1&c){const n=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).clearTalentFromForm()}),e.qZA()}}function _(c,M){if(1&c&&(e.TgZ(0,"div",28),e._UZ(1,"input",29),e.YNc(2,l,1,0,"button",30),e.qZA()),2&c){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",!0)("value",(null==n.currentlySelectedTalent?null:n.currentlySelectedTalent.name.given)+" "+(null==n.currentlySelectedTalent?null:n.currentlySelectedTalent.name.last)),e.xp6(1),e.Q6J("ngIf",n.addingEmployment)}}const C=function(c){return["/app/talent/view/",c]};function a(c,M){if(1&c){const n=e.EpF();e.TgZ(0,"div",32),e._uU(1," This talent has history, "),e.TgZ(2,"a",33),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).modalsControllerService.closeUpperModal()}),e._uU(3,"click here to view profile"),e.qZA(),e.qZA()}if(2&c){const n=e.oxw(2);e.xp6(2),e.Q6J("routerLink",e.VKq(1,C,null==n.currentlySelectedTalent?null:n.currentlySelectedTalent._id))}}function T(c,M){1&c&&(e.TgZ(0,"div",34),e._uU(1," This job coincides with the last previously known work information for this talent. "),e._UZ(2,"br"),e._uU(3,"We have autocompleted the date for you. "),e.qZA())}const m=function(c){return["/","app","talent","view",c]};function D(c,M){if(1&c&&(e.TgZ(0,"div",32),e._uU(1," This job "),e.TgZ(2,"strong"),e._uU(3,"does not"),e.qZA(),e._uU(4," coincide with the last previously known work information for this talent. "),e._UZ(5,"br"),e._uU(6,"Please validate if this information is correct before proceeding. "),e.TgZ(7,"a",35),e._UZ(8,"i",36),e._uU(9,"View talent in new tab "),e.qZA(),e.qZA()),2&c){const n=e.oxw(2);e.xp6(7),e.Q6J("routerLink",e.VKq(1,m,null==n.currentlySelectedTalent?null:n.currentlySelectedTalent._id))}}function O(c,M){if(1&c&&(e.TgZ(0,"div",19),e.TgZ(1,"h6",7),e._uU(2,"End Date"),e.qZA(),e.TgZ(3,"div",20),e._UZ(4,"p-calendar",37),e.qZA(),e.qZA()),2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("showIcon",!0)("minDate",(null==n.existing?null:n.existing.from)||n.today)("maxDate",n.today)}}function F(c,M){if(1&c&&(e.TgZ(0,"div",40),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&c){const n=M.$implicit;e.xp6(2),e.Oqu(n.label)}}function J(c,M){if(1&c&&(e.TgZ(0,"div",19),e.TgZ(1,"h6",7),e._uU(2,"End Reason"),e.qZA(),e.TgZ(3,"div",20),e.TgZ(4,"p-dropdown",38),e.YNc(5,F,3,1,"ng-template",39),e.qZA(),e.qZA(),e.qZA()),2&c){const n=e.oxw(2);e.xp6(4),e.Q6J("options",n.endStatusOptions)("autoDisplayFirst",!1)("group",!0)}}function B(c,M){1&c&&(e.TgZ(0,"div",19),e.TgZ(1,"h6",7),e._uU(2,"Notes"),e.qZA(),e.TgZ(3,"div",20),e._UZ(4,"textarea",41),e.qZA(),e.qZA())}function R(c,M){if(1&c&&(e.TgZ(0,"form",18),e.TgZ(1,"div",19),e.TgZ(2,"h6",7),e._uU(3,"Talent"),e.qZA(),e.TgZ(4,"div",20),e.YNc(5,S,2,0,"button",21),e.YNc(6,_,3,3,"div",22),e.qZA(),e.YNc(7,a,4,3,"div",23),e.qZA(),e.TgZ(8,"div",19),e.TgZ(9,"h6",7),e._uU(10,"Start Date"),e.qZA(),e.TgZ(11,"div",20),e._UZ(12,"p-calendar",24),e.qZA(),e.YNc(13,T,4,0,"div",25),e.YNc(14,D,10,3,"div",23),e.qZA(),e.YNc(15,O,5,3,"div",26),e.YNc(16,J,6,3,"div",26),e.YNc(17,B,5,0,"div",26),e.qZA()),2&c){const n=e.oxw();e.Q6J("formGroup",n.createEmploymentForm),e.xp6(5),e.Q6J("ngIf",!n.talentIsSelected),e.xp6(1),e.Q6J("ngIf",n.talentIsSelected),e.xp6(1),e.Q6J("ngIf",n.currentlySelectedTalent&&n.warnAboutSelectedTalent),e.xp6(5),e.Q6J("showIcon",!0)("maxDate",n.today),e.xp6(1),e.Q6J("ngIf",n.selectedTalentOnTrack),e.xp6(1),e.Q6J("ngIf",n.selectedTalentNotOnTrack),e.xp6(1),e.Q6J("ngIf",n.editingEndedEmployment),e.xp6(1),e.Q6J("ngIf",n.editingEndedEmployment),e.xp6(1),e.Q6J("ngIf",n.editingEndedEmployment)}}function j(c,M){1&c&&e._UZ(0,"app-shared-icon-tooltip",46)}function ae(c,M){if(1&c){const n=e.EpF();e.TgZ(0,"keiro-account-form",47),e.NdJ("statusChanges",function(g){return e.CHM(n),e.oxw(2).formStatusChange(g)})("valueChanges",function(g){return e.CHM(n),e.oxw(2).formValueChange(g)}),e.qZA()}if(2&c){const n=e.oxw(2);e.Q6J("initialValue",null==n.selectedTalent?null:n.selectedTalent.account)("canCreateRoles",n.canCreateRoles)}}function se(c,M){if(1&c&&(e.TgZ(0,"div"),e.TgZ(1,"div",42),e.TgZ(2,"div",48),e.TgZ(3,"h6"),e._uU(4,"Login email address"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",48),e.TgZ(8,"h6"),e._uU(9,"Keiro access level"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"roleName"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&c){const n=e.oxw(2);e.xp6(6),e.hij(" ",null==n.selectedTalent||null==n.selectedTalent.account?null:n.selectedTalent.account.email," "),e.xp6(5),e.Oqu(e.lcZ(12,2,null==n.selectedTalent||null==n.selectedTalent.account?null:n.selectedTalent.account.role))}}function re(c,M){if(1&c&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"div",42),e.TgZ(3,"h5",43),e._uU(4,"Account info"),e.qZA(),e.YNc(5,j,1,0,"app-shared-icon-tooltip",44),e.qZA(),e.TgZ(6,"div"),e.YNc(7,ae,1,2,"keiro-account-form",45),e.YNc(8,se,13,4,"div",10),e.qZA(),e.qZA()),2&c){const n=e.oxw();e.xp6(5),e.Q6J("ngIf",n.canEditAccount),e.xp6(2),e.Q6J("ngIf",n.canEditAccount),e.xp6(1),e.Q6J("ngIf",!n.canEditAccount)}}function ce(c,M){1&c&&(e.TgZ(0,"span"),e._UZ(1,"i",49),e._uU(2," Assign talent "),e.qZA())}function de(c,M){1&c&&(e._UZ(0,"i",50),e._uU(1," Edit employment "))}function ue(c,M){if(1&c){const n=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e.TgZ(2,"span"),e._uU(3,"Talent Search"),e.qZA(),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(n),e.oxw().modalsControllerService.closeUpperModal()}),e.TgZ(5,"span",5),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"keiro-talents-table",51),e.NdJ("onSelectTalent",function(g){return e.CHM(n),e.oxw().selectTalent(g)}),e.qZA(),e.qZA(),e.TgZ(9,"div",11),e.TgZ(10,"div",12),e.TgZ(11,"button",52),e.NdJ("click",function(){e.CHM(n);const g=e.oxw();return g.clearTalentFromForm(),g.modalsControllerService.closeUpperModal()}),e._UZ(12,"i",14),e._uU(13," Cancel "),e.qZA(),e.TgZ(14,"button",53),e.NdJ("click",function(){return e.CHM(n),e.oxw().modalsControllerService.closeUpperModal()}),e._UZ(15,"i",54),e._uU(16," Select "),e.qZA(),e.qZA(),e.qZA()}}let he=(()=>{class c{constructor(n,o,g,f,b,x){this.fb=n,this.modalsControllerService=o,this.employmentServiceApi=g,this.roleNamePipe=f,this.authStateService=b,this.accountServiceApi=x,this.addingEmployment=!0,this.editingEndedEmployment=!1,this.selectedTalentOnTrack=!1,this.selectedTalentNotOnTrack=!1,this.onSumbit=new e.vpe,this.onCloseModal=new e.vpe,this.talentHasAccount=!1,this.canEditAccount=!1,this.formValid=!1,this.onlyRoleChange=!1,this.processing=!1,this.warnAboutSelectedTalent=!1,this.endStatusOptions=[{label:"Change of job",items:[d.Vg.CHANGE_PROMOTION,d.Vg.CHANGE_LATERAL_MOVEMENT,d.Vg.CHANGE_TRANSFER_SAME_POSITION,d.Vg.CHANGE_TRANSFER_PROMOTION].map(Z=>({label:d.ub.statusNameMap.get(Z),value:Z}))},{label:"Voluntary dismissals",items:[d.Vg.DISMISSAL_VOLUNTARY_ABSENTEEISM,d.Vg.DISMISSAL_VOLUNTARY_ABANDONMENT,d.Vg.DISMISSAL_VOLUNTARY_RETIREMENT,d.Vg.DISMISSAL_VOLUNTARY_BETTER_OFFER,d.Vg.DISMISSAL_VOLUNTARY_PERSONAL].map(Z=>({label:d.ub.statusNameMap.get(Z),value:Z}))},{label:"Forced dismissals",items:[d.Vg.DISMISSAL_FORCED_END_OF_CONTRACT,d.Vg.DISMISSAL_FORCED_DISEASE,d.Vg.DISMISSAL_FORCED_DEATH,d.Vg.DISMISSAL_FORCED_LOW_PERFORMANCE,d.Vg.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,d.Vg.DISMISSAL_FORCED_OTHERS].map(Z=>({label:d.ub.statusNameMap.get(Z),value:Z}))}],this.today=new Date,this.subscriptions=new h.w0,this.subscriptions.add(this.authStateService.authState.subscribe(Z=>{this.currentUserIdentity=Z.identity}))}ngOnInit(){var n,o,g,f,b,x,Z;if(this.currentlySelectedTalent=(null===(n=this.existing)||void 0===n?void 0:n.talent)||void 0,void 0!==this.existing){this.addingEmployment=!1,this.addingEmployment=!1;let k={talent:[(null===(o=this.existing)||void 0===o?void 0:o.talent._id)||null,E.kI.required],startDate:[null===(g=this.existing)||void 0===g?void 0:g.from,E.kI.required]};(null===(f=this.existing)||void 0===f?void 0:f.until)&&(this.editingEndedEmployment=!0,Object.assign(k,{endDate:[null===(b=this.existing)||void 0===b?void 0:b.until,E.kI.required]},{endReason:[null===(x=this.existing)||void 0===x?void 0:x.status,E.kI.required]},{notes:[null===(Z=this.existing)||void 0===Z?void 0:Z.notes]})),this.createEmploymentForm=this.fb.group(k)}else this.createEmploymentForm=this.fb.group({talent:[null,E.kI.required],startDate:[null,E.kI.required]})}ngOnDestroy(){this.subscriptions.unsubscribe()}get talentIsSelected(){var n,o;return(null===(o=null===(n=this.createEmploymentForm)||void 0===n?void 0:n.get("talent"))||void 0===o?void 0:o.value)||!1}selectTalent(n){var o=this;return(0,t.Z)(function*(){var g,f,b,x,Z,k,L,w,H,W;if(o.warnAboutSelectedTalent=!1,o.currentlySelectedTalent=n,o.selectedTalentOnTrack=!1,o.selectedTalentNotOnTrack=!1,n){if(null===(x=null===(b=o.createEmploymentForm)||void 0===b?void 0:b.get("talent"))||void 0===x||x.setValue(n._id),(null==n?void 0:n.position._id)==(null===(Z=o.forJob)||void 0===Z?void 0:Z.position._id)&&(null==n?void 0:n.location._id)==(null===(k=o.forJob)||void 0===k?void 0:k.property._id)?(null===(w=null===(L=o.createEmploymentForm)||void 0===L?void 0:L.get("startDate"))||void 0===w||w.setValue(new Date(n.startDate)),null===(W=null===(H=o.createEmploymentForm)||void 0===H?void 0:H.get("startDate"))||void 0===W||W.markAsDirty(),o.selectedTalentOnTrack=!0):o.selectedTalentNotOnTrack=!0,o.employmentServiceApi.getEmploymentsForTalent(n._id).then(Q=>{o.warnAboutSelectedTalent=Q.some(me=>d.ub.forcedDismissalReasons.includes(me.status))}),n.account){let Q=(yield o.accountServiceApi.getAccount(n.account)).account;o.selectedTalent={_id:n._id,account:Q}}o.manageAccountActions()}else null===(f=null===(g=o.createEmploymentForm)||void 0===g?void 0:g.get("talent"))||void 0===f||f.setValue(null)})()}clearTalentFromForm(){var n,o,g,f,b,x,Z,k,L,w;this.warnAboutSelectedTalent=!1,null===(o=null===(n=this.createEmploymentForm)||void 0===n?void 0:n.get("talent"))||void 0===o||o.setValue(null),this.selectedTalentOnTrack=!1,this.selectedTalentNotOnTrack=!1,this.talentHasAccount=!1,this.selectedTalent=void 0,(null===(g=this.currentlySelectedTalent)||void 0===g?void 0:g.position._id)==(null===(f=this.forJob)||void 0===f?void 0:f.position._id)&&(null===(b=this.currentlySelectedTalent)||void 0===b?void 0:b.location._id)==(null===(x=this.forJob)||void 0===x?void 0:x.property._id)&&(null===(k=null===(Z=this.createEmploymentForm)||void 0===Z?void 0:Z.get("startDate"))||void 0===k||k.setValue(null),null===(w=null===(L=this.createEmploymentForm)||void 0===L?void 0:L.get("startDate"))||void 0===w||w.markAsPristine()),this.currentlySelectedTalent=void 0}getFormValue(){var n,o,g,f,b,x,Z,k,L,w,H,W,Q,me;let ge={employment:Object.assign(Object.assign(Object.assign({talentId:null===(n=this.createEmploymentForm)||void 0===n?void 0:n.value.talent,startDate:null===(o=this.createEmploymentForm)||void 0===o?void 0:o.value.startDate},(null===(g=this.createEmploymentForm)||void 0===g?void 0:g.value.endDate)?{endDate:null===(f=this.createEmploymentForm)||void 0===f?void 0:f.value.endDate}:{}),(null===(b=this.createEmploymentForm)||void 0===b?void 0:b.value.endReason)?{endReason:null===(x=this.createEmploymentForm)||void 0===x?void 0:x.value.endReason}:{}),(null===(Z=this.createEmploymentForm)||void 0===Z?void 0:Z.value.notes)?{notes:null===(k=this.createEmploymentForm)||void 0===k?void 0:k.value.notes}:{notes:null})};if(this.talentHasAccount){let V={};this.formValue&&((null===(w=null===(L=this.selectedTalent)||void 0===L?void 0:L.account)||void 0===w?void 0:w.email)!==this.formValue.email&&(V.email=this.formValue.email),(null===(W=null===(H=this.selectedTalent)||void 0===H?void 0:H.account)||void 0===W?void 0:W.role)!==this.formValue.role&&(V.role=this.formValue.role),V.changeAcc=!(!(null==V?void 0:V.email)&&!(null==V?void 0:V.role))),ge.account=V,ge.accountId=null===(me=null===(Q=this.selectedTalent)||void 0===Q?void 0:Q.account)||void 0===me?void 0:me._id}return ge}formStatusChange(n){this.formValid="VALID"===n}formValueChange(n){var o,g,f,b;this.onlyRoleChange=(null===(g=null===(o=this.selectedTalent)||void 0===o?void 0:o.account)||void 0===g?void 0:g.email)===n.email&&(null===(b=null===(f=this.selectedTalent)||void 0===f?void 0:f.account)||void 0===b?void 0:b.role)!=n.role,this.formValue=n}getRoleOptions(){return Object.values(y.u).filter(n=>n!=y.u.SUPER_ADMIN).map(n=>({name:this.roleNamePipe.transform(n),value:n}))}manageAccountActions(){var n,o,g,f,b,x;switch(this.talentHasAccount=!!(null===(n=this.selectedTalent)||void 0===n?void 0:n.account),null===(o=this.currentUserIdentity)||void 0===o?void 0:o.role){case y.u.SUPER_ADMIN:case y.u.ADMIN:this.canCreateRoles=[y.u.ADMIN,y.u.MANAGER,y.u.EMPLOYEE],this.canEditAccount=!0;break;case y.u.MANAGER:this.canEditAccount=!0,(null===(g=this.selectedTalent)||void 0===g?void 0:g.account)&&(this.canCreateRoles=[this.selectedTalent.account.role])}(null===(b=null===(f=this.currentUserIdentity)||void 0===f?void 0:f.talent)||void 0===b?void 0:b._id)===(null===(x=this.selectedTalent)||void 0===x?void 0:x._id)&&(this.canEditAccount=!1)}}return c.\u0275fac=function(n){return new(n||c)(e.Y36(E.qu),e.Y36(A.l),e.Y36(d.Ib),e.Y36(u.p),e.Y36(r.V),e.Y36(s.B))},c.\u0275cmp=e.Xpm({type:c,selectors:[["team-add-edit-employment-modal"]],inputs:{existing:"existing",forJob:"forJob"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal"},decls:36,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],[4,"ngIf","ngIfElse"],["editEmploymentModalTitle",""],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-0"],[1,"mb-2"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["editEmploymentButtonContent",""],["talentSelectorModal",""],[3,"formGroup"],[1,"my-2"],[1,"p-fluid"],["pButton","",3,"click",4,"ngIf"],["class","p-inputgroup",4,"ngIf"],["class","mt-1 alert alert-warning","role","alert",4,"ngIf"],["formControlName","startDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","maxDate"],["class","mt-1 alert alert-info","role","alert",4,"ngIf"],["class","my-2",4,"ngIf"],["pButton","",3,"click"],[1,"p-inputgroup"],["type","text","pInputText","",3,"disabled","value"],["type","button","pButton","","icon","pi pi-times","label","Clear","class","p-button-danger",3,"click",4,"ngIf"],["type","button","pButton","","icon","pi pi-times","label","Clear",1,"p-button-danger",3,"click"],["role","alert",1,"mt-1","alert","alert-warning"],[3,"routerLink","click"],["role","alert",1,"mt-1","alert","alert-info"],["target","_blank",1,"btn","btn-link","btn-sm",3,"routerLink"],["aria-hidden","true",1,"fa","fa-eye","mr-1"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","minDate","maxDate"],["formControlName","endReason",3,"options","autoDisplayFirst","group"],["pTemplate","group"],[1,"flex","align-items-center"],["pInputTextarea","","formControlName","notes"],[1,"row"],[1,"col-auto"],["accentLevel","warning","iconClasses","fa fa-door-open","tooltipMessage","When you change a talent's email, they are required to register again with their new email address. Their current password will be reset.",4,"ngIf"],[3,"initialValue","canCreateRoles","statusChanges","valueChanges",4,"ngIf"],["accentLevel","warning","iconClasses","fa fa-door-open","tooltipMessage","When you change a talent's email, they are required to register again with their new email address. Their current password will be reset."],[3,"initialValue","canCreateRoles","statusChanges","valueChanges"],[1,"col-12","col-md-6"],["aria-hidden","true",1,"fa","fa-briefcase"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[3,"onSelectTalent"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-check-circle"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e.YNc(2,le,2,0,"span",2),e.YNc(3,v,1,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(f){return o.onCloseModal.emit(f)}),e.TgZ(6,"span",5),e._uU(7,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div"),e.TgZ(10,"h5"),e._uU(11,"Job:"),e.qZA(),e.TgZ(12,"h6",7),e._uU(13),e.qZA(),e.TgZ(14,"h6",8),e.TgZ(15,"small"),e._uU(16),e._UZ(17,"br"),e._uU(18),e.qZA(),e.qZA(),e.TgZ(19,"h6"),e._uU(20),e.qZA(),e.qZA(),e._UZ(21,"hr"),e.TgZ(22,"div"),e.YNc(23,R,18,11,"form",9),e.qZA(),e.YNc(24,re,9,3,"div",10),e.qZA(),e.TgZ(25,"div",11),e.TgZ(26,"div",12),e.TgZ(27,"button",13),e.NdJ("click",function(f){return o.onCloseModal.emit(f)}),e._UZ(28,"i",14),e._uU(29," Cancel "),e.qZA(),e.TgZ(30,"button",15),e.NdJ("click",function(){return o.onSumbit.emit(o.getFormValue())}),e.YNc(31,ce,3,0,"span",2),e.YNc(32,de,2,0,"ng-template",null,16,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.YNc(34,ue,17,0,"ng-template",null,17,e.W1O)),2&n){const g=e.MAs(4),f=e.MAs(33);e.xp6(2),e.Q6J("ngIf",o.addingEmployment)("ngIfElse",g),e.xp6(11),e.Oqu(null==o.forJob||null==o.forJob.position?null:o.forJob.position.name),e.xp6(3),e.hij(" ",null==o.forJob||null==o.forJob.position?null:o.forJob.position.area,""),e.xp6(2),e.hij(" ",null==o.forJob||null==o.forJob.position?null:o.forJob.position.department," "),e.xp6(2),e.Oqu(null==o.forJob||null==o.forJob.property?null:o.forJob.property.name),e.xp6(3),e.Q6J("ngIf",o.createEmploymentForm),e.xp6(1),e.Q6J("ngIf",o.talentHasAccount),e.xp6(6),e.Q6J("disabled",o.processing||(null==o.createEmploymentForm?null:o.createEmploymentForm.pristine)||(null==o.createEmploymentForm?null:o.createEmploymentForm.invalid)),e.xp6(1),e.Q6J("ngIf",o.addingEmployment)("ngIfElse",f)}},directives:[p.O5,E._Y,E.JL,E.sg,I.Hq,P.o,N.yS,Y.f,E.JJ,E.u,G.Lt,K.jx,E.Fj,$.g,X.s,ee.g,oe],pipes:[u.p],styles:[""]}),c})()},5557:(q,U,i)=>{i.d(U,{Z:()=>C});var t=i(9808),e=i(2382),E=i(7311),d=i(5652),y=i(4036),h=i(1424),A=i(3407),u=i(5e3),r=i(5787);let ne=(()=>{class a{}return a.\u0275fac=function(m){return new(m||a)},a.\u0275mod=u.oAB({type:a}),a.\u0275inj=u.cJS({imports:[[t.ez,r.T]]}),a})();var ie=i(242),oe=i(5973),le=i(3113),v=i(2342),S=i(4851);let l=(()=>{class a{}return a.\u0275fac=function(m){return new(m||a)},a.\u0275mod=u.oAB({type:a}),a.\u0275inj=u.cJS({imports:[[t.ez,E.Bz,e.UX,S.U$]]}),a})();var _=i(3345);let C=(()=>{class a{}return a.\u0275fac=function(m){return new(m||a)},a.\u0275mod=u.oAB({type:a}),a.\u0275inj=u.cJS({providers:[le.p],imports:[[l,t.ez,E.Bz,e.UX,e.u5,y.kW,d._8,h.j,A.A,ne,ie.Iu,v.M,oe.s,_.k]]}),a})()},7182:(q,U,i)=>{i.d(U,{Q:()=>le});var t=i(5e3),e=i(2382),E=i(727),d=i(9147),y=i(625),h=i(527),A=i(3113),u=i(171),r=i(9808),s=i(5652),p=i(4036),I=i(9783),P=i(3407),N=i(2962),Y=i(1507);function G(v,S){1&v&&(t.TgZ(0,"div",16),t._UZ(1,"i",17),t._uU(2,"You cannot end this employment "),t.qZA())}function K(v,S){if(1&v&&(t.TgZ(0,"div",24),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.qZA()),2&v){const l=S.$implicit;t.xp6(2),t.Oqu(l.label)}}function $(v,S){if(1&v&&(t.TgZ(0,"form",18),t.TgZ(1,"div",5),t.TgZ(2,"h6",6),t._uU(3,"Ended at:"),t.qZA(),t.TgZ(4,"div",19),t._UZ(5,"p-calendar",20),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"h6",6),t._uU(8,"End with status:"),t.qZA(),t.TgZ(9,"div",19),t.TgZ(10,"p-dropdown",21),t.YNc(11,K,3,1,"ng-template",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",5),t.TgZ(13,"h6",6),t._uU(14,"Additional notes:"),t.qZA(),t.TgZ(15,"div",19),t._UZ(16,"textarea",23),t.qZA(),t.qZA(),t.qZA()),2&v){const l=t.oxw();t.Q6J("formGroup",l.editEmploymentForm),t.xp6(5),t.Q6J("showIcon",!0)("maxDate",l.today)("minDate",(null==l.employment?null:l.employment.from)||l.today),t.xp6(5),t.Q6J("options",l.endStatusOptions)("autoDisplayFirst",!1)("group",!0)}}function X(v,S){1&v&&t._UZ(0,"app-shared-icon-tooltip",28)}function ee(v,S){if(1&v&&(t.TgZ(0,"div"),t.TgZ(1,"div",25),t.TgZ(2,"div",29),t.TgZ(3,"h6"),t._uU(4,"Login email address"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",29),t.TgZ(8,"h6"),t._uU(9,"Keiro access level"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"roleName"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&v){const l=t.oxw(2);t.xp6(6),t.hij(" ",null==l.employment||null==l.employment.talent||null==l.employment.talent.account?null:l.employment.talent.account.email," "),t.xp6(5),t.Oqu(t.lcZ(12,2,null==l.employment||null==l.employment.talent||null==l.employment.talent.account?null:l.employment.talent.account.role))}}function pe(v,S){if(1&v){const l=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"keiro-account-form",31),t.NdJ("statusChanges",function(C){return t.CHM(l),t.oxw(3).formStatusChange(C)})("valueChanges",function(C){return t.CHM(l),t.oxw(3).formValueChange(C)}),t.qZA(),t.qZA()}if(2&v){const l=t.oxw(3);t.xp6(1),t.Q6J("initialValue",null==l.employment||null==l.employment.talent?null:l.employment.talent.account)("canCreateRoles",l.canCreateRoles)}}const te=function(v,S){return{"btn-primary":v,"btn-outline-primary":S}},z=function(v,S){return{"btn-danger":v,"btn-outline-danger":S}};function _e(v,S){if(1&v){const l=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"button",33),t.NdJ("click",function(){return t.CHM(l),t.oxw(3).toggleRevoke(!1)}),t._UZ(2,"i",34),t._uU(3," Keep account "),t.qZA(),t.TgZ(4,"button",33),t.NdJ("click",function(){return t.CHM(l),t.oxw(3).toggleRevoke(!0)}),t._UZ(5,"i",35),t._uU(6," Revoke account "),t.qZA(),t.qZA()}if(2&v){const l=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.WLB(2,te,!l.currentRevoke,l.currentRevoke)),t.xp6(3),t.Q6J("ngClass",t.WLB(5,z,l.currentRevoke,!l.currentRevoke))}}function ne(v,S){if(1&v&&(t.TgZ(0,"div"),t.YNc(1,pe,2,2,"div",9),t.YNc(2,_e,7,8,"div",30),t.qZA()),2&v){const l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!l.showAccInfo),t.xp6(1),t.Q6J("ngIf",l.canEditAccount)}}function ie(v,S){1&v&&(t.TgZ(0,"div",16),t._UZ(1,"i",36),t._uU(2,"The account for this talent will be revoked "),t.qZA())}function oe(v,S){if(1&v&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",25),t.TgZ(3,"h5",26),t._uU(4,"Account info"),t.qZA(),t.YNc(5,X,1,0,"app-shared-icon-tooltip",27),t.qZA(),t.YNc(6,ee,13,4,"div",9),t.YNc(7,ne,3,2,"div",9),t.YNc(8,ie,3,0,"div",7),t.qZA()),2&v){const l=t.oxw();t.xp6(5),t.Q6J("ngIf",!l.showAccInfo),t.xp6(1),t.Q6J("ngIf",l.showAccInfo),t.xp6(1),t.Q6J("ngIf",l.currentStatus!==(null==l.employment?null:l.employment.status)&&!l.isEmploymentEnding),t.xp6(1),t.Q6J("ngIf",l.isEmploymentEnding&&(null==l.editEmploymentForm?null:l.editEmploymentForm.dirty)&&l.canEditAccount)}}let le=(()=>{class v{constructor(l,_,C){this.fb=l,this.roleNamePipe=_,this.authStateService=C,this.onSumbit=new t.vpe,this.onCloseModal=new t.vpe,this.currentStatus=d.Vg.ACTIVE,this.showAccInfo=!0,this.isEmploymentEnding=!1,this.talentHasAccount=!1,this.canEditAccount=!1,this.formValid=!1,this.onlyRoleChange=!1,this._currentRevoke=!1,this.subscriptions=new E.w0,this.processing=!1,this.endStatusOptions=[{label:"Change of job",items:[d.Vg.CHANGE_PROMOTION,d.Vg.CHANGE_LATERAL_MOVEMENT,d.Vg.CHANGE_TRANSFER_SAME_POSITION,d.Vg.CHANGE_TRANSFER_PROMOTION].map(a=>({label:d.ub.statusNameMap.get(a),value:a}))},{label:"Voluntary dismissals",items:[d.Vg.DISMISSAL_VOLUNTARY_ABSENTEEISM,d.Vg.DISMISSAL_VOLUNTARY_ABANDONMENT,d.Vg.DISMISSAL_VOLUNTARY_RETIREMENT,d.Vg.DISMISSAL_VOLUNTARY_BETTER_OFFER,d.Vg.DISMISSAL_VOLUNTARY_PERSONAL].map(a=>({label:d.ub.statusNameMap.get(a),value:a}))},{label:"Forced dismissals",items:[d.Vg.DISMISSAL_FORCED_END_OF_CONTRACT,d.Vg.DISMISSAL_FORCED_DISEASE,d.Vg.DISMISSAL_FORCED_DEATH,d.Vg.DISMISSAL_FORCED_LOW_PERFORMANCE,d.Vg.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,d.Vg.DISMISSAL_FORCED_OTHERS].map(a=>({label:d.ub.statusNameMap.get(a),value:a}))}],this.today=new Date,this.subscriptions.add(this.authStateService.authState.subscribe(a=>{this.currentUserIdentity=a.identity}))}set currentRevoke(l){this._currentRevoke=this.canEditAccount?l:this.currentRevoke,this.showAccInfo=this.isEmploymentEnding&&this.canEditAccount?this.isEmploymentEnding:this.currentRevoke,this.formValue=void 0}get currentRevoke(){return this._currentRevoke}formStatusChange(l){this.formValid="VALID"===l}formValueChange(l){var _,C,a,T;this.onlyRoleChange=(null===(C=null===(_=this.employment)||void 0===_?void 0:_.talent.account)||void 0===C?void 0:C.email)===l.email&&(null===(T=null===(a=this.employment)||void 0===a?void 0:a.talent.account)||void 0===T?void 0:T.role)!=l.role,this.formValue=l}ngOnInit(){var l,_,C,a,T,m,D,O,F,J,B,R,j,ae,se,re,ce,de,ue;switch(this.editEmploymentForm=this.fb.group({newStatus:[d.Vg.ACTIVE,[h.d.valueInArray([...d.ub.changesReasons,...d.ub.allDismissalReasons]),e.kI.required]],endDate:[null,e.kI.required],notes:[null]}),this.talentHasAccount=!!(null===(l=this.employment)||void 0===l?void 0:l.talent.account),this.currentStatus=(null===(_=this.employment)||void 0===_?void 0:_.status)?null===(C=this.employment)||void 0===C?void 0:C.status:d.Vg.ACTIVE,null===(a=this.currentUserIdentity)||void 0===a?void 0:a.role){case y.u.SUPER_ADMIN:case y.u.ADMIN:this.canCreateRoles=[y.u.ADMIN,y.u.MANAGER,y.u.EMPLOYEE],this.canEditAccount=!0;break;case y.u.MANAGER:this.canEditAccount=!0,(null===(D=null===(m=null===(T=this.employment)||void 0===T?void 0:T.talent)||void 0===m?void 0:m.account)||void 0===D?void 0:D.role)===y.u.ADMIN&&(this.canEditAccount=!1),(null===(O=this.employment)||void 0===O?void 0:O.talent.account)&&(this.canCreateRoles=[null===(F=this.employment)||void 0===F?void 0:F.talent.account.role]);break;case y.u.EMPLOYEE:((null===(R=null===(B=null===(J=this.employment)||void 0===J?void 0:J.talent)||void 0===B?void 0:B.account)||void 0===R?void 0:R.role)===y.u.ADMIN||(null===(se=null===(ae=null===(j=this.employment)||void 0===j?void 0:j.talent)||void 0===ae?void 0:ae.account)||void 0===se?void 0:se.role)===y.u.MANAGER)&&(this.canEditAccount=!1)}(null===(ce=null===(re=this.currentUserIdentity)||void 0===re?void 0:re.talent)||void 0===ce?void 0:ce._id)===(null===(ue=null===(de=this.employment)||void 0===de?void 0:de.talent)||void 0===ue?void 0:ue._id)&&(this.canEditAccount=!1),this.onChanges()}ngOnDestroy(){this.subscriptions.unsubscribe()}onChanges(){var l;null===(l=this.editEmploymentForm)||void 0===l||l.valueChanges.subscribe(_=>{var C;this.currentStatus=_.newStatus,this.isEmploymentEnding=d.ub.allDismissalReasons.includes(_.newStatus),this.currentStatus!==(null===(C=this.employment)||void 0===C?void 0:C.status)&&this.canEditAccount&&(this.showAccInfo=this.isEmploymentEnding?this.isEmploymentEnding:this.currentRevoke)})}toggleRevoke(l){this.currentRevoke=l}getRoleOptions(){return Object.values(y.u).filter(l=>l!=y.u.SUPER_ADMIN).map(l=>({name:this.roleNamePipe.transform(l),value:l}))}canEndEmployment(){var l,_;const C=this.talentHasAccount&&!this.canEditAccount;return C&&!1===(null===(l=this.editEmploymentForm)||void 0===l?void 0:l.disabled)&&(null===(_=this.editEmploymentForm)||void 0===_||_.disable()),!C}getFormValue(){var l,_,C,a,T,m,D,O,F,J;let B={employment:Object.assign({newStatus:null===(l=this.editEmploymentForm)||void 0===l?void 0:l.value.newStatus,until:null===(_=this.editEmploymentForm)||void 0===_?void 0:_.value.endDate},(null===(C=this.editEmploymentForm)||void 0===C?void 0:C.value.notes)?{notes:null===(a=this.editEmploymentForm)||void 0===a?void 0:a.value.notes}:{})};if(this.talentHasAccount){let R={},j=this.isEmploymentEnding&&this.canEditAccount?this.isEmploymentEnding:this.currentRevoke;this.formValue&&!j&&((null===(D=null===(m=null===(T=this.employment)||void 0===T?void 0:T.talent)||void 0===m?void 0:m.account)||void 0===D?void 0:D.email)!==this.formValue.email&&(R.email=this.formValue.email),(null===(J=null===(F=null===(O=this.employment)||void 0===O?void 0:O.talent)||void 0===F?void 0:F.account)||void 0===J?void 0:J.role)!==this.formValue.role&&(R.role=this.formValue.role),R.changeAcc=!(!(null==R?void 0:R.email)&&!(null==R?void 0:R.role)||j)),j&&(R.revokeAcc={talentId:this.employment.talent._id,email:this.employment.talent.account.email}),B.account=R,B.accountId=this.employment.talent.account._id}return B}}return v.\u0275fac=function(l){return new(l||v)(t.Y36(e.qu),t.Y36(A.p),t.Y36(u.V))},v.\u0275cmp=t.Xpm({type:v,selectors:[["team-end-employment-modal"]],inputs:{job:"job",employment:"employment"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal"},decls:32,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"my-2"],[1,"mb-0"],["class","mt-1 alert alert-warning","role","alert",4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-save"],["role","alert",1,"mt-1","alert","alert-warning"],["aria-hidden","true",1,"fa","fa-exclamation-triangle","mr-1"],[3,"formGroup"],[1,"p-fluid"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","maxDate","minDate"],["formControlName","newStatus",3,"options","autoDisplayFirst","group"],["pTemplate","group"],["pInputTextarea","","formControlName","notes"],[1,"flex","align-items-center"],[1,"row"],[1,"col-auto"],["accentLevel","warning","iconClasses","fa fa-door-open","tooltipMessage","When you change a talent's email, they are required to register again with their new email address. Their current password will be reset.",4,"ngIf"],["accentLevel","warning","iconClasses","fa fa-door-open","tooltipMessage","When you change a talent's email, they are required to register again with their new email address. Their current password will be reset."],[1,"col-12","col-md-6"],["class","btn-group","role","group","aria-label","Toggle revoke",4,"ngIf"],[3,"initialValue","canCreateRoles","statusChanges","valueChanges"],["role","group","aria-label","Toggle revoke",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],["aria-hidden","true",1,"fa","fa-door-open"],["aria-hidden","true",1,"fa","fa-door-closed"],["aria-hidden","true",1,"fa","fa-door-closed","mr-1"]],template:function(l,_){1&l&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.TgZ(2,"span"),t._uU(3,"End employment"),t.qZA(),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(a){return _.onCloseModal.emit(a)}),t.TgZ(5,"span",3),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"h5",5),t._uU(9),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"h6",6),t._uU(12,"Job title:"),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA(),t.qZA(),t.TgZ(15,"div",5),t.TgZ(16,"h6",6),t._uU(17,"Started at:"),t.qZA(),t.TgZ(18,"span"),t._uU(19),t.ALo(20,"date"),t.qZA(),t.qZA(),t.YNc(21,G,3,0,"div",7),t.YNc(22,$,17,7,"form",8),t.YNc(23,oe,9,4,"div",9),t.qZA(),t.TgZ(24,"div",10),t.TgZ(25,"div",11),t.TgZ(26,"button",12),t.NdJ("click",function(a){return _.onCloseModal.emit(a)}),t._UZ(27,"i",13),t._uU(28," Cancel "),t.qZA(),t.TgZ(29,"button",14),t.NdJ("click",function(){return _.onSumbit.emit(_.getFormValue())}),t._UZ(30,"i",15),t._uU(31," End employment "),t.qZA(),t.qZA(),t.qZA()),2&l&&(t.xp6(9),t.AsE("",null==_.employment||null==_.employment.talent||null==_.employment.talent.name?null:_.employment.talent.name.given," ",null==_.employment||null==_.employment.talent||null==_.employment.talent.name?null:_.employment.talent.name.last,""),t.xp6(5),t.Oqu(null==_.job||null==_.job.position?null:_.job.position.name),t.xp6(5),t.Oqu(t.xi3(20,8,null==_.employment?null:_.employment.from,"dd MMM yyyy")),t.xp6(2),t.Q6J("ngIf",!_.canEndEmployment()),t.xp6(1),t.Q6J("ngIf",_.editEmploymentForm),t.xp6(1),t.Q6J("ngIf",_.talentHasAccount),t.xp6(6),t.Q6J("disabled",_.processing||(null==_.editEmploymentForm?null:_.editEmploymentForm.pristine)||(null==_.editEmploymentForm?null:_.editEmploymentForm.invalid)))},directives:[r.O5,e._Y,e.JL,e.sg,s.f,e.JJ,e.u,p.Lt,I.jx,e.Fj,P.g,N.s,Y.g,r.mk],pipes:[r.uU,A.p],styles:[""]}),v})()},8283:(q,U,i)=>{i.d(U,{B:()=>h});var t=i(3905),e=i(4004),E=i(2340),d=i(5e3),y=i(520);let h=(()=>{class A{constructor(r){this.http=r,this.serverUrl=E.N.v2apiServer}listAccounts(r,s,p,I){return(0,t.z)(this.http.post(this.serverUrl+"account/list",I,{params:Object.assign(Object.assign(Object.assign({},r?{search:r}:{}),p?{page:p}:{}),s?{count:s}:{})}).pipe(P=>P))}sendRegistrationReminder(r){return(0,t.z)(this.http.post(this.serverUrl+"account/remind-registration/"+r,{}).pipe((0,e.U)(s=>({account:s}))))}editAccount(r,s,p){return(0,t.z)(this.http.put(this.serverUrl+"account/"+r,Object.assign(Object.assign({},s?{email:s}:{}),p?{role:p}:{})).pipe((0,e.U)(I=>({account:I}))))}getAccount(r){return(0,t.z)(this.http.get(this.serverUrl+"account/"+r).pipe((0,e.U)(s=>({account:s}))))}}return A.\u0275fac=function(r){return new(r||A)(d.LFG(y.eN))},A.\u0275prov=d.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},797:(q,U,i)=>{i.d(U,{_:()=>A});var t=i(4004),e=i(262),E=i(3905),d=i(2340),y=i(5e3),h=i(520);let A=(()=>{class u{constructor(s){this.http=s,this.serverUrl=d.N.apiServer,this.serverV2Url=d.N.v2apiServer}findDistinctLocations(s,p){return this.http.post(this.serverUrl+"location/filter-distinct",Object.assign(Object.assign({},s?{country:s}:{}),p?{location:p}:{})).pipe((0,t.U)(I=>({countries:I.distinctOptions[0].countries,properties:I.distinctOptions[0].locations})),(0,e.K)(I=>(console.error(I.error),[])))}getAllProperties(){return(0,E.z)(this.http.get(this.serverV2Url+"property").pipe((0,t.U)(s=>({properties:s})),(0,e.K)(s=>(console.error(s.error),[]))))}}return u.\u0275fac=function(s){return new(s||u)(y.LFG(h.eN))},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},917:(q,U,i)=>{i.d(U,{m:()=>h});var t=i(4004),e=i(3905),E=i(2340),d=i(5e3),y=i(520);let h=(()=>{class A{constructor(r){this.http=r,this.serverUrl=E.N.apiServer,this.serverV2Url=E.N.v2apiServer}findDistinctPositions(r,s,p){return this.http.post(this.serverUrl+"position/filter-distinct",Object.assign(Object.assign(Object.assign({},r?{area:r}:{}),s?{department:s}:{}),p?{position:p}:{})).pipe((0,t.U)(I=>({areas:I.distinctOptions[0].areas,departments:I.distinctOptions[0].departments,positions:I.distinctOptions[0].positions})))}getAllPositions(){return(0,e.z)(this.http.get(this.serverV2Url+"position").pipe((0,t.U)(r=>({positions:r}))))}listPositions(r,s,p){return(0,e.z)(this.http.get(this.serverV2Url+"position/list",{params:Object.assign(Object.assign(Object.assign({},r?{search:r}:{}),p?{page:p}:{}),s?{count:s}:{})}).pipe((0,t.U)(I=>I)))}createPosition(r){return(0,e.z)(this.http.post(this.serverV2Url+"position",Object.assign(Object.assign(Object.assign(Object.assign({},r.name?{name:r.name}:{}),r.department?{department:r.department}:{}),r.area?{area:r.area}:{}),r.description?{description:r.description}:{})).pipe((0,t.U)(s=>s)))}editPosition(r,s){return(0,e.z)(this.http.put(this.serverV2Url+"position/"+r,Object.assign(Object.assign(Object.assign(Object.assign({},s.name?{name:s.name}:{}),s.department?{department:s.department}:{}),s.area?{area:s.area}:{}),s.description?{description:s.description}:{})).pipe((0,t.U)(p=>p)))}}return A.\u0275fac=function(r){return new(r||A)(d.LFG(y.eN))},A.\u0275prov=d.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},242:(q,U,i)=>{i.d(U,{Iu:()=>A,Ql:()=>h});var t=i(5e3),e=i(9808),E=i(2382);const d=function(u,r,s){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":u,"p-disabled":r,"p-focus":s}},y={provide:E.JU,useExisting:(0,t.Gpc)(()=>h),multi:!0};let h=(()=>{class u{constructor(s){this.cd=s,this.trueValue=!0,this.falseValue=!1,this.onChange=new t.vpe,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(s,p){!this.disabled&&!this.readonly&&(s.preventDefault(),this.toggle(s),p.focus())}onInputChange(s){this.readonly||this.updateModel(s,s.target.checked)}toggle(s){this.updateModel(s,!this.checked())}updateModel(s,p){this.modelValue=p?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:s,checked:this.modelValue})}onFocus(s){this.focused=!0}onBlur(s){this.focused=!1,this.onModelTouched()}writeValue(s){this.modelValue=s,this.cd.markForCheck()}registerOnChange(s){this.onModelChange=s}registerOnTouched(s){this.onModelTouched=s}setDisabledState(s){this.disabled=s,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return u.\u0275fac=function(s){return new(s||u)(t.Y36(t.sBO))},u.\u0275cmp=t.Xpm({type:u,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[t._Bn([y])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(s,p){if(1&s){const I=t.EpF();t.TgZ(0,"div",0),t.NdJ("click",function(N){t.CHM(I);const Y=t.MAs(3);return p.onClick(N,Y)}),t.TgZ(1,"div",1),t.TgZ(2,"input",2,3),t.NdJ("change",function(N){return p.onInputChange(N)})("focus",function(N){return p.onFocus(N)})("blur",function(N){return p.onBlur(N)}),t.qZA(),t.qZA(),t._UZ(4,"span",4),t.qZA()}2&s&&(t.Tol(p.styleClass),t.Q6J("ngClass",t.kEZ(12,d,p.checked(),p.disabled,p.focused))("ngStyle",p.style),t.xp6(2),t.Q6J("checked",p.checked())("disabled",p.disabled),t.uIk("aria-label",p.ariaLabel)("id",p.inputId)("name",p.name)("tabindex",p.tabindex)("aria-checked",p.checked())("aria-labelledby",p.ariaLabelledBy))},directives:[e.mk,e.PC],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),u})(),A=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[[e.ez]]}),u})()},3407:(q,U,i)=>{i.d(U,{A:()=>y,g:()=>d});var t=i(5e3),e=i(9808),E=i(2382);let d=(()=>{class h{constructor(u,r,s,p){this.el=u,this.ngModel=r,this.control=s,this.cd=p,this.onResize=new t.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(u){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(u){this.autoResize&&this.resize(u)}onBlur(u){this.autoResize&&this.resize(u)}resize(u){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(u||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return h.\u0275fac=function(u){return new(u||h)(t.Y36(t.SBq),t.Y36(E.On,8),t.Y36(E.a5,8),t.Y36(t.sBO))},h.\u0275dir=t.lG2({type:h,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(u,r){1&u&&t.NdJ("input",function(p){return r.onInput(p)})("focus",function(p){return r.onFocus(p)})("blur",function(p){return r.onBlur(p)}),2&u&&t.ekj("p-filled",r.filled)("p-inputtextarea-resizable",r.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),h})(),y=(()=>{class h{}return h.\u0275fac=function(u){return new(u||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[[e.ez]]}),h})()}}]);