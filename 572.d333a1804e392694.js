"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[572],{9913:(C,h,s)=>{s.d(h,{Z:()=>E});var e=s(5e3),t=s(2382),d=s(8372),l=s(9766),u=s(9808),m=s(4036),p=s(9783),o=s(6526);function r(a,f){if(1&a&&(e.TgZ(0,"div",9),e.TgZ(1,"em"),e._uU(2),e.qZA(),e.qZA()),2&a){const _=e.oxw(2);e.xp6(2),e.Oqu(_.filter.metadata.visibleName)}}const n=function(){return[]};function i(a,f){if(1&a&&(e.TgZ(0,"p-dropdown",7),e.YNc(1,r,3,1,"ng-template",8),e.qZA()),2&a){const _=e.oxw();e.Q6J("formControl",_.control)("options",_.filter.metadata.options||e.DdM(5,n))("filter",!0)("placeholder",_.filter.metadata.visibleName)("showClear",_.filter.value&&!_.filter.metadata.required)}}function c(a,f){if(1&a&&e._UZ(0,"p-multiSelect",10),2&a){const _=e.oxw();e.Q6J("formControl",_.control)("options",_.filter.metadata.options||e.DdM(3,n))("placeholder",_.filter.metadata.visibleName)}}function v(a,f){if(1&a&&e._UZ(0,"p-multiSelect",11),2&a){const _=e.oxw();e.Q6J("formControl",_.control)("filter",!1)("options",_.filter.metadata.options||e.DdM(4,n))("placeholder",_.filter.metadata.visibleName)}}function D(a,f){if(1&a&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&a){const _=f.$implicit;e.Q6J("value",_.value),e.xp6(1),e.Oqu(_.name)}}function M(a,f){if(1&a&&(e.TgZ(0,"select",12),e.YNc(1,D,2,2,"option",13),e.qZA()),2&a){const _=e.oxw();e.Q6J("formControl",_.control),e.xp6(1),e.Q6J("ngForOf",_.filter.metadata.options)}}function g(a,f){if(1&a){const _=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){return e.CHM(_),e.oxw().onRemove.emit()}),e._UZ(1,"i",16),e.qZA()}}let E=(()=>{class a{constructor(){this.canRemove=!0,this.filterClass="",this.onRemove=new e.vpe}get FilterType(){return l.v}ngOnInit(){this.control=new t.NI(this.filter.value),this.control.valueChanges.pipe((0,d.b)(200)).subscribe(_=>{this.filter.value=_}),this.filter.valueChanges.subscribe(()=>{this.control.setValue(this.filter.value,{emitEvent:!1})})}}return a.\u0275fac=function(_){return new(_||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["alasta-filter-item"]],inputs:{filter:"filter",canRemove:"canRemove",filterClass:"filterClass"},outputs:{onRemove:"onRemove"},decls:7,vars:6,consts:[["id","filter-item",3,"ngClass"],["id","filter-value",3,"ngSwitch"],["optionLabel","name","optionValue","value","styleClass","alasta-filter-dropdown",3,"formControl","options","filter","placeholder","showClear",4,"ngSwitchCase"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","options","placeholder",4,"ngSwitchCase"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","filter","options","placeholder",4,"ngSwitchCase"],[3,"formControl",4,"ngSwitchDefault"],["id","filter-remover","class","btn btn-sm btn-secondary-outline p-1",3,"click",4,"ngIf"],["optionLabel","name","optionValue","value","styleClass","alasta-filter-dropdown",3,"formControl","options","filter","placeholder","showClear"],["pTemplate","header"],[1,"filter-dropdown-header"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","options","placeholder"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","filter","options","placeholder"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","filter-remover",1,"btn","btn-sm","btn-secondary-outline","p-1",3,"click"],[1,"fas","fa-trash-alt"]],template:function(_,O){1&_&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,i,2,6,"p-dropdown",2),e.YNc(3,c,1,4,"p-multiSelect",3),e.YNc(4,v,1,5,"p-multiSelect",4),e.YNc(5,M,2,2,"select",5),e.qZA(),e.YNc(6,g,2,0,"a",6),e.qZA()),2&_&&(e.Q6J("ngClass",O.filterClass),e.xp6(1),e.Q6J("ngSwitch",O.filter.metadata.type),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.DROPDOWN_SEARCH),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.MULTISELECT_SEARCH),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.MULTISELECT),e.xp6(2),e.Q6J("ngIf",O.canRemove))},directives:[u.mk,u.RF,u.n9,m.Lt,t.JJ,t.oH,p.jx,o.NU,u.ED,t.EJ,u.sg,t.YN,t.Kr,u.O5],styles:["#filter-item[_ngcontent-%COMP%]{border-radius:.25rem;display:inline-flex;justify-content:center;align-items:center}#filter-item[_ngcontent-%COMP%]   #filter-remover[_ngcontent-%COMP%]{margin:0 .3rem;width:1.4rem;height:1.4rem;line-height:0;border-radius:.25%}.filter-dropdown-header[_ngcontent-%COMP%]{padding:.2rem .75rem;background-color:#efefef}"]}),a})()},7064:(C,h,s)=>{s.d(h,{i:()=>o});var e=s(9808),t=s(2382),d=s(3077),l=s(3345),u=s(4036),m=s(6526),p=s(5e3);let o=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[[e.ez,t.UX,d.mr,l.k,u.kW,m.q4]]}),r})()},5653:(C,h,s)=>{s.d(h,{i:()=>u});var e=s(5e3),t=s(1135),d=s(7197),l=s(6817);let u=(()=>{class m{constructor(o){this._filterGroupSubject=new t.X([]),this.filterGroupsState=this._filterGroupSubject.asObservable(),this.valueChange=new e.vpe,this.lastInformed=void 0,o?(this.dropdownOptions=o.dropdownOptions,this.filtersMetadata=o.filtersMetadata):(this.dropdownOptions=[],this.filtersMetadata=[]);for(const r of this.filtersMetadata)if(r.required){let n=new l.w(r,"");this.addFilter(n)}}recursiveFindFiltersMetadata(o,r,n=!1){r||(r=this.filtersMetadata);for(const i of r){if(o(i))return i;if(i.children){const c=this.recursiveFindFiltersMetadata(o,i.children);if(c)return n&&this.addFilter(new l.w(i,"")),c}}}getMetadataWithId(o){return this.recursiveFindFiltersMetadata(r=>r.id==o)}addFilter(o,r=!1,n=!0){let i=this._filterGroupSubject.getValue(),c=i.find(v=>v.groupName==o.metadata.group);if(c){if(!o.metadata.multiple){const v=c.filters.find(D=>D.metadata.id==o.metadata.id);if(v)return void(r&&v.value!=o.value?v.setValue(o.value,!0,{ignoreChange:n}):console.warn("Filter already selected and has value"))}c.filters.push(o)}else c={groupName:o.metadata.group,filters:[o]},i.push(c);o.valueChanges.subscribe(v=>{v&&v.additional&&v.additional.ignoreChange||this.informChange()}),this._filterGroupSubject.next(i)}addFilterWithId(o,r=""){const n=this.recursiveFindFiltersMetadata(i=>i.id==o,void 0,!0);if(n){const i=new l.w(n,r);this.addFilter(i,!0,!1)}else console.warn("There is no filter with this ID")}canRemoveFilter(o){return!(o.metadata.required||o.metadata.children&&o.metadata.children.length>0&&this.getUngroupedFilters().some(r=>{var n;return null===(n=o.metadata.children)||void 0===n?void 0:n.some(i=>i.id==r.metadata.id)}))}removeFilter(o){if(!this.canRemoveFilter(o))return;let r=this._filterGroupSubject.getValue(),n=r.find(i=>i.groupName==o.metadata.group);n&&(n.filters=n.filters.filter(i=>i!=o),0==n.filters.length&&r.splice(r.indexOf(n),1)),this._filterGroupSubject.next(r),this.informChange()}getUngroupedFilters(){const o=this._filterGroupSubject.getValue();let r=[];for(const n of o)r.push(...n.filters);return r}getSimpleFilterListValue(){let o={};const r=this.getUngroupedFilters();for(const n of r)if(d.g.hasValue(n.value)){if(r.some(i=>i.metadata.children&&i.metadata.children.some(c=>n.metadata.id==c.id)&&!d.g.hasValue(i.value)))continue;Object.keys(o).includes(n.metadata.key)?Array.isArray(o[n.metadata.key])?o[n.metadata.key].push(n.value):o[n.metadata.key]=[o[n.metadata.key],n.value]:o[n.metadata.key]=n.value}return o}informChange(){const o=this.getSimpleFilterListValue();this.isEqual(this.lastInformed,o)||(this.valueChange.emit(o),this.lastInformed=o)}addFilterValues(o){const r=this.getSimpleFilterListValue();for(let n of Object.keys(o)){const i=this.recursiveFindFiltersMetadata(c=>c.key==n);if(i){const c=new l.w(i,o[n]);this.addFilter(c,!0)}else console.warn("There is no filter with this key")}this.isEqual(this.getSimpleFilterListValue(),r)||this.informChange()}isEqual(o,r){return JSON.stringify(o)==JSON.stringify(r)}}return m.\u0275fac=function(o){return new(o||m)(e.LFG("filterConfiguration",8))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac}),m})()},4829:(C,h,s)=>{s.d(h,{a:()=>M});var e=s(7197),t=s(5e3),d=s(9808),l=s(9913),u=s(3077);const m=["selector"];function p(g,E){1&g&&t.Hsn(0,0,["*ngTemplateOutlet","selector ? selector : defaultSelector"])}function o(g,E){if(1&g&&(t.TgZ(0,"span",9),t._uU(1),t.qZA()),2&g){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.groupName)}}function r(g,E){if(1&g){const a=t.EpF();t.TgZ(0,"alasta-filter-item",10),t.NdJ("onRemove",function(){const O=t.CHM(a).$implicit;return t.oxw(2).service.removeFilter(O)}),t.qZA()}if(2&g){const a=E.$implicit,f=t.oxw(2);t.Gre("order-",a.metadata.groupOrder," mx-1 mb-1"),t.Q6J("filter",a)("filterClass",f.filterNeedsValue(a)?"border border-danger":"border border-secondary")("canRemove",f.service.canRemoveFilter(a))}}function n(g,E){if(1&g&&(t.TgZ(0,"div",5),t.YNc(1,o,2,1,"span",6),t.TgZ(2,"div",7),t.YNc(3,r,1,6,"alasta-filter-item",8),t.qZA(),t.qZA()),2&g){const a=E.$implicit;t.xp6(1),t.Q6J("ngIf",a.groupName),t.xp6(2),t.Q6J("ngForOf",a.filters)}}function i(g,E){if(1&g){const a=t.EpF();t.TgZ(0,"li",17),t.TgZ(1,"button",18),t.NdJ("click",function(){const O=t.CHM(a).$implicit;return t.oxw(3).service.addFilterWithId(O.id)}),t._uU(2),t.qZA(),t.qZA()}if(2&g){const a=E.$implicit,f=t.oxw(3);t.xp6(1),t.Q6J("disabled",f.canSelectDropdownOption(a.id)),t.xp6(1),t.hij(" ",a.name," ")}}function c(g,E){if(1&g&&(t.TgZ(0,"ul",15),t.YNc(1,i,3,2,"li",16),t.qZA()),2&g){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.service.dropdownOptions)}}function v(g,E){1&g&&(t.TgZ(0,"div",11),t.TgZ(1,"button",12),t._uU(2," Add filter "),t._UZ(3,"span",13),t.qZA(),t.YNc(4,c,2,1,"ul",14),t.qZA())}const D=["*"];let M=(()=>{class g{constructor(){}ngOnInit(){}canSelectDropdownOption(a){return!!this.service.getUngroupedFilters().some(f=>f.metadata.id==a&&!f.metadata.multiple)}filterNeedsValue(a){return!(e.g.hasValue(a.value)||!a.metadata.children||!this.service.getUngroupedFilters().some(f=>{var _;return(null===(_=a.metadata.children)||void 0===_?void 0:_.some(O=>O.id==f.metadata.id))&&e.g.hasValue(f.value)}))}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["alasta-filters-list"]],contentQueries:function(a,f,_){if(1&a&&t.Suo(_,m,5),2&a){let O;t.iGM(O=t.CRH())&&(f.selector=O.first)}},inputs:{service:"service"},ngContentSelectors:D,decls:7,vars:4,consts:[["id","filters-list",1,"d-flex","flex-wrap"],["id","filters-dropdown",1,"mr-1"],[4,"ngTemplateOutlet"],["class","filter-group border border-primary mr-1 mb-1",4,"ngFor","ngForOf"],["defaultSelector",""],[1,"filter-group","border","border-primary","mr-1","mb-1"],["class","filter-group-title",4,"ngIf"],[1,"d-flex","flex-wrap"],[3,"class","filter","filterClass","canRemove","onRemove",4,"ngFor","ngForOf"],[1,"filter-group-title"],[3,"filter","filterClass","canRemove","onRemove"],["dropdown","",1,"btn-group"],["id","filter-dropdown-button","dropdownToggle","","type","button","aria-controls","filter-dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["id","filter-dropdown","class","dropdown-menu","role","menu","aria-labelledby","filter-dropdown-button",4,"dropdownMenu"],["id","filter-dropdown","role","menu","aria-labelledby","filter-dropdown-button",1,"dropdown-menu"],["role","menuitem",4,"ngFor","ngForOf"],["role","menuitem"],[1,"dropdown-item",3,"disabled","click"]],template:function(a,f){if(1&a&&(t.F$t(),t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,p,1,0,"ng-content",2),t.qZA(),t.YNc(3,n,4,2,"div",3),t.ALo(4,"async"),t.qZA(),t.YNc(5,v,5,0,"ng-template",null,4,t.W1O)),2&a){const _=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",f.selector?f.selector:_),t.xp6(1),t.Q6J("ngForOf",t.lcZ(4,2,f.service.filterGroupsState))}},directives:[d.tP,d.sg,d.O5,l.Z,u.TO,u.Mq,u.Hz],pipes:[d.Ov],styles:[".filter-group[_ngcontent-%COMP%]{border-radius:.25rem}.filter-group[_ngcontent-%COMP%] > .filter-group-title[_ngcontent-%COMP%]{display:block;font-size:.8rem;margin:0 .8rem}"]}),g})()},9766:(C,h,s)=>{s.d(h,{v:()=>e});var e=(()=>{return(t=e||(e={}))[t.DROPDOWN_SEARCH=0]="DROPDOWN_SEARCH",t[t.MULTISELECT_SEARCH=1]="MULTISELECT_SEARCH",t[t.MULTISELECT=2]="MULTISELECT",t[t.TEXT_INPUT=3]="TEXT_INPUT",t[t.TOGGLE=4]="TOGGLE",e;var t})()},6817:(C,h,s)=>{s.d(h,{w:()=>t});var e=s(5e3);class t{constructor(l,u){this.valueChanges=new e.vpe,this.metadata=l,this.value=u}set value(l){this.setValue(l)}setValue(l,u=!0,m){this._value=l,u&&this.valueChanges.emit({value:this._value,additional:m})}get value(){return this._value}}},797:(C,h,s)=>{s.d(h,{_:()=>p});var e=s(3905),t=s(4004),d=s(262),l=s(2340),u=s(5e3),m=s(520);let p=(()=>{class o{constructor(n){this.http=n,this.serverUrl=l.N.apiServer,this.serverV2Url=l.N.v2apiServer}findDistinctLocations(n,i){return(0,e.z)(this.http.post(this.serverUrl+"location/filter-distinct",Object.assign(Object.assign({},n?{country:n}:{}),i?{location:i}:{})).pipe((0,t.U)(c=>({countries:c.distinctOptions[0].countries,properties:c.distinctOptions[0].locations})),(0,d.K)(c=>(console.error(c.error),[]))))}getAllProperties(){return(0,e.z)(this.http.get(this.serverV2Url+"property").pipe((0,t.U)(n=>({properties:n})),(0,d.K)(n=>(console.error(n.error),[]))))}}return o.\u0275fac=function(n){return new(n||o)(u.LFG(m.eN))},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},917:(C,h,s)=>{s.d(h,{m:()=>m});var e=s(3905),t=s(4004),d=s(2340),l=s(5e3),u=s(520);let m=(()=>{class p{constructor(r){this.http=r,this.serverUrl=d.N.apiServer,this.serverV2Url=d.N.v2apiServer}findDistinctPositions(r,n,i){return(0,e.z)(this.http.post(this.serverUrl+"position/filter-distinct",Object.assign(Object.assign(Object.assign({},r?{area:r}:{}),n?{department:n}:{}),i?{position:i}:{})).pipe((0,t.U)(c=>({areas:c.distinctOptions[0].areas,departments:c.distinctOptions[0].departments,positions:c.distinctOptions[0].positions}))))}getAllPositions(){return(0,e.z)(this.http.get(this.serverV2Url+"position").pipe((0,t.U)(r=>({positions:r}))))}listPositions(r,n,i){return(0,e.z)(this.http.get(this.serverV2Url+"position/list",{params:Object.assign(Object.assign(Object.assign({},r?{search:r}:{}),i?{page:i}:{}),n?{count:n}:{})}).pipe((0,t.U)(c=>c)))}createPosition(r){return(0,e.z)(this.http.post(this.serverV2Url+"position",Object.assign(Object.assign(Object.assign(Object.assign({},r.name?{name:r.name}:{}),r.department?{department:r.department}:{}),r.area?{area:r.area}:{}),r.description?{description:r.description}:{})).pipe((0,t.U)(n=>n)))}editPosition(r,n){return(0,e.z)(this.http.put(this.serverV2Url+"position/"+r,Object.assign(Object.assign(Object.assign(Object.assign({},n.name?{name:n.name}:{}),n.department?{department:n.department}:{}),n.area?{area:n.area}:{}),n.description?{description:n.description}:{})).pipe((0,t.U)(i=>i)))}}return p.\u0275fac=function(r){return new(r||p)(l.LFG(u.eN))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},4954:(C,h,s)=>{s.d(h,{m:()=>o});var e=s(3905),t=s(4004),d=s(262),l=s(2340),u=s(2027),m=s(5e3),p=s(520);let o=(()=>{class r{constructor(i){this.http=i,this.serverUrl=l.N.apiServer,this.serverV2Url=l.N.v2apiServer}findReviewWindows(){return this.http.get(this.serverUrl+"window").pipe((0,t.U)(i=>({reviewWindows:i.windows})),(0,d.K)(i=>(console.error(i.error),[])))}getProgressBarStats(i,c){return(0,e.z)(this.http.put(this.serverV2Url+"statistics/progress-bar/"+i,c).pipe((0,t.U)(v=>Object.assign(Object.assign({},v),{reviewCycle:r.formatDates(v.reviewCycle)}))))}getTalentMapStats(i,c){return(0,e.z)(this.http.put(this.serverV2Url+"statistics/talent-map/"+i,c).pipe(v=>v))}static formatDates(i){if(i)return Object.assign(Object.assign(Object.assign({},i),i.startDate?{startDate:new u.p({ISODateString:i.startDate})}:{}),i.endDate?{endDate:new u.p({ISODateString:i.endDate})}:{})}getAllReviewCycles(){return(0,e.z)(this.http.get(this.serverV2Url+"review-cycle").pipe((0,t.U)(i=>({reviewCycles:i.map(c=>r.formatDates(c))}))))}getCurrentReviewCycle(){return(0,e.z)(this.http.get(this.serverV2Url+"review-cycle/current").pipe((0,t.U)(i=>({reviewCycle:r.formatDates(i)}))))}createReviewCycle(i){return(0,e.z)(this.http.post(this.serverV2Url+"review-cycle",Object.assign(Object.assign(Object.assign({},i.name?{name:i.name}:{}),i.startDate?{startDate:i.startDate}:{}),i.endDate?{endDate:i.endDate}:{})).pipe((0,t.U)(c=>r.formatDates(c))))}editReviewCycle(i){return(0,e.z)(this.http.put(this.serverV2Url+"review-cycle/"+i._id,Object.assign(Object.assign(Object.assign({},i.name?{name:i.name}:{}),i.startDate?{startDate:i.startDate}:{}),i.endDate?{endDate:i.endDate}:{})).pipe((0,t.U)(c=>r.formatDates(c))))}deleteReviewCycle(i){return(0,e.z)(this.http.delete(this.serverV2Url+"review-cycle/"+i).pipe((0,t.U)(c=>c)))}}return r.\u0275fac=function(i){return new(i||r)(m.LFG(p.eN))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},8254:(C,h,s)=>{s.d(h,{M:()=>m});var e=s(3905),t=s(4004),d=s(2340),l=s(5e3),u=s(520);let m=(()=>{class p{constructor(r){this.http=r,this.serverUrl=d.N.v2apiServer}getBoxes(){return(0,e.z)(this.http.get(this.serverUrl+"talent-map-box").pipe((0,t.U)(r=>({boxes:r.sort((n,i)=>n.pos-i.pos)}))))}}return p.\u0275fac=function(r){return new(r||p)(l.LFG(u.eN))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},2338:(C,h,s)=>{s.d(h,{F:()=>e});class e{static encodeObjectToURLParam(d,l=""){const u=Object.keys(d).map(m=>{const p=d[m];return d.constructor===Array?m=`${l}[]`:d.constructor===Object&&(m=l?`${l}[${m}]`:m),"object"==typeof p?this.encodeObjectToURLParam(p,m):`${m}=${encodeURIComponent(p)}`});return[].concat.apply([],u).join("&")}static decodeURLParamToObject(d){let l={};for(const u of d.split("&")){let[m,p]=u.split("=");p=decodeURIComponent(p),this.handleSingleValue(l,m,p)}return l}static handleSingleValue(d,l,u){if(l.includes("["))if("[]"==l)d.push(u);else{const m=l.indexOf("["),p=l.indexOf("]"),o=l.substring(0,m);if(m+1==p){const r=l.substring(m);if(""!=o)null==d[o]&&(d[o]=[]),this.handleSingleValue(d[o],r,u);else{const n=l.substring(p+1),i=n.indexOf("["),c=n.indexOf("]");if(i+1==c){let v=[];d.push(v),this.handleSingleValue(v,n,u)}else{const v=n.substring(i+1,c)+n.substring(c+1);let D={};d.push(D),this.handleSingleValue(D,v,u)}}}else{const r=l.substring(m+1,p)+l.substring(p+1);null==d[o]&&(d[o]={}),this.handleSingleValue(d[o],r,u)}}else d[l]=u}}}}]);