"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[357],{9147:(F,C,r)=>{r.d(C,{Ib:()=>U,Vg:()=>s,ub:()=>p});var g,d=r(3905),c=r(4004),O=r(2340),D=r(1571),I=r(529),s=(()=>{return(e=s||(s={}))[e.CANDIDATE=0]="CANDIDATE",e[e.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED=1]="CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED",e[e.CANDIDATE_ENDED_NOT_DESIRED=2]="CANDIDATE_ENDED_NOT_DESIRED",e[e.ACTIVE=10]="ACTIVE",e[e.ENDED=19]="ENDED",e[e.CHANGE_PROMOTION=20]="CHANGE_PROMOTION",e[e.CHANGE_LATERAL_MOVEMENT=21]="CHANGE_LATERAL_MOVEMENT",e[e.CHANGE_TRANSFER_SAME_POSITION=22]="CHANGE_TRANSFER_SAME_POSITION",e[e.CHANGE_TRANSFER_PROMOTION=23]="CHANGE_TRANSFER_PROMOTION",e[e.DISMISSAL_VOLUNTARY_ABSENTEEISM=50]="DISMISSAL_VOLUNTARY_ABSENTEEISM",e[e.DISMISSAL_VOLUNTARY_ABANDONMENT=51]="DISMISSAL_VOLUNTARY_ABANDONMENT",e[e.DISMISSAL_VOLUNTARY_RETIREMENT=52]="DISMISSAL_VOLUNTARY_RETIREMENT",e[e.DISMISSAL_VOLUNTARY_BETTER_OFFER=53]="DISMISSAL_VOLUNTARY_BETTER_OFFER",e[e.DISMISSAL_VOLUNTARY_PERSONAL=54]="DISMISSAL_VOLUNTARY_PERSONAL",e[e.DISMISSAL_FORCED_END_OF_CONTRACT=70]="DISMISSAL_FORCED_END_OF_CONTRACT",e[e.DISMISSAL_FORCED_DISEASE=71]="DISMISSAL_FORCED_DISEASE",e[e.DISMISSAL_FORCED_DEATH=72]="DISMISSAL_FORCED_DEATH",e[e.DISMISSAL_FORCED_LOW_PERFORMANCE=73]="DISMISSAL_FORCED_LOW_PERFORMANCE",e[e.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS=74]="DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS",e[e.DISMISSAL_FORCED_OTHERS=75]="DISMISSAL_FORCED_OTHERS",s;var e})();class p{}g=p,p.changesReasons=[s.CHANGE_PROMOTION,s.CHANGE_LATERAL_MOVEMENT,s.CHANGE_TRANSFER_SAME_POSITION,s.CHANGE_TRANSFER_PROMOTION],p.voluntaryDismissalReasons=[s.DISMISSAL_VOLUNTARY_ABSENTEEISM,s.DISMISSAL_VOLUNTARY_ABANDONMENT,s.DISMISSAL_VOLUNTARY_RETIREMENT,s.DISMISSAL_VOLUNTARY_BETTER_OFFER,s.DISMISSAL_VOLUNTARY_PERSONAL],p.forcedDismissalReasons=[s.DISMISSAL_FORCED_END_OF_CONTRACT,s.DISMISSAL_FORCED_DISEASE,s.DISMISSAL_FORCED_DEATH,s.DISMISSAL_FORCED_LOW_PERFORMANCE,s.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,s.DISMISSAL_FORCED_OTHERS],p.allDismissalReasons=[...g.voluntaryDismissalReasons,...g.forcedDismissalReasons],p.statusNameMap=new Map([[s.CANDIDATE,"Candidate"],[s.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED,"Candidate ended but not selected"],[s.CANDIDATE_ENDED_NOT_DESIRED,"Candidate not desired"],[s.ACTIVE,"Active"],[s.ENDED,"Ended"],[s.CHANGE_PROMOTION,"Promotion"],[s.CHANGE_LATERAL_MOVEMENT,"Lateral movement"],[s.CHANGE_TRANSFER_SAME_POSITION,"Transfer same position"],[s.CHANGE_TRANSFER_PROMOTION,"Transfer promotion"],[s.DISMISSAL_VOLUNTARY_ABSENTEEISM,"Absenteeism"],[s.DISMISSAL_VOLUNTARY_ABANDONMENT,"Abandonment"],[s.DISMISSAL_VOLUNTARY_RETIREMENT,"Retirement"],[s.DISMISSAL_VOLUNTARY_BETTER_OFFER,"Better offer"],[s.DISMISSAL_VOLUNTARY_PERSONAL,"Personal"],[s.DISMISSAL_FORCED_END_OF_CONTRACT,"End of contract"],[s.DISMISSAL_FORCED_DISEASE,"Disease"],[s.DISMISSAL_FORCED_DEATH,"Death"],[s.DISMISSAL_FORCED_LOW_PERFORMANCE,"Low performance"],[s.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,"Inapropiate behaviors"],[s.DISMISSAL_FORCED_OTHERS,"Other"]]);let U=(()=>{class e{constructor(o){this.http=o,this.serverUrl=O.N.v2apiServer}static formatDates(o){return{...o,...o.from?{from:new Date(o.from)}:{},...o.until?{until:new Date(o.until)}:{}}}createEmploymentRecord(o,u,A,T,R){return(0,d.z)(this.http.post(this.serverUrl+"employment/",{job:o,talent:u,status:A,from:T.toISOString(),...R?{allowMultiple:R}:{}}).pipe((0,c.U)(S=>e.formatDates(S))))}getActiveEmploymentForTalent(o){return(0,d.z)(this.http.get(this.serverUrl+"employment/active/"+o).pipe((0,c.U)(u=>u?e.formatDates(u):null)))}getRelevantEmploymentForReview(o,u){return(0,d.z)(this.http.get(this.serverUrl+"employment/relevant/"+o+"/"+u).pipe((0,c.U)(A=>A?e.formatDates(A):null)))}getEmploymentsForTalent(o){return(0,d.z)(this.http.get(this.serverUrl+"employment/talent/"+o).pipe((0,c.U)(u=>u.map(A=>e.formatDates(A)))))}editEmployment(o,u,A,T,R){return(0,d.z)(this.http.put(this.serverUrl+"employment/"+o,{from:u.toISOString(),...void 0!==A?{status:A}:{},...void 0!==T?{until:T}:{},...void 0!==R?{notes:R}:{}}).pipe((0,c.U)(S=>e.formatDates(S))))}endEmployment(o,u,A,T){return(0,d.z)(this.http.put(this.serverUrl+"employment/"+o,{status:u,until:A.toISOString(),...T?{notes:T}:{}}).pipe((0,c.U)(R=>e.formatDates(R))))}}return e.\u0275fac=function(o){return new(o||e)(D.LFG(I.eN))},e.\u0275prov=D.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9649:(F,C,r)=>{r.d(C,{C:()=>s});var d=r(3905),c=r(4004),O=r(2340),D=r(2027),I=r(1571),g=r(529);let s=(()=>{class p{constructor(e){this.http=e,this.serverUrl=O.N.apiServer,this.v2serverUrl=O.N.v2apiServer}convertDob(e){return{...e,...e.dob?{dateOfBirth:new D.p({values:{year:e.dob?.year,month:e.dob?.month,day:e.dob?.day}})}:{}}}convertToDto(e,l){const o=new Date(e.dobDate);return{givenName:e.firstNames,lastName:e.lastNames,languages:e.languages,nationality:e.nationality,mobility:e.mobility,dobDay:o.getDate(),dobMonth:o.getMonth()+1,dobYear:o.getFullYear(),...l?.email?{email:l?.email}:{},...l?.role?{role:l?.role}:{}}}findTalentsFilterSearch(e,l,o,u,A,T,R,S,P,t){const x={params:{count:e,page:l}};let L={...S?{area:S}:{},...P?{department:P}:{},...t?{name:t}:{}},b={...T?{country:T}:{},...R?{name:R}:{}},y={...u?{cycleId:u}:{},...A?{mapPlacement:A}:{}};const V={...o?{searchTerm:o}:{},...Object.keys(L).length?{positionFilter:L}:{},...Object.keys(b).length?{propertyFilter:b}:{},...Object.keys(y).length?{reviewFilter:y}:{}};return(0,d.z)(this.http.post(this.v2serverUrl+"talent-finder",V,x).pipe(w=>w))}checkEmailAvailability(e){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/email/"+e).pipe(l=>l))}getTalent(e){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/"+e).pipe((0,c.U)(l=>({talent:this.convertDob(l)}))))}createTalent(e,l){return(0,d.z)(this.http.post(this.v2serverUrl+"talent",this.convertToDto(e,l)).pipe((0,c.U)(o=>({talent:this.convertDob(o)}))))}createTalentAccount(e,l){return(0,d.z)(this.http.post(this.v2serverUrl+"talent/"+e+"/account",l).pipe((0,c.U)(o=>({talent:this.convertDob(o)}))))}createLegacyWorkInfo(e,l){return(0,d.z)(this.http.put(this.v2serverUrl+"talent/legacy-work/"+e,l).pipe((0,c.U)(o=>({talent:this.convertDob(o)}))))}getTalentByAccount(e){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/account/"+e).pipe((0,c.U)(l=>({talent:this.convertDob(l)}))))}editTalent(e,l){return(0,d.z)(this.http.put(this.v2serverUrl+"talent/"+e,this.convertToDto(l)).pipe((0,c.U)(o=>({talent:this.convertDob(o)}))))}revokeTalentsAccount(e){return(0,d.z)(this.http.put(this.v2serverUrl+"talent/revoke-access/"+e,{}).pipe((0,c.U)(l=>({talent:this.convertDob(l)}))))}getSupportedCountries(){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/countries/").pipe((0,c.U)(e=>({countries:e}))))}getSupportedLanguages(){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/languages/").pipe((0,c.U)(e=>({languages:e}))))}}return p.\u0275fac=function(e){return new(e||p)(I.LFG(g.eN))},p.\u0275prov=I.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},4053:(F,C,r)=>{r.d(C,{U:()=>s});var d=r(3905),c=r(4004),O=r(2340),D=r(9147),I=r(1571),g=r(529);let s=(()=>{class p{constructor(e){this.http=e,this.serverUrl=O.N.v2apiServer}getTeamByLeader(e){return(0,d.z)(this.http.get(this.serverUrl+"team/"+e).pipe((0,c.U)(l=>({...l,...l.employment?{employment:D.Ib.formatDates(l.employment)}:{},teamMembers:l.teamMembers.map(o=>({...o,...o.employment?{employment:D.Ib.formatDates(o.employment)}:{}}))}))))}getRelevantJobByTalent(e){return(0,d.z)(this.http.get(this.serverUrl+"team/relevant-job/"+e).pipe((0,c.U)(l=>l)))}getTopMostJobInHierarchy(){return(0,d.z)(this.http.get(this.serverUrl+"team/top-most-job/").pipe((0,c.U)(e=>e)))}addEndedEmployment(e,l,o,u,A,T,R){return(0,d.z)(this.http.post(this.serverUrl+"team/ended-employment",{title:void 0,leaderJob:void 0,property:e,position:l,talent:o,status:u,from:A,until:T,...R?{notes:R}:{}}).pipe((0,c.U)(S=>S)))}addJob(e,l,o){return(0,d.z)(this.http.post(this.serverUrl+"job/",{leader:e,property:l,position:o}).pipe((0,c.U)(u=>u)))}removeJob(e){return(0,d.z)(this.http.delete(this.serverUrl+"job/"+e).pipe((0,c.U)(l=>l)))}getOwnActiveResponsibiliy(){return(0,d.z)(this.http.get(this.serverUrl+"team/active-responsibility/").pipe((0,c.U)(e=>e)))}}return p.\u0275fac=function(e){return new(e||p)(I.LFG(g.eN))},p.\u0275prov=I.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},5357:(F,C,r)=>{r.r(C),r.d(C,{TalentFinderModule:()=>ht});var d=r(6895),c=r(433),O=r(4789),D=r(5593),I=r(793),g=r(2320),s=r(7064),p=r(5861),U=r(727),e=r(7579),l=r(3905),o=r(4004),u=r(8372),A=r(5653),T=r(9766),R=r(2338),S=r(625),P=r(826),t=r(1571),x=r(171),L=r(1831),b=r(1505),y=r(4053),V=r(9649),w=r(797),W=r(917),B=r(4954),H=r(8254),z=r(4829),J=r(805),Z=r(3608);const j=["searchInput"];function G(i,v){if(1&i){const n=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){t.CHM(n);const E=t.oxw();return t.KtG(E.addReview())}),t._UZ(2,"i",20),t._uU(3),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("disabled",!n.selectedRows.length),t.xp6(2),t.hij(" Review selected (",n.selectedRows.length,") ")}}function Q(i,v){1&i&&(t.TgZ(0,"th"),t._UZ(1,"p-tableHeaderCheckbox"),t.qZA())}function K(i,v){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,Q,2,0,"th",15),t.TgZ(2,"th"),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Property"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Position"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Department"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Area"),t.qZA(),t._UZ(12,"th"),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.currentRWExists)}}function $(i,v){if(1&i&&t._UZ(0,"p-tableCheckbox",23),2&i){const n=t.oxw(2).$implicit;t.Q6J("value",n)}}function X(i,v){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,$,1,1,"p-tableCheckbox",22),t.qZA()),2&i){const n=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.canSelectTalent(n))}}const k=function(i){return["..","view",i]};function q(i,v){if(1&i&&t._UZ(0,"a",24),2&i){const n=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,k,n.talentId))}}function tt(i,v){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,X,2,1,"td",15),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t.YNc(13,q,1,3,"a",21),t.qZA()()),2&i){const n=v.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.currentRWExists),t.xp6(2),t.AsE("",(null==n.talentName?null:n.talentName.given)||""," ",(null==n.talentName?null:n.talentName.last)||"",""),t.xp6(2),t.Oqu(n.property||""),t.xp6(2),t.Oqu(n.position||""),t.xp6(2),t.Oqu(n.department||""),t.xp6(2),t.Oqu(n.area||""),t.xp6(2),t.Q6J("ngIf",a.canViewTalent(n))}}function et(i,v){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const n=t.oxw(2);t.xp6(1),t.hij("(",n.selectedRows.length," selected)")}}function nt(i,v){if(1&i&&(t.TgZ(0,"small"),t._uU(1),t.YNc(2,et,2,1,"span",15),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.hij("",n.total," total "),t.xp6(1),t.Q6J("ngIf",n.selectedRows.length)}}function it(i,v){if(1&i){const n=t.EpF();t.TgZ(0,"p-button",26),t.NdJ("click",function(){t.CHM(n);const E=t.oxw(2);return t.KtG(E.streamExcelFile())}),t.qZA()}}function rt(i,v){1&i&&t.YNc(0,it,1,0,"ng-template",25)}function at(i,v){if(1&i){const n=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(n);const E=t.oxw();return t.KtG(E.addReview())}),t._UZ(1,"i",20),t._uU(2),t.qZA()}if(2&i){const n=t.oxw();t.xp6(2),t.hij(" Review selected (",n.selectedRows.length,") ")}}function ot(i,v){1&i&&(t.TgZ(0,"p",28)(1,"strong"),t._uU(2,"Please note:"),t.qZA(),t._uU(3," Talents can only be selected if they don't have a review yet. To update a review, please contact your Keiro administrator."),t.qZA())}const st=function(){return[10,25,50]};var h=(()=>{return(i=h||(h={}))[i.REVIEW_CYCLE=0]="REVIEW_CYCLE",i[i.MAP_POSITION=1]="MAP_POSITION",i[i.COUNTRY=2]="COUNTRY",i[i.PROPERTY=3]="PROPERTY",i[i.AREA=4]="AREA",i[i.DEPARTMENT=5]="DEPARTMENT",i[i.POSITION=6]="POSITION",h;var i})();let dt=(()=>{class i{constructor(n,a,E,_,f,N,Y,m,pt,ut,Et,Tt){this.filterService=n,this.route=a,this.router=E,this.authStateService=_,this.store=f,this.talentService=N,this.teamService=Y,this.talentsManagementApi=m,this.locationsApi=pt,this.positionsApi=ut,this.reviewCycleServiceApi=Et,this.talentMapBoxesApi=Tt,this.canDownloadExcel=!1,this.total=0,this.page=0,this.step=25,this.rows=[],this.selectedRows=[],this.searchInputControl=new c.p4,this.loadingIndicator=!0,this.subscriptions=new U.w0,this.filterValue={},this.callTalentFinderSubject=new e.x,this.isRowSelectable=M=>this.canSelectTalent(M.data),this.subscriptions.add(this.callTalentFinderSubject.pipe((0,o.U)(M=>(this.loadingIndicator=!0,M)),(0,u.b)(150)).subscribe(()=>this.fetchTalentsWithSearch())),this.fetchLocations(),this.fetchPositions(),this.fetchCurrentReviewCycle(),this.fetchReviewWindows(),this.fetchTalentMapPositions(),this.fetchActiveResponsiblity(),this.subscriptions.add(this.authStateService.authState.subscribe(M=>{M.identity&&(this.currentUser=M.identity),this.canDownloadExcel=this.currentUser?.role==S.u.SUPER_ADMIN||this.currentUser?.role==S.u.ADMIN})),this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,u.b)(250)).subscribe(M=>{this.searchInputControl.valid&&(this.callTalentFinderSubject.next(void 0),this.router.navigate([],{relativeTo:this.route,queryParams:{q:encodeURIComponent(M)},queryParamsHandling:"merge",replaceUrl:!0}))}))}ngOnInit(){(0,l.z)(this.route.queryParams).then(n=>{if(n.f){const a=R.F.decodeURLParamToObject(n.f);this.filterService.addFilterValues(a)}if(n.q){const a=decodeURIComponent(n.q);this.searchInputControl.setValue(a)}}),this.filterService.valueChange.subscribe(n=>{const a=this.filterValue;this.filterValue=n,this.callTalentFinderSubject.next(void 0),this.router.navigate([],{relativeTo:this.route,queryParams:{f:R.F.encodeObjectToURLParam(n)},queryParamsHandling:"merge",replaceUrl:!0}),(this.filterValue.country!=a.country||this.filterValue.location!=a.location)&&this.fetchLocations(),(this.filterValue.area!=a.area||this.filterValue.department!=a.department||this.filterValue.position!=a.position)&&this.fetchPositions()})}ngAfterViewInit(){this.input?.nativeElement.focus()}ngOnDestroy(){this.subscriptions.unsubscribe()}streamExcelFile(){this.talentService.downloadFileStream({windowRId:this.filterValue?.windowRId,boxPosition:this.filterValue?.boxPosition,country:this.filterValue?.country,location:this.filterValue?.location,area:this.filterValue?.area,department:this.filterValue?.department,position:this.filterValue?.position,search:this.searchInputControl?.value})}onSelectionChange(n){this.selectedRows=n}setPage(n){this.step=n.rows,this.page=Math.floor(n.first/n.rows),this.callTalentFinderSubject.next(void 0)}canSelectTalent(n){let a=this.currentUserResponsibility?.activeJob?this.currentUserResponsibility?.activeJob.property._id:this.currentUser?.talent?.location;return!(!this.currentRWExists||this.currentReviewCycle?._id&&n.reviewedDuringCycles?.includes(this.currentReviewCycle._id)||this.currentUser?.role===S.u.EMPLOYEE&&this.currentUser?.id===n.talentId||(this.currentUser?.role===S.u.EMPLOYEE||this.currentUser?.role===S.u.MANAGER)&&a!==n.propertyId)}canViewTalent(n){return!0}onSelect(n){const a=n.selected;this.selectedRows.splice(0,this.selectedRows.length),this.selectedRows.push(...a)}addReview(){this.store.dispatch((0,P.KD)({talents:this.selectedRows})),this.router.navigate(["app","review","create"])}fetchTalentsWithSearch(){this.loadingIndicator=!0,this.talentsManagementApi.findTalentsFilterSearch(this.step,this.page+1,this.searchInputControl?.value,this.filterValue?.windowRId,this.filterValue?.boxPosition,this.filterValue?.country,this.filterValue?.location,this.filterValue?.area,this.filterValue?.department,this.filterValue?.position).then(n=>{this.rows=n.talents,this.total=n.total}).finally(()=>{this.loadingIndicator=!1})}fetchLocations(){this.locationsApi.findDistinctLocations(this.filterValue.country||void 0,this.filterValue.location||void 0).then(n=>{const a=this.filterService.getMetadataWithId(h.COUNTRY.toString()),E=n.countries.map(N=>({name:N,value:N}));a.options=E;const _=this.filterService.getMetadataWithId(h.PROPERTY.toString()),f=n.properties.map(N=>({name:N,value:N}));_.options=f}).catch(n=>{console.error(n)})}fetchPositions(){this.positionsApi.findDistinctPositions(this.filterValue.area||void 0,this.filterValue.department||void 0,this.filterValue.position||void 0).then(n=>{const a=this.filterService.getMetadataWithId(h.AREA.toString()),E=n.areas.map(m=>({name:m,value:m}));a.options=E;const _=this.filterService.getMetadataWithId(h.DEPARTMENT.toString()),f=n.departments.map(m=>({name:m,value:m}));_.options=f;const N=this.filterService.getMetadataWithId(h.POSITION.toString()),Y=n.positions.map(m=>({name:m,value:m}));N.options=Y}).catch(n=>{console.error(n)})}fetchReviewWindows(){this.reviewCycleServiceApi.getAllReviewCycles().then(n=>{const a=this.filterService.getMetadataWithId(h.REVIEW_CYCLE.toString()),E=n.reviewCycles.sort((_,f)=>Date.parse(f.startDate)-Date.parse(_.startDate)).map(_=>({name:_.name,value:_._id}));a.options=E,!this.filterValue.windowRId&&a?.required&&this.filterService.addFilterWithId(h.REVIEW_CYCLE.toString(),E[0]?.value)}).catch(n=>{console.error(n)})}fetchCurrentReviewCycle(){this.reviewCycleServiceApi.getCurrentReviewCycle().then(n=>{this.currentReviewCycle=n.reviewCycle?n.reviewCycle:void 0,this.currentRWExists=void 0!==this.currentReviewCycle}).catch(n=>{console.error(n)})}fetchTalentMapPositions(){this.talentMapBoxesApi.getBoxes().then(n=>{const a=this.filterService.getMetadataWithId(h.MAP_POSITION.toString()),E=n.boxes.sort((_,f)=>_.title[_.title.length-1]-f.title[f.title.length-1]).map(_=>({name:_.title,value:""+_.pos}));a.options=E}).catch(n=>{console.error(n)})}fetchActiveResponsiblity(){var n=this;return(0,p.Z)(function*(){n.currentUserResponsibility=yield n.teamService.getOwnActiveResponsibiliy()})()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(A.i),t.Y36(O.gz),t.Y36(O.F0),t.Y36(x.V),t.Y36(L.yh),t.Y36(b.C),t.Y36(y.U),t.Y36(V.C),t.Y36(w._),t.Y36(W.m),t.Y36(B.m),t.Y36(H.M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-talent-finder"]],viewQuery:function(n,a){if(1&n&&t.Gf(j,5),2&n){let E;t.iGM(E=t.CRH())&&(a.input=E.first)}},features:[t._Bn([{provide:"filterConfiguration",useValue:{dropdownOptions:[{id:h.COUNTRY.toString(),name:"Country"},{id:h.PROPERTY.toString(),name:"Property"},{id:h.AREA.toString(),name:"Area"},{id:h.DEPARTMENT.toString(),name:"Department"},{id:h.POSITION.toString(),name:"Position"},{id:h.REVIEW_CYCLE.toString(),name:"Review cycle"},{id:h.MAP_POSITION.toString(),name:"Talent Map placement"}],filtersMetadata:[{id:h.REVIEW_CYCLE.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Review Cycle",key:"windowRId",group:"Evaluation",children:[{id:h.MAP_POSITION.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Talent Map Placement",key:"boxPosition",group:"Evaluation"}]},{id:h.AREA.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Area",key:"area",group:"Job description",groupOrder:1},{id:h.DEPARTMENT.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Department",key:"department",group:"Job description",groupOrder:2},{id:h.POSITION.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Position",key:"position",group:"Job description",groupOrder:3},{id:h.COUNTRY.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Country",key:"country",group:"Location",groupOrder:1},{id:h.PROPERTY.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Property",key:"location",group:"Location",groupOrder:2}]}},{provide:A.i}])],decls:20,vars:17,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-body"],[1,"form-row","justify-content-end"],[1,"col","mb-1"],[1,"has-search"],[1,"fa","fa-search","has-search-icon"],["type","text","placeholder","Search by name, email, or Keiro ID",1,"form-control",3,"formControl"],["searchInput",""],["class","col-12 col-sm-auto text-right mb-1",4,"ngIf"],[1,"d-block","mb-2",3,"service"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","selection","selectionPageOnly","rowSelectable","onLazyLoad","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],[4,"ngIf"],["class","btn btn-primary","title","Select some talents to add reviews",3,"click",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"col-12","col-sm-auto","text-right","mb-1"],["title","Select some talents to add reviews",1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-chart-line","mr-1"],["pButton","","class","p-button-rounded p-button-secondary","icon","fa fa-external-link-alt",3,"routerLink",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value"],["pButton","","icon","fa fa-external-link-alt",1,"p-button-rounded","p-button-secondary",3,"routerLink"],["pTemplate","paginatorright"],["icon","fa fa-file-excel","styleClass","p-button-outlined","type","button","pTooltip","Download as Excel file","tooltipPosition","left",3,"click"],["title","Select some talents to add reviews",1,"btn","btn-primary",3,"click"],[1,"mt-2"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),t._uU(4,"Talent Finder"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5),t._UZ(8,"span",6)(9,"input",7,8),t.qZA()(),t.YNc(11,G,4,2,"div",9),t.qZA(),t._UZ(12,"alasta-filters-list",10),t.TgZ(13,"p-table",11),t.NdJ("onLazyLoad",function(_){return a.setPage(_)})("selectionChange",function(_){return a.onSelectionChange(_)}),t.YNc(14,K,13,1,"ng-template",12),t.YNc(15,tt,14,8,"ng-template",13),t.YNc(16,nt,3,2,"ng-template",14),t.YNc(17,rt,1,0,null,15),t.qZA(),t.YNc(18,at,3,1,"button",16),t.YNc(19,ot,4,0,"p",17),t.qZA()()()),2&n&&(t.xp6(9),t.Q6J("formControl",a.searchInputControl),t.xp6(2),t.Q6J("ngIf",a.currentRWExists&&a.selectedRows.length),t.xp6(1),t.Q6J("service",a.filterService),t.xp6(1),t.Q6J("value",a.rows)("lazy",!0)("loading",a.loadingIndicator)("paginator",!0)("rows",a.step)("totalRecords",a.total)("rowsPerPageOptions",t.DdM(16,st))("selection",a.selectedRows)("selectionPageOnly",!0)("rowSelectable",a.isRowSelectable),t.xp6(4),t.Q6J("ngIf",a.canDownloadExcel),t.xp6(1),t.Q6J("ngIf",a.currentRWExists&&a.selectedRows.length),t.xp6(1),t.Q6J("ngIf",a.currentRWExists))},dependencies:[O.yS,d.O5,c.Fj,c.JJ,c.oH,z.a,I.iA,J.jx,I.UA,I.Mo,D.Hq,D.zx,Z.u],styles:[".has-search[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%] > .has-search-icon[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}"]}),i})(),ht=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[O.Bz.forChild([{path:"",component:dt}]),d.ez,c.UX,g.z8.forRoot(),s.i,I.U$,D.hJ,Z.z]}),i})()}}]);