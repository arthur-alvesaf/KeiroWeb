"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[441],{4954:(B,Z,d)=>{d.d(Z,{m:()=>w});var f=d(3905),u=d(4004),o=d(262),D=d(2340),y=d(2027),M=d(5e3),x=d(520);let w=(()=>{class m{constructor(e){this.http=e,this.serverUrl=D.N.apiServer,this.serverV2Url=D.N.v2apiServer}findReviewWindows(){return this.http.get(this.serverUrl+"window").pipe((0,u.U)(e=>({reviewWindows:e.windows})),(0,o.K)(e=>(console.error(e.error),[])))}getProgressBarStats(e,r){return(0,f.z)(this.http.put(this.serverV2Url+"statistics/progress-bar/"+e,r).pipe((0,u.U)(h=>Object.assign(Object.assign({},h),{reviewCycle:m.formatDates(h.reviewCycle)}))))}static formatDates(e){if(e)return Object.assign(Object.assign(Object.assign({},e),e.startDate?{startDate:new y.p({ISODateString:e.startDate})}:{}),e.endDate?{endDate:new y.p({ISODateString:e.endDate})}:{})}getAllReviewCycles(){return(0,f.z)(this.http.get(this.serverV2Url+"review-cycle").pipe((0,u.U)(e=>({reviewCycles:e.map(r=>m.formatDates(r))}))))}getCurrentReviewCycle(){return(0,f.z)(this.http.get(this.serverV2Url+"review-cycle/current").pipe((0,u.U)(e=>({reviewCycle:m.formatDates(e)}))))}createReviewCycle(e){return(0,f.z)(this.http.post(this.serverV2Url+"review-cycle",Object.assign(Object.assign(Object.assign({},e.name?{name:e.name}:{}),e.startDate?{startDate:e.startDate}:{}),e.endDate?{endDate:e.endDate}:{})).pipe((0,u.U)(r=>m.formatDates(r))))}editReviewCycle(e){return(0,f.z)(this.http.put(this.serverV2Url+"review-cycle/"+e._id,Object.assign(Object.assign(Object.assign({},e.name?{name:e.name}:{}),e.startDate?{startDate:e.startDate}:{}),e.endDate?{endDate:e.endDate}:{})).pipe((0,u.U)(r=>m.formatDates(r))))}deleteReviewCycle(e){return(0,f.z)(this.http.delete(this.serverV2Url+"review-cycle/"+e).pipe((0,u.U)(r=>r)))}}return m.\u0275fac=function(e){return new(e||m)(M.LFG(x.eN))},m.\u0275prov=M.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6441:(B,Z,d)=>{d.r(Z),d.d(Z,{ReviewsModule:()=>ie});var f=d(9808),u=d(2382),o=d(3489),D=d(7531),y=d(7311),M=d(5350),x=d(1217),w=d(5652),m=d(1424),U=d(9014),e=d(5e3);function r(a,p){1&a&&(e.TgZ(0,"span"),e._uU(1,"Add "),e.qZA())}function h(a,p){1&a&&(e.TgZ(0,"span"),e._uU(1,"Edit "),e.qZA())}function n(a,p){if(1&a&&(e.TgZ(0,"div",13),e.TgZ(1,"form",14),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e.TgZ(4,"h6",17),e._uU(5,"Review cycle name"),e.qZA(),e.TgZ(6,"div",18),e._UZ(7,"input",19),e.qZA(),e.qZA(),e.TgZ(8,"div",16),e.TgZ(9,"h6",17),e._uU(10,"Cycle Start Date"),e.qZA(),e.TgZ(11,"div",18),e._UZ(12,"p-calendar",20),e.qZA(),e.qZA(),e.TgZ(13,"div",16),e.TgZ(14,"h6",17),e._uU(15,"Cycle End Date"),e.qZA(),e.TgZ(16,"div",18),e._UZ(17,"p-calendar",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.addEditForm),e.xp6(11),e.Q6J("showIcon",!0)("minDate",t.today)("disabled",t.hasStarted),e.xp6(5),e.Q6J("showIcon",!0)("minDate",t.today)}}function c(a,p){if(1&a){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.processing=!0,s.onDeleteClick.emit()}),e._UZ(1,"i",23),e._uU(2," Delete "),e.qZA()}}function S(a,p){1&a&&(e.TgZ(0,"span"),e._uU(1,"Add new cycle"),e.qZA())}function k(a,p){1&a&&(e.TgZ(0,"span"),e._uU(1,"Update cycle details"),e.qZA())}let J=(()=>{class a{constructor(t){this.fb=t,this.addingReviewCycle=!0,this.hasStarted=!1,this.canBeDeleted=!1,this.processing=!1,this.onSumbit=new e.vpe,this.onCloseModal=new e.vpe,this.onDeleteClick=new e.vpe,this.today=new Date}ngOnInit(){var t,i,s,l;this.addEditForm=this.fb.group({name:[null===(t=this.existing)||void 0===t?void 0:t.name,u.kI.required],startDate:[null===(i=this.existing)||void 0===i?void 0:i.startDate.date,u.kI.required],endDate:[null===(s=this.existing)||void 0===s?void 0:s.endDate.date,u.kI.required]}),(null===(l=this.existing)||void 0===l?void 0:l._id)&&(this.addingReviewCycle=!1,this.hasStarted=!!this.existing.hasStarted&&this.existing.hasStarted,this.canBeDeleted=!this.hasStarted)}getFormValue(){var t,i,s,l,v,C,g,b,E,T,A,R;let q=null===(t=this.addEditForm)||void 0===t?void 0:t.value.name,P=null===(i=this.addEditForm)||void 0===i?void 0:i.value.startDate,O=null===(s=this.addEditForm)||void 0===s?void 0:s.value.endDate;return O.setHours(23),O.setMinutes(59),Object.assign(Object.assign(Object.assign(Object.assign({},(null===(l=this.existing)||void 0===l?void 0:l._id)?{_id:null===(v=this.existing)||void 0===v?void 0:v._id}:{}),(null===(C=this.existing)||void 0===C?void 0:C.name)===q?{}:{name:q}),(null===(E=null===(b=null===(g=this.existing)||void 0===g?void 0:g.startDate)||void 0===b?void 0:b.date)||void 0===E?void 0:E.valueOf())===(null==P?void 0:P.valueOf())?{}:{startDate:P}),(null===(R=null===(A=null===(T=this.existing)||void 0===T?void 0:T.endDate)||void 0===A?void 0:A.date)||void 0===R?void 0:R.valueOf())===(null==O?void 0:O.valueOf())?{}:{endDate:O})}clearTalentFromForm(){var t,i,s,l,v,C,g,b,E,T,A,R;null===(i=null===(t=this.addEditForm)||void 0===t?void 0:t.get("name"))||void 0===i||i.setValue(null),null===(l=null===(s=this.addEditForm)||void 0===s?void 0:s.get("name"))||void 0===l||l.markAsPristine(),null===(C=null===(v=this.addEditForm)||void 0===v?void 0:v.get("startDate"))||void 0===C||C.setValue(null),null===(b=null===(g=this.addEditForm)||void 0===g?void 0:g.get("startDate"))||void 0===b||b.markAsPristine(),null===(T=null===(E=this.addEditForm)||void 0===E?void 0:E.get("endDate"))||void 0===T||T.setValue(null),null===(R=null===(A=this.addEditForm)||void 0===A?void 0:A.get("endDate"))||void 0===R||R.markAsPristine()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(u.qu))},a.\u0275cmp=e.Xpm({type:a,selectors:[["reviews-add-edit-review-cycle-modal"]],inputs:{existing:"existing",processing:"processing"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal",onDeleteClick:"onDeleteClick"},decls:20,vars:7,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-edit"],[1,"modal-body"],[3,"formGroup"],[1,"form-row"],[1,"col-12"],[1,"mb-0"],[1,"p-fluid"],["type","text","pInputText","","formControlName","name"],["formControlName","startDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","minDate","disabled"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","minDate"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-trash-alt"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e.TgZ(2,"span"),e.YNc(3,r,2,0,"span",2),e.YNc(4,h,2,0,"span",2),e._uU(5," Review Cycle "),e.qZA(),e.qZA(),e.TgZ(6,"button",3),e.NdJ("click",function(l){return i.onCloseModal.emit(l)}),e.TgZ(7,"span",4),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,n,18,6,"div",5),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.YNc(12,c,3,0,"button",8),e.TgZ(13,"button",9),e.NdJ("click",function(l){return i.clearTalentFromForm(),i.onCloseModal.emit(l)}),e._UZ(14,"i",10),e._uU(15," Cancel "),e.qZA(),e.TgZ(16,"button",11),e.NdJ("click",function(){return i.processing=!0,i.onSumbit.emit(i.getFormValue())}),e._UZ(17,"i",12),e.YNc(18,S,2,0,"span",2),e.YNc(19,k,2,0,"span",2),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",i.addingReviewCycle),e.xp6(1),e.Q6J("ngIf",!i.addingReviewCycle),e.xp6(5),e.Q6J("ngIf",i.addEditForm),e.xp6(3),e.Q6J("ngIf",i.canBeDeleted),e.xp6(4),e.Q6J("disabled",(null==i.addEditForm?null:i.addEditForm.invalid)||(null==i.addEditForm?null:i.addEditForm.pristine)),e.xp6(2),e.Q6J("ngIf",i.addingReviewCycle),e.xp6(1),e.Q6J("ngIf",!i.addingReviewCycle))},directives:[f.O5,u._Y,u.JL,u.sg,u.Fj,m.o,u.JJ,u.u,w.f],styles:[""]}),a})();var N=d(727),Y=d(8372),I=d(2027),j=d(4954),Q=d(2733),K=d(9783),L=d(171);function W(a,p){if(1&a&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e._UZ(2,"app-shared-review-cycle-progress",12),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("reviewCycle",null==t.progressBarStats?null:t.progressBarStats.reviewCycle)("totalPossibleReviews",null==t.progressBarStats?null:t.progressBarStats.totalPossibleReviews)("completedReviews",null==t.progressBarStats?null:t.progressBarStats.completedReviews)}}function V(a,p){if(1&a){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(),l=e.MAs(23);return s.targetReviewCycle=void 0,s.modalsController.openModal(l)}),e._UZ(2,"i",15),e._uU(3," Add new Review Cycle "),e.qZA(),e.qZA()}}function H(a,p){1&a&&(e.TgZ(0,"div",16),e.TgZ(1,"h6"),e._uU(2,"More"),e.qZA(),e.qZA())}function z(a,p){1&a&&(e.TgZ(0,"span",18),e._uU(1,"Current Cycle"),e.qZA())}function $(a,p){if(1&a){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).$implicit,l=e.oxw(),v=e.MAs(23);return l.targetReviewCycle=s,l.modalsController.openModal(v)}),e._UZ(1,"i",21),e._uU(2," Edit "),e.qZA()}}function X(a,p){if(1&a&&(e.TgZ(0,"div",16),e.YNc(1,$,3,0,"button",19),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.canBeEdited)}}function G(a,p){if(1&a&&(e.TgZ(0,"div",4),e.TgZ(1,"div",7),e.TgZ(2,"p"),e._uU(3),e.YNc(4,z,2,0,"span",17),e.qZA(),e.qZA(),e.TgZ(5,"div",8),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.YNc(11,X,2,1,"div",9),e.qZA()),2&a){const t=p.$implicit,i=e.oxw();e.xp6(3),e.hij(" ",t.name||"None on file"," "),e.xp6(1),e.Q6J("ngIf",t.hasStarted&&!t.hasEnded),e.xp6(3),e.AsE("",t.startDate||"None on file"," - ",t.startDate.displayTime(),""),e.xp6(3),e.AsE("",t.endDate||"None on file"," - ",t.endDate.displayTime(),""),e.xp6(1),e.Q6J("ngIf",i.canAddEditReviewCycles)}}function ee(a,p){if(1&a){const t=e.EpF();e.TgZ(0,"reviews-add-edit-review-cycle-modal",22),e.NdJ("onSumbit",function(s){return e.CHM(t),e.oxw().handleAddEditSubmission(s)})("onCloseModal",function(){return e.CHM(t),e.oxw().modalsController.closeUpperModal()})("onDeleteClick",function(){e.CHM(t);const s=e.oxw();return s.handleDelete(null==s.targetReviewCycle?null:s.targetReviewCycle._id)}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("existing",t.targetReviewCycle)("processing",t.processingModalRequest)}}var _=(()=>{return(a=_||(_={}))[a.CREATE=0]="CREATE",a[a.EDIT=1]="EDIT",a[a.DELETE=2]="DELETE",_;var a})();let F=(()=>{class a{constructor(t,i,s,l,v){this.reviewCycleServiceApi=t,this.modalsController=i,this.messageService=s,this.router=l,this.authStateService=v,this.subscriptions=new N.w0,this.today=new I.p,this.aMonthAgo=new I.p,this.canAddEditReviewCycles=!1,this.allReviewCycles=[],this.processingModalRequest=!1,this.searchInputControl=new u.NI,this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,Y.b)(350)).subscribe(C=>{this.searchInputControl.valid&&(console.log("New v2 calls"),this.fetchReviewCycles())})),this.subscriptions.add(this.authStateService.authState.subscribe(C=>{let g;C.identity&&(g=C.identity),this.canAddEditReviewCycles="SuperAdmin"==(null==g?void 0:g.role)||"Admin"==(null==g?void 0:g.role)})),this.progressBarStats={completedReviews:0,totalPossibleReviews:0}}ngOnInit(){this.today=new I.p,this.aMonthAgo=new I.p,this.aMonthAgo.date.setMonth(this.aMonthAgo.date.getMonth()-1),this.fetchCurrentReviewCycle(),this.fetchReviewCycles()}ngOnDestroy(){this.subscriptions.unsubscribe()}fetchCurrentReviewCycle(){this.reviewCycleServiceApi.getCurrentReviewCycle().then(t=>{var i,s;this.currentReviewCycle!==t.reviewCycle&&(this.currentReviewCycle=t.reviewCycle?t.reviewCycle:void 0,this.fetchReviewCycleStats((null===(i=this.currentReviewCycle)||void 0===i?void 0:i._id)?null===(s=this.currentReviewCycle)||void 0===s?void 0:s._id:""))}).catch(t=>{console.error(t)})}fetchReviewCycleStats(t){this.reviewCycleServiceApi.getProgressBarStats(t,{}).then(i=>{var s,l;(null===(s=i.reviewCycle)||void 0===s?void 0:s._id.toString())===(null===(l=this.currentReviewCycle)||void 0===l?void 0:l._id.toString())&&(this.progressBarStats.reviewCycle=i.reviewCycle,this.progressBarStats.completedReviews=i.completedReviews,this.progressBarStats.totalPossibleReviews=i.totalPossibleReviews)}).catch(i=>{console.error(i)})}fetchReviewCycles(){this.reviewCycleServiceApi.getAllReviewCycles().then(t=>{t.reviewCycles.length&&(this.allReviewCycles=[]);for(let i of t.reviewCycles){if(null===i._id)continue;const s={_id:i._id,name:i.name,org:i.org,startDate:i.startDate,endDate:i.endDate};s.hasStarted=s.startDate.date.valueOf()<this.today.date.valueOf(),s.hasEnded=s.endDate.date.valueOf()<this.today.date.valueOf(),s.canBeEdited=!1,s.hasStarted?s.endDate.date.valueOf()>this.aMonthAgo.date.valueOf()&&(s.canBeEdited=!0):s.canBeEdited=!0,this.allReviewCycles.push(s)}this.allReviewCycles=this.allReviewCycles.sort((i,s)=>i.startDate.date.valueOf()<s.endDate.date.valueOf()?1:-1)}).catch(t=>{console.error(t)})}handleAddEditSubmission(t){var i,s;let l,v=void 0!==(null===(i=this.targetReviewCycle)||void 0===i?void 0:i._id)?_.EDIT:_.CREATE,C=(null===(s=this.currentReviewCycle)||void 0===s?void 0:s._id)===(null==t?void 0:t._id);switch(v){case _.EDIT:l=this.reviewCycleServiceApi.editReviewCycle(t);break;case _.CREATE:l=this.reviewCycleServiceApi.createReviewCycle(t)}this.processingModalRequest=!0,l.then(g=>this.handleSuccessAddEdit(g,v,C)).catch(g=>this.handleErrorAddEdit(g,v)).finally(()=>{this.processingModalRequest=!1})}handleDelete(t){this.processingModalRequest=!0,this.reviewCycleServiceApi.deleteReviewCycle(t).then(i=>this.handleSuccessAddEdit(i,_.DELETE,!1)).catch(i=>this.handleErrorAddEdit(i,_.DELETE)).finally(()=>{this.processingModalRequest=!1})}handleSuccessAddEdit(t,i,s){let l;switch(i){case _.EDIT:l="Edited Review Cycle";break;case _.CREATE:l="Created new Review Cycle";break;case _.DELETE:l="Deleted Review Cycle"}this.messageService.add({severity:"success",summary:l,detail:"With title "+t.name,life:3e3}),s&&this.fetchCurrentReviewCycle(),this.fetchReviewCycles(),this.modalsController.closeAllModals()}handleErrorAddEdit(t,i){var s;let l,v;switch(i){case _.EDIT:l="Could not edit";break;case _.CREATE:l="Could not create";break;case _.DELETE:l="Could not delete"}switch(null===(s=t.message)||void 0===s?void 0:s.keiroError){case"KE060400":v="Review cycle does not exist";break;case"KE060401":v="The start date must be in the future";break;case"KE060402":v="The start date must be before the end date";break;case"KE060403":v="The dates cannot overlap with other review cycles";break;case"KE060404":v="The review cycle has already ended more than a month ago, it can no longer be modified";break;case"KE060405":v="The start date can't be modified because this review cycle has already begun";break;case"KE060406":v="The end date must be in the future";break;case"KE060407":v="The review cycle has already begun, it can no longer be deleted";break;default:v="Please retry",this.modalsController.closeAllModals()}this.messageService.add({severity:"error",summary:l,detail:v,life:4e3})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(j.m),e.Y36(Q.l),e.Y36(K.ez),e.Y36(y.F0),e.Y36(L.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-window"]],decls:24,vars:4,consts:[[1,"animated","fadeIn"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-auto"],["class","col text-right",4,"ngIf"],[1,"col-4","col-md-3"],[1,"col-3","col-md-3"],["class","col-2 col-md-3",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],["addEditWindowModal",""],["sectionHeader","Current Review Cycle",3,"reviewCycle","totalPossibleReviews","completedReviews"],[1,"col","text-right"],[1,"btn","btn-sm","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square"],[1,"col-2","col-md-3"],["class","badge badge-pill badge-primary",4,"ngIf"],[1,"badge","badge-pill","badge-primary"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[3,"existing","processing","onSumbit","onCloseModal","onDeleteClick"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,W,3,3,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h4"),e._uU(7,"All Review Cycles"),e.qZA(),e.qZA(),e.YNc(8,V,4,0,"div",6),e.qZA(),e.TgZ(9,"div"),e.TgZ(10,"div",4),e.TgZ(11,"div",7),e.TgZ(12,"h6"),e._uU(13,"Review cycle:"),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"h6"),e._uU(16,"Cycle start:"),e.qZA(),e.qZA(),e.TgZ(17,"div",8),e.TgZ(18,"h6"),e._uU(19,"Cycle end:"),e.qZA(),e.qZA(),e.YNc(20,H,3,0,"div",9),e.qZA(),e.YNc(21,G,12,7,"div",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(22,ee,1,2,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",i.currentReviewCycle),e.xp6(7),e.Q6J("ngIf",i.canAddEditReviewCycles),e.xp6(12),e.Q6J("ngIf",i.canAddEditReviewCycles),e.xp6(1),e.Q6J("ngForOf",i.allReviewCycles))},encapsulation:2}),a})();var te=d(9213);let ie=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[y.Bz.forChild([{path:"",component:F}]),f.ez,u.UX,M.nM,o.lN,D.c,x.HC.forRoot(),m.j,w._8,U.l]]}),a})();e.B6R(F,[f.O5,te.p,f.sg,J],[])},1217:(B,Z,d)=>{d.d(Z,{HC:()=>e,O1:()=>m});var f=d(4559),u=d(9808),o=d(5e3);function D(r,h){if(1&r&&(o.TgZ(0,"bar",2),o.Hsn(1),o.qZA()),2&r){const n=o.oxw();o.Q6J("type",n.type)("value",n._value)}}function y(r,h){if(1&r&&(o.TgZ(0,"bar",2),o._uU(1),o.qZA()),2&r){const n=h.$implicit;o.Q6J("type",n.type)("value",n.value),o.xp6(1),o.Oqu(n.label)}}function M(r,h){if(1&r&&o.YNc(0,y,2,3,"bar",3),2&r){const n=o.oxw();o.Q6J("ngForOf",n._value)}}const x=["*"];let w=(()=>{class r{constructor(){this.animate=!1,this.max=100}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac}),r})(),m=(()=>{class r{constructor(n){this.isStacked=!1,this.addClass=!0,this.bars=[],this._max=100,Object.assign(this,n)}set animate(n){this._animate=n,this.bars.forEach(c=>{c.animate=n})}set striped(n){this._striped=n,this.bars.forEach(c=>{c.striped=n})}set value(n){this.isStacked=Array.isArray(n),this._value=n}get isBs3(){return(0,f.XA)()}get max(){return this._max}set max(n){this._max=n,this.bars.forEach(c=>{c.recalculatePercentage()})}addBar(n){n.animate=this._animate,n.striped=this._striped,this.bars.push(n)}removeBar(n){this.bars.splice(this.bars.indexOf(n),1)}}return r.\u0275fac=function(n){return new(n||r)(o.Y36(w))},r.\u0275cmp=o.Xpm({type:r,selectors:[["progressbar"]],hostVars:3,hostBindings:function(n,c){2&n&&(o.uIk("max",c.max),o.ekj("progress",c.addClass))},inputs:{animate:"animate",striped:"striped",value:"value",max:"max",type:"type"},ngContentSelectors:x,decls:2,vars:2,consts:[[3,"type","value",4,"ngIf"],[3,"ngIf"],[3,"type","value"],[3,"type","value",4,"ngFor","ngForOf"]],template:function(n,c){1&n&&(o.F$t(),o.YNc(0,D,2,2,"bar",0),o.YNc(1,M,1,1,"ng-template",1)),2&n&&(o.Q6J("ngIf",!c.isStacked),o.xp6(1),o.Q6J("ngIf",c.isStacked))},directives:function(){return[u.O5,U,u.sg]},styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"]}),r})(),U=(()=>{class r{constructor(n,c,S){this.el=n,this.renderer=S,this.addClass=!0,this.percent=0,this.progress=c}get type(){return this._type}set type(n){this._type=n,this.applyTypeClasses()}get value(){return this._value}set value(n){!n&&0!==n||(this._value=n,this.recalculatePercentage())}get setBarWidth(){return this.recalculatePercentage(),this.percent}get isBs3(){return(0,f.XA)()}ngOnInit(){this.progress.addBar(this)}ngOnDestroy(){this.progress.removeBar(this)}recalculatePercentage(){this.percent=+(this.value/this.progress.max*100).toFixed(2);const n=this.progress.bars.reduce(function(c,S){return c+S.percent},0);n>100&&(this.percent-=n-100)}applyTypeClasses(){if(this._prevType){const c=`bg-${this._prevType}`;this.renderer.removeClass(this.el.nativeElement,`progress-bar-${this._prevType}`),this.renderer.removeClass(this.el.nativeElement,c),this._prevType=null}if(this._type){const c=`bg-${this._type}`;this.renderer.addClass(this.el.nativeElement,`progress-bar-${this._type}`),this.renderer.addClass(this.el.nativeElement,c),this._prevType=this._type}}}return r.\u0275fac=function(n){return new(n||r)(o.Y36(o.SBq),o.Y36(m,1),o.Y36(o.Qsj))},r.\u0275cmp=o.Xpm({type:r,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:15,hostBindings:function(n,c){2&n&&(o.uIk("aria-valuenow",c.value)("aria-valuetext",c.percent?c.percent.toFixed(0)+"%":"")("aria-valuemax",c.max),o.Udp("height","100","%")("width",c.setBarWidth,"%"),o.ekj("progress-bar-animated",!c.isBs3&&c.animate)("progress-bar-striped",c.striped)("active",c.isBs3&&c.animate)("progress-bar",c.addClass))},inputs:{type:"type",value:"value"},ngContentSelectors:x,decls:1,vars:0,template:function(n,c){1&n&&(o.F$t(),o.Hsn(0))},encapsulation:2}),r})(),e=(()=>{class r{static forRoot(){return{ngModule:r,providers:[w]}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[[u.ez]]}),r})()}}]);