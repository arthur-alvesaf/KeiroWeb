"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[721],{7721:(X,S,l)=>{l.r(S),l.d(S,{ReviewsModule:()=>Ee});var k=l(9808),n=l(2382),r=l(7322),J=l(7531),B=l(7311),P=l(5350),H=l(1217),Q=l(2236),M=l(1035),$=l(727),V=l(9300),o=l(2776),m=l(2027),i=l(1658),e=l(5e3),O=l(18),G=l(171),ee=l(921),te=l(6489);function ie(d,c){if(1&d&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e._UZ(2,"app-shared-review-window-progress",12),e.qZA(),e.qZA()),2&d){const t=e.oxw();e.xp6(2),e.Q6J("reviewWindow",t.currentReviewWindow)("totalTalents",t.totalTalents)("reviewedTalents",t.reviewedTalents)}}function ne(d,c){if(1&d){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(t);const u=e.oxw(),p=e.MAs(23);return u.addReviewWindowInfo(p)}),e._UZ(2,"i",15),e._uU(3," Add new Review Cycle "),e.qZA(),e.qZA()}}function de(d,c){1&d&&(e.TgZ(0,"div",16),e.TgZ(1,"h6"),e._uU(2,"More"),e.qZA(),e.qZA())}function oe(d,c){1&d&&(e.TgZ(0,"span",18),e._uU(1,"Curent Cycle"),e.qZA())}function re(d,c){if(1&d){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const u=e.oxw(2).$implicit,p=e.oxw(),h=e.MAs(23);return p.editReviewWindowInfo(h,u)}),e._UZ(1,"i",21),e._uU(2," Edit "),e.qZA()}}function ae(d,c){if(1&d&&(e.TgZ(0,"div",16),e.YNc(1,re,3,0,"button",19),e.qZA()),2&d){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.canBeEdited)}}function se(d,c){if(1&d&&(e.TgZ(0,"div",4),e.TgZ(1,"div",7),e.TgZ(2,"p"),e._uU(3),e.YNc(4,oe,2,0,"span",17),e.qZA(),e.qZA(),e.TgZ(5,"div",8),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.YNc(11,ae,2,1,"div",9),e.qZA()),2&d){const t=c.$implicit,a=e.oxw();e.xp6(3),e.hij(" ",t.name||"None on file"," "),e.xp6(1),e.Q6J("ngIf",t.hasStarted&&!t.hasEnded),e.xp6(3),e.AsE("",t.start||"None on file"," - ",t.start.displayTime(),""),e.xp6(3),e.AsE("",t.end||"None on file"," - ",t.end.displayTime(),""),e.xp6(1),e.Q6J("ngIf",a.canAddEditReviewCycles)}}function le(d,c){1&d&&(e.TgZ(0,"span"),e._uU(1,"Add "),e.qZA())}function ue(d,c){1&d&&(e.TgZ(0,"span"),e._uU(1,"Edit "),e.qZA())}function ve(d,c){if(1&d&&(e.TgZ(0,"alert",50),e._uU(1),e.qZA()),2&d){const t=e.oxw(3);e.Q6J("dismissible",!0),e.xp6(1),e.hij(" There was an error while trying to save the information: ",t.backendErrorMsg," ")}}function me(d,c){if(1&d&&(e.TgZ(0,"div"),e.TgZ(1,"mat-form-field",43),e.TgZ(2,"mat-label"),e._uU(3,"Hour"),e.qZA(),e._UZ(4,"input",51),e.TgZ(5,"mat-error"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"mat-form-field",43),e.TgZ(8,"mat-label"),e._uU(9,"Minute"),e.qZA(),e._UZ(10,"input",52),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(3);e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsHour.errors)),e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsMin.errors))}}function we(d,c){if(1&d&&(e.TgZ(0,"div"),e.TgZ(1,"mat-form-field",43),e.TgZ(2,"mat-label"),e._uU(3,"Hour"),e.qZA(),e._UZ(4,"input",53),e.TgZ(5,"mat-error"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"mat-form-field",43),e.TgZ(8,"mat-label"),e._uU(9,"Minute"),e.qZA(),e._UZ(10,"input",54),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(3);e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weHour.errors)),e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weMin.errors))}}function ce(d,c){if(1&d&&(e.TgZ(0,"div",35),e.TgZ(1,"form",36),e.YNc(2,ve,2,2,"alert",37),e.TgZ(3,"div",38),e.TgZ(4,"div",39),e.TgZ(5,"mat-form-field",40),e.TgZ(6,"mat-label"),e._uU(7,"Review cycle name"),e.qZA(),e._UZ(8,"input",41),e.TgZ(9,"mat-error"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",39),e.TgZ(12,"mat-label",42),e.TgZ(13,"small"),e._uU(14,"Cycle start date"),e.qZA(),e.qZA(),e.TgZ(15,"mat-form-field",43),e.TgZ(16,"mat-label"),e._uU(17,"Month"),e.qZA(),e._UZ(18,"input",44),e.TgZ(19,"mat-error"),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"mat-form-field",43),e.TgZ(22,"mat-label"),e._uU(23,"Day"),e.qZA(),e._UZ(24,"input",45),e.TgZ(25,"mat-error"),e._uU(26),e.qZA(),e.qZA(),e.TgZ(27,"mat-form-field",43),e.TgZ(28,"mat-label"),e._uU(29,"Year"),e.qZA(),e._UZ(30,"input",46),e.TgZ(31,"mat-error"),e._uU(32),e.qZA(),e.qZA(),e.YNc(33,me,13,6,"div",24),e.qZA(),e.TgZ(34,"div",39),e.TgZ(35,"mat-label",42),e.TgZ(36,"small"),e._uU(37,"Cycle end date"),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field",43),e.TgZ(39,"mat-label"),e._uU(40,"Month"),e.qZA(),e._UZ(41,"input",47),e.TgZ(42,"mat-error"),e._uU(43),e.qZA(),e.qZA(),e.TgZ(44,"mat-form-field",43),e.TgZ(45,"mat-label"),e._uU(46,"Day"),e.qZA(),e._UZ(47,"input",48),e.TgZ(48,"mat-error"),e._uU(49),e.qZA(),e.qZA(),e.TgZ(50,"mat-form-field",43),e.TgZ(51,"mat-label"),e._uU(52,"Year"),e.qZA(),e._UZ(53,"input",49),e.TgZ(54,"mat-error"),e._uU(55),e.qZA(),e.qZA(),e.YNc(56,we,13,6,"div",24),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.addEditReviewWindowForm),e.xp6(1),e.Q6J("ngIf",t.backendError),e.xp6(3),e.Udp("width",100,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).windowName.errors)),e.xp6(5),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsMonth.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsDay.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsYear.errors)),e.xp6(1),e.Q6J("ngIf",t.timeInput),e.xp6(5),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weMonth.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weDay.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weYear.errors)),e.xp6(1),e.Q6J("ngIf",t.timeInput)}}function pe(d,c){if(1&d){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sendDeleteWindowModal()}),e._UZ(1,"i",56),e._uU(2," Delete "),e.qZA()}}function he(d,c){1&d&&(e.TgZ(0,"span"),e._uU(1,"Add new cycle"),e.qZA())}function ge(d,c){1&d&&(e.TgZ(0,"span"),e._uU(1,"Update cycle details"),e.qZA())}function fe(d,c){if(1&d){const t=e.EpF();e.TgZ(0,"div",22),e.TgZ(1,"h4",23),e.TgZ(2,"span"),e.YNc(3,le,2,0,"span",24),e.YNc(4,ue,2,0,"span",24),e._uU(5," Review Cycle "),e.qZA(),e.qZA(),e.TgZ(6,"button",25),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return null==u.modalRef?null:u.modalRef.hide()}),e.TgZ(7,"span",26),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,ce,57,25,"div",27),e.TgZ(10,"div",28),e.TgZ(11,"div",29),e.YNc(12,pe,3,0,"button",30),e.TgZ(13,"button",31),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return null==u.modalRef?null:u.modalRef.hide()}),e._UZ(14,"i",32),e._uU(15," Cancel "),e.qZA(),e.TgZ(16,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().sendReviewWindowModal()}),e._UZ(17,"i",34),e.YNc(18,he,2,0,"span",24),e.YNc(19,ge,2,0,"span",24),e.qZA(),e.qZA(),e.qZA()}if(2&d){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.addEditReviewExtraInfo.create),e.xp6(1),e.Q6J("ngIf",!t.addEditReviewExtraInfo.create),e.xp6(5),e.Q6J("ngIf",t.addEditReviewWindowForm),e.xp6(3),e.Q6J("ngIf",t.addEditReviewExtraInfo.delete),e.xp6(4),e.Q6J("disabled",(null==t.addEditReviewExtraInfo?null:t.addEditReviewExtraInfo.processingForm)||(null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.invalid)||(null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.pristine)),e.xp6(2),e.Q6J("ngIf",1==t.addEditReviewExtraInfo.create),e.xp6(1),e.Q6J("ngIf",1!=t.addEditReviewExtraInfo.create)}}let _e=(()=>{class d{constructor(t,a,u,p,h,f,_){this.modalService=t,this.router=a,this.fb=u,this.authStateService=p,this.sessionStateService=h,this.store=f,this.actionDispatcher=_,this.canAddEditReviewCycles=!1,this.totalTalents=0,this.reviewedTalents=0,this.allWindows=[],this.timeInput=!1,this.subscriptions=new $.w0,this.backendError=!1,this.backendErrorMsg="",this.addEditReviewExtraInfo={create:!0,delete:!1,processingForm:!1},this.reviewWindow$=f.pipe((0,M.Ys)("reviewWindowState")),this.store.dispatch((0,o.Dz)()),this.store.dispatch((0,o.Km)()),this.subscriptions.add(this.sessionStateService.onSessionDestroyed.subscribe(s=>{this.modalRef&&this.modalRef.hide()})),this.subscriptions.add(this.authStateService.authState.subscribe(s=>{let v;s.identity&&(v=s.identity),this.canAddEditReviewCycles="SuperAdmin"==(null==v?void 0:v.role)||"Admin"==(null==v?void 0:v.role)})),this.subscriptions.add(this.reviewWindow$.subscribe(s=>{var v,Z,I;this.backendErrorMsg=null===(v=s.errorMessage)||void 0===v?void 0:v.error,this.totalTalents=s.talentsIgnoreReview?s.talentsIgnoreReview:0,this.reviewedTalents=s.reviewedTalents?s.reviewedTalents:0,this.currentReviewWindow!=s.currentWindowReview&&(this.currentReviewWindow=s.currentWindowReview?s.currentWindowReview:void 0,this.store.dispatch((0,o.v2)({windowRId:(null===(Z=this.currentReviewWindow)||void 0===Z?void 0:Z.id)?null===(I=this.currentReviewWindow)||void 0===I?void 0:I.id:""})));let T=new m.p,R=new m.p;R.date.setMonth(R.date.getMonth()-1),s.allWindows.length&&(this.allWindows=[]);for(let g of s.allWindows){if(null==g._id)continue;let w={id:"",name:"",start:null,end:null,hasStarted:!1,hasEnded:!1,canBeEdited:!1};w.id=g._id,w.name=g.name,w.start=new m.p({ISODateString:g.startDate}),w.end=new m.p({ISODateString:g.endDate}),w.hasStarted=w.start.date.valueOf()<T.date.valueOf(),w.hasEnded=w.end.date.valueOf()<T.date.valueOf(),w.hasStarted?w.end.date.valueOf()>R.date.valueOf()&&(w.canBeEdited=!0):w.canBeEdited=!0,this.allWindows.push(w)}this.allWindows=this.allWindows.sort((g,w)=>g.start.date.valueOf()<w.end.date.valueOf()?1:-1)})),this.subscriptions.add(this.actionDispatcher.pipe((0,V.h)(s=>[o.UD.CREATE_REVIEW_WINDOW_SUCCESS,o.UD.CREATE_REVIEW_WINDOW_FAILURE,o.UD.EDIT_REVIEW_WINDOW_SUCCESS,o.UD.EDIT_REVIEW_WINDOW_FAILURE,o.UD.DELETE_REVIEW_WINDOW_SUCCESS,o.UD.DELETE_REVIEW_WINDOW_FAILURE].includes(s.type))).subscribe(s=>{var v;this.addEditReviewExtraInfo.processingForm=!1,this.backendError=!1,s.type.includes("success")&&(null===(v=this.modalRef)||void 0===v||v.hide(),s.type==o.UD.EDIT_REVIEW_WINDOW_SUCCESS&&this.store.dispatch((0,o.Dz)())),s.type.includes("failure")&&(this.backendError=!0)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}addReviewWindowInfo(t){this.modalRef=this.modalService.show(t,{keyboard:!1}),this.addEditReviewExtraInfo.create=!0,this.addEditReviewExtraInfo.delete=!1,this.backendError=!1,this.addEditReviewWindowForm=this.fb.group({windowName:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],wsDay:["",[n.kI.required,i.d.isInteger(),n.kI.min(1),n.kI.max(31)]],wsMonth:["",[n.kI.required,i.d.isInteger(),n.kI.min(1),n.kI.max(12)]],wsYear:["",[n.kI.required,i.d.isInteger(),n.kI.min(2020),n.kI.max((new Date).getFullYear()+10)]],weDay:["",[n.kI.required,i.d.isInteger(),n.kI.min(1),n.kI.max(31)]],weMonth:["",[n.kI.required,i.d.isInteger(),n.kI.min(1),n.kI.max(12)]],weYear:["",[n.kI.required,i.d.isInteger(),n.kI.min(2020),n.kI.max((new Date).getFullYear()+10)]]}),this.timeInput&&(this.addEditReviewWindowForm.addControl("wsMin",this.fb.control("",[n.kI.required,i.d.isInteger(),n.kI.min(0),n.kI.max(59)])),this.addEditReviewWindowForm.addControl("wsHour",this.fb.control("",[n.kI.required,i.d.isInteger(),n.kI.min(0),n.kI.max(23)])),this.addEditReviewWindowForm.addControl("weMin",this.fb.control("",[n.kI.required,i.d.isInteger(),n.kI.min(0),n.kI.max(59)])),this.addEditReviewWindowForm.addControl("weHour",this.fb.control("",[n.kI.required,i.d.isInteger(),n.kI.min(0),n.kI.max(23)])))}editReviewWindowInfo(t,a){var u,p,h,f,_;this.modalRef=this.modalService.show(t,{keyboard:!1}),this.addEditReviewExtraInfo.create=!1,this.addEditReviewExtraInfo.delete=!a.hasStarted,this.backendError=!1,this.addEditReviewWindowForm=this.fb.group({windowId:[a.id,[]],windowName:[a.name,[n.kI.required,n.kI.minLength(3),n.kI.maxLength(100)]],wsDay:[String(a.start.day),[n.kI.required,i.d.isInteger(),n.kI.min(1),n.kI.max(31)]],wsMonth:[String(a.start.month),[n.kI.required,i.d.isInteger(),n.kI.min(1),n.kI.max(12)]],wsYear:[String(a.start.year),[n.kI.required,i.d.isInteger(),n.kI.min(2020),n.kI.max((new Date).getFullYear()+10)]],weDay:[String(a.end.day),[n.kI.required,i.d.isInteger(),n.kI.min(1),n.kI.max(31)]],weMonth:[String(a.end.month),[n.kI.required,i.d.isInteger(),n.kI.min(1),n.kI.max(12)]],weYear:[String(a.end.year),[n.kI.required,i.d.isInteger(),n.kI.min(2020),n.kI.max((new Date).getFullYear()+10)]]}),this.timeInput&&(this.addEditReviewWindowForm.addControl("wsMin",this.fb.control(String(a.start.min),[n.kI.required,i.d.isInteger(),n.kI.min(0),n.kI.max(59)])),this.addEditReviewWindowForm.addControl("wsHour",this.fb.control(String(a.start.hour),[n.kI.required,i.d.isInteger(),n.kI.min(0),n.kI.max(23)])),this.addEditReviewWindowForm.addControl("weMin",this.fb.control(String(a.end.min),[n.kI.required,i.d.isInteger(),n.kI.min(0),n.kI.max(59)])),this.addEditReviewWindowForm.addControl("weHour",this.fb.control(String(a.end.hour),[n.kI.required,i.d.isInteger(),n.kI.min(0),n.kI.max(23)]))),a.hasStarted&&(this.timeInput&&(null===(u=this.addEditReviewWindowForm.get("wsMin"))||void 0===u||u.disable(),null===(p=this.addEditReviewWindowForm.get("wsHour"))||void 0===p||p.disable()),null===(h=this.addEditReviewWindowForm.get("wsDay"))||void 0===h||h.disable(),null===(f=this.addEditReviewWindowForm.get("wsMonth"))||void 0===f||f.disable(),null===(_=this.addEditReviewWindowForm.get("wsYear"))||void 0===_||_.disable())}sendCreateReviewWindowModal(){var t,a,u,p,h,f,_,s,v,Z,I,T,R,g,w,b,y,C,A,q,F,U;this.formWindow={name:"",start:new Date,end:new Date};let x={values:{year:"",month:"",day:""}},E={values:{year:"",month:"",day:""}};this.formWindow.name=null===(a=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowName"))||void 0===a?void 0:a.value,x.values.year=null===(p=null===(u=this.addEditReviewWindowForm)||void 0===u?void 0:u.get("wsYear"))||void 0===p?void 0:p.value,x.values.month=null===(f=null===(h=this.addEditReviewWindowForm)||void 0===h?void 0:h.get("wsMonth"))||void 0===f?void 0:f.value,x.values.day=null===(s=null===(_=this.addEditReviewWindowForm)||void 0===_?void 0:_.get("wsDay"))||void 0===s?void 0:s.value,this.timeInput&&(x.values.hour=null===(Z=null===(v=this.addEditReviewWindowForm)||void 0===v?void 0:v.get("wsHour"))||void 0===Z?void 0:Z.value,x.values.min=null===(T=null===(I=this.addEditReviewWindowForm)||void 0===I?void 0:I.get("wsMin"))||void 0===T?void 0:T.value);let Y=new m.p(x);this.formWindow.start=Y.date,E.values.year=null===(g=null===(R=this.addEditReviewWindowForm)||void 0===R?void 0:R.get("weYear"))||void 0===g?void 0:g.value,E.values.month=null===(b=null===(w=this.addEditReviewWindowForm)||void 0===w?void 0:w.get("weMonth"))||void 0===b?void 0:b.value,E.values.day=null===(C=null===(y=this.addEditReviewWindowForm)||void 0===y?void 0:y.get("weDay"))||void 0===C?void 0:C.value,E.values.hour="23",E.values.min="59",this.timeInput&&(E.values.hour=null===(q=null===(A=this.addEditReviewWindowForm)||void 0===A?void 0:A.get("weHour"))||void 0===q?void 0:q.value,E.values.min=null===(U=null===(F=this.addEditReviewWindowForm)||void 0===F?void 0:F.get("weMin"))||void 0===U?void 0:U.value);let N=new m.p(E);this.formWindow.end=N.date,this.store.dispatch((0,o.GC)({newWindow:this.formWindow}))}sendEditReviewWindowModal(){var t,a,u,p,h,f,_,s,v,Z,I,T,R,g,w,b,y,C,A,q,F,U,x,E,Y,N;this.formWindow={id:null===(a=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowId"))||void 0===a?void 0:a.value};let j=this.allWindows.filter(L=>{var z;return L.id==(null===(z=this.formWindow)||void 0===z?void 0:z.id)})[0],D={values:{year:"",month:"",day:""}},W={values:{year:"",month:"",day:""}};if((null===(p=null===(u=this.addEditReviewWindowForm)||void 0===u?void 0:u.get("windowName"))||void 0===p?void 0:p.value)!=j.name&&(this.formWindow.name=null===(f=null===(h=this.addEditReviewWindowForm)||void 0===h?void 0:h.get("windowName"))||void 0===f?void 0:f.value),!j.hasStarted){D.values.year=null===(s=null===(_=this.addEditReviewWindowForm)||void 0===_?void 0:_.get("wsYear"))||void 0===s?void 0:s.value,D.values.month=null===(Z=null===(v=this.addEditReviewWindowForm)||void 0===v?void 0:v.get("wsMonth"))||void 0===Z?void 0:Z.value,D.values.day=null===(T=null===(I=this.addEditReviewWindowForm)||void 0===I?void 0:I.get("wsDay"))||void 0===T?void 0:T.value,this.timeInput&&(D.values.hour=null===(g=null===(R=this.addEditReviewWindowForm)||void 0===R?void 0:R.get("wsHour"))||void 0===g?void 0:g.value,D.values.min=null===(b=null===(w=this.addEditReviewWindowForm)||void 0===w?void 0:w.get("wsMin"))||void 0===b?void 0:b.value);let L=new m.p(D);L.date.valueOf()!=j.start.date.valueOf()&&(this.formWindow.start=L.date)}W.values.year=null===(C=null===(y=this.addEditReviewWindowForm)||void 0===y?void 0:y.get("weYear"))||void 0===C?void 0:C.value,W.values.month=null===(q=null===(A=this.addEditReviewWindowForm)||void 0===A?void 0:A.get("weMonth"))||void 0===q?void 0:q.value,W.values.day=null===(U=null===(F=this.addEditReviewWindowForm)||void 0===F?void 0:F.get("weDay"))||void 0===U?void 0:U.value,W.values.hour="23",W.values.min="59",this.timeInput&&(W.values.hour=null===(E=null===(x=this.addEditReviewWindowForm)||void 0===x?void 0:x.get("weHour"))||void 0===E?void 0:E.value,W.values.min=null===(N=null===(Y=this.addEditReviewWindowForm)||void 0===Y?void 0:Y.get("weMin"))||void 0===N?void 0:N.value);let K=new m.p(W);K.date.valueOf()!=j.end.date.valueOf()&&(this.formWindow.end=K.date),this.store.dispatch((0,o.BB)({editWindow:this.formWindow}))}sendReviewWindowModal(){this.addEditReviewExtraInfo.processingForm=!0,this.addEditReviewExtraInfo.create?this.sendCreateReviewWindowModal():this.sendEditReviewWindowModal()}sendDeleteWindowModal(){var t,a;this.addEditReviewExtraInfo.processingForm=!0,this.formWindow={id:""},this.formWindow.id=null===(a=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowId"))||void 0===a?void 0:a.value,this.store.dispatch((0,o.yQ)({deleteWindow:this.formWindow}))}prettifyError(t){return t?t.required?"Required":t.min||t.max?"Invalid":t.notInteger||t.notNumeric?"Not number":t.valueNotInOptions?"Unknown value":t.email?"Not valid email address":t.minlength||t.maxlength?"Invalid length":t.allOrNothing?"Incomplete work information":"":""}}return d.\u0275fac=function(t){return new(t||d)(e.Y36(O.tT),e.Y36(B.F0),e.Y36(n.qu),e.Y36(G.V),e.Y36(ee.W),e.Y36(M.yh),e.Y36(M.mK))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-create-window"]],decls:24,vars:4,consts:[[1,"animated","fadeIn"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-auto"],["class","col text-right",4,"ngIf"],[1,"col-4","col-md-3"],[1,"col-3","col-md-3"],["class","col-2 col-md-3",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],["addEditWindowModal",""],["sectionHeader","Current Review Cycle",3,"reviewWindow","totalTalents","reviewedTalents"],[1,"col","text-right"],[1,"btn","btn-sm","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square"],[1,"col-2","col-md-3"],["class","badge badge-pill badge-primary",4,"ngIf"],[1,"badge","badge-pill","badge-primary"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[1,"modal-header"],[1,"modal-title","pull-left"],[4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-edit"],[1,"modal-body"],[3,"formGroup"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-row"],[1,"col-12"],["appearance","outline"],["formControlName","windowName","matInput","","placeholder","Review cycle name"],[1,"d-block"],["appearance","outline",1,"d-inline-block"],["formControlName","wsMonth","matInput","","placeholder","MM"],["formControlName","wsDay","matInput","","placeholder","DD"],["formControlName","wsYear","matInput","","placeholder","YYYY"],["formControlName","weMonth","matInput","","placeholder","MM"],["formControlName","weDay","matInput","","placeholder","DD"],["formControlName","weYear","matInput","","placeholder","YYYY"],["type","danger",3,"dismissible"],["formControlName","wsHour","matInput","","placeholder","hh"],["formControlName","wsMin","matInput","","placeholder","mm"],["formControlName","weHour","matInput","","placeholder","hh"],["formControlName","weMin","matInput","","placeholder","mm"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-remove"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ie,3,3,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h4"),e._uU(7,"All Review Cycles"),e.qZA(),e.qZA(),e.YNc(8,ne,4,0,"div",6),e.qZA(),e.TgZ(9,"div"),e.TgZ(10,"div",4),e.TgZ(11,"div",7),e.TgZ(12,"h6"),e._uU(13,"Review cycle:"),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"h6"),e._uU(16,"Cycle start:"),e.qZA(),e.qZA(),e.TgZ(17,"div",8),e.TgZ(18,"h6"),e._uU(19,"Cycle end:"),e.qZA(),e.qZA(),e.YNc(20,de,3,0,"div",9),e.qZA(),e.YNc(21,se,12,7,"div",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(22,fe,20,7,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",a.currentReviewWindow),e.xp6(7),e.Q6J("ngIf",a.canAddEditReviewCycles),e.xp6(12),e.Q6J("ngIf",a.canAddEditReviewCycles),e.xp6(1),e.Q6J("ngForOf",a.allWindows))},directives:[k.O5,te.v,k.sg,n._Y,n.JL,n.sg,P.wx,r.KE,r.hX,n.Fj,J.Nt,n.JJ,n.u,r.TO],encapsulation:2}),d})(),Ee=(()=>{class d{}return d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[B.Bz.forChild([{path:"",component:_e}]),k.ez,n.UX,P.nM,r.lN,J.c,H.HC.forRoot(),Q.B]]}),d})()},1217:(X,S,l)=>{l.d(S,{HC:()=>V,O1:()=>M});var k=l(4559),n=l(9808),r=l(5e3);function J(o,m){if(1&o&&(r.TgZ(0,"bar",2),r.Hsn(1),r.qZA()),2&o){const i=r.oxw();r.Q6J("type",i.type)("value",i._value)}}function B(o,m){if(1&o&&(r.TgZ(0,"bar",2),r._uU(1),r.qZA()),2&o){const i=m.$implicit;r.Q6J("type",i.type)("value",i.value),r.xp6(1),r.Oqu(i.label)}}function P(o,m){if(1&o&&r.YNc(0,B,2,3,"bar",3),2&o){const i=r.oxw();r.Q6J("ngForOf",i._value)}}const H=["*"];let Q=(()=>{class o{constructor(){this.animate=!1,this.max=100}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac}),o})(),M=(()=>{class o{constructor(i){this.isStacked=!1,this.addClass=!0,this.bars=[],this._max=100,Object.assign(this,i)}set animate(i){this._animate=i,this.bars.forEach(e=>{e.animate=i})}set striped(i){this._striped=i,this.bars.forEach(e=>{e.striped=i})}set value(i){this.isStacked=Array.isArray(i),this._value=i}get isBs3(){return(0,k.XA)()}get max(){return this._max}set max(i){this._max=i,this.bars.forEach(e=>{e.recalculatePercentage()})}addBar(i){i.animate=this._animate,i.striped=this._striped,this.bars.push(i)}removeBar(i){this.bars.splice(this.bars.indexOf(i),1)}}return o.\u0275fac=function(i){return new(i||o)(r.Y36(Q))},o.\u0275cmp=r.Xpm({type:o,selectors:[["progressbar"]],hostVars:3,hostBindings:function(i,e){2&i&&(r.uIk("max",e.max),r.ekj("progress",e.addClass))},inputs:{animate:"animate",striped:"striped",value:"value",max:"max",type:"type"},ngContentSelectors:H,decls:2,vars:2,consts:[[3,"type","value",4,"ngIf"],[3,"ngIf"],[3,"type","value"],[3,"type","value",4,"ngFor","ngForOf"]],template:function(i,e){1&i&&(r.F$t(),r.YNc(0,J,2,2,"bar",0),r.YNc(1,P,1,1,"ng-template",1)),2&i&&(r.Q6J("ngIf",!e.isStacked),r.xp6(1),r.Q6J("ngIf",e.isStacked))},directives:function(){return[n.O5,$,n.sg]},styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"]}),o})(),$=(()=>{class o{constructor(i,e,O){this.el=i,this.renderer=O,this.addClass=!0,this.percent=0,this.progress=e}get type(){return this._type}set type(i){this._type=i,this.applyTypeClasses()}get value(){return this._value}set value(i){!i&&0!==i||(this._value=i,this.recalculatePercentage())}get setBarWidth(){return this.recalculatePercentage(),this.percent}get isBs3(){return(0,k.XA)()}ngOnInit(){this.progress.addBar(this)}ngOnDestroy(){this.progress.removeBar(this)}recalculatePercentage(){this.percent=+(this.value/this.progress.max*100).toFixed(2);const i=this.progress.bars.reduce(function(e,O){return e+O.percent},0);i>100&&(this.percent-=i-100)}applyTypeClasses(){if(this._prevType){const e=`bg-${this._prevType}`;this.renderer.removeClass(this.el.nativeElement,`progress-bar-${this._prevType}`),this.renderer.removeClass(this.el.nativeElement,e),this._prevType=null}if(this._type){const e=`bg-${this._type}`;this.renderer.addClass(this.el.nativeElement,`progress-bar-${this._type}`),this.renderer.addClass(this.el.nativeElement,e),this._prevType=this._type}}}return o.\u0275fac=function(i){return new(i||o)(r.Y36(r.SBq),r.Y36(M,1),r.Y36(r.Qsj))},o.\u0275cmp=r.Xpm({type:o,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:15,hostBindings:function(i,e){2&i&&(r.uIk("aria-valuenow",e.value)("aria-valuetext",e.percent?e.percent.toFixed(0)+"%":"")("aria-valuemax",e.max),r.Udp("height","100","%")("width",e.setBarWidth,"%"),r.ekj("progress-bar-animated",!e.isBs3&&e.animate)("progress-bar-striped",e.striped)("active",e.isBs3&&e.animate)("progress-bar",e.addClass))},inputs:{type:"type",value:"value"},ngContentSelectors:H,decls:1,vars:0,template:function(i,e){1&i&&(r.F$t(),r.Hsn(0))},encapsulation:2}),o})(),V=(()=>{class o{static forRoot(){return{ngModule:o,providers:[Q]}}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[[n.ez]]}),o})()}}]);