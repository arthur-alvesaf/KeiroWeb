"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[261],{76:(y,D,o)=>{o.d(D,{S:()=>v});var t=o(5e3),s=o(9808);function r(i,g){if(1&i&&(t.TgZ(0,"p",6),t._uU(1),t.qZA()),2&i){const p=t.oxw();t.xp6(1),t.Oqu(p.context)}}function f(i,g){1&i&&(t.TgZ(0,"p"),t.TgZ(1,"strong"),t._uU(2,"This action cannot be undone."),t.qZA(),t.qZA())}let v=(()=>{class i{constructor(){this.modalHeader="Delete?",this.context="",this.confirmationPrompt="Are you sure you want to delete?",this.canUndo=!1,this.rejectButtonText="Cancel",this.confirmButtonIconClasses="fa fa-trash-alt",this.confirmButtonText="Delete",this.onConfirm=new t.vpe,this.onReject=new t.vpe}reject(){this.onReject.emit()}confirm(){this.onConfirm.emit()}}return i.\u0275fac=function(p){return new(p||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-shared-confirmation"]],inputs:{modalHeader:"modalHeader",context:"context",confirmationPrompt:"confirmationPrompt",canUndo:"canUndo",rejectButtonText:"rejectButtonText",confirmButtonIconClasses:"confirmButtonIconClasses",confirmButtonText:"confirmButtonText"},outputs:{onConfirm:"onConfirm",onReject:"onReject"},decls:20,vars:7,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","text-center"],["class","my-3",4,"ngIf"],[1,"my-3"],[4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",3,"ngClass"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"]],template:function(p,n){1&p&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return n.reject()}),t.TgZ(5,"span",3),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,r,2,1,"p",5),t.TgZ(9,"p",6),t._uU(10),t.qZA(),t.YNc(11,f,3,0,"p",7),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"div",9),t.TgZ(14,"button",10),t.NdJ("click",function(){return n.confirm()}),t._UZ(15,"i",11),t._uU(16),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return n.reject()}),t._UZ(18,"i",13),t._uU(19),t.qZA(),t.qZA(),t.qZA()),2&p&&(t.xp6(3),t.Oqu(n.modalHeader),t.xp6(5),t.Q6J("ngIf",n.context),t.xp6(2),t.Oqu(n.confirmationPrompt),t.xp6(1),t.Q6J("ngIf",!n.canUndo),t.xp6(4),t.Q6J("ngClass",n.confirmButtonIconClasses),t.xp6(1),t.hij(" ",n.confirmButtonText," "),t.xp6(3),t.hij(" ",n.rejectButtonText," "))},directives:[s.O5,s.mk],encapsulation:2}),i})()},1892:(y,D,o)=>{o.d(D,{C:()=>r});var t=o(9808),s=o(5e3);let r=(()=>{class f{}return f.\u0275fac=function(i){return new(i||f)},f.\u0275mod=s.oAB({type:f}),f.\u0275inj=s.cJS({imports:[[t.ez]]}),f})()},6660:(y,D,o)=>{o.d(D,{S:()=>nt});var t=o(5e3),s=o(2382),r=o(9147),f=o(2733),v=o(9808),i=o(845),g=o(1424),p=o(7311),n=o(5652),T=o(4036),d=o(9783),_=o(3407),h=o(727),E=o(8372),m=o(3905),C=o(2340),Z=o(520);let L=(()=>{class a{constructor(e){this.http=e,this.serverUrl=C.N.apiServer}findTalentsFilterSearch(e,l,u,c,I,S,O,M,N,R){return(0,m.z)(this.http.post(this.serverUrl+"talent/finder",Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({step:e,page:l},u?{search:u}:{}),c?{windowRId:c}:{}),I?{boxPosition:I}:{}),S?{country:S}:{}),O?{hotel:O}:{}),M?{area:M}:{}),N?{department:N}:{}),R?{position:R}:{})).pipe(b=>b))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(Z.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var U=o(4255);const F=["searchInput"];function P(a,A){1&a&&(t.TgZ(0,"tr"),t._UZ(1,"th",11),t.TgZ(2,"th"),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Last known Position"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Last known Property"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Nationality"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Email"),t.qZA(),t.qZA())}function x(a,A){if(1&a&&(t.TgZ(0,"tr",12),t.TgZ(1,"td"),t._UZ(2,"p-tableRadioButton"),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.qZA()),2&a){const e=A.$implicit;t.Q6J("pSelectableRow",e),t.xp6(4),t.AsE("",e.name.given," ",e.name.last,""),t.xp6(2),t.Oqu((null==e.position?null:e.position.name)||""),t.xp6(2),t.Oqu((null==e.location?null:e.location.name)||""),t.xp6(2),t.Oqu(e.nationality),t.xp6(2),t.Oqu(e.email)}}let B=(()=>{class a{constructor(e,l){this.talentsManagementApi=e,this.modalsController=l,this.searchInputControl=new s.NI,this.subscriptions=new h.w0,this.total=0,this.page=0,this.step=10,this.rows=[],this.loadingIndicator=!1,this.onSelectTalent=new t.vpe,this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,E.b)(350)).subscribe(u=>{this.searchInputControl.valid&&this.fetchTalentsWithSearch()}))}ngAfterViewInit(){var e;null===(e=this.input)||void 0===e||e.nativeElement.focus()}setPage(e){this.step=e.rows,this.page=Math.floor(e.first/e.rows),this.fetchTalentsWithSearch()}fetchTalentsWithSearch(){this.talentsManagementApi.findTalentsFilterSearch(this.step,this.page+1,this.searchInputControl.value).then(e=>{this.rows=e.talents,this.total=e.total})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(L),t.Y36(f.l))},a.\u0275cmp=t.Xpm({type:a,selectors:[["keiro-talents-table"]],viewQuery:function(e,l){if(1&e&&t.Gf(F,5),2&e){let u;t.iGM(u=t.CRH())&&(l.input=u.first)}},outputs:{onSelectTalent:"onSelectTalent"},decls:15,vars:7,consts:[[1,"form-row","justify-content-end"],[1,"col","mb-1"],[1,"has-search"],[1,"fa","fa-search","has-search-icon"],["type","text","placeholder","Search by name, email, or Keiro ID",1,"form-control",3,"formControl"],["searchInput",""],["selectionMode","single","styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","lazy","loading","paginator","rows","totalRecords","onLazyLoad","selectionChange"],["pTemplate","header"],["pTemplate","body"],["routerLink","/app/talent/create",1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-user-plus"],[2,"width","3rem"],[3,"pSelectableRow"]],template:function(e,l){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"span",3),t._UZ(4,"input",4,5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"p-table",6),t.NdJ("onLazyLoad",function(c){return l.setPage(c)})("selectionChange",function(c){return l.onSelectTalent.emit(c)}),t.YNc(7,P,12,0,"ng-template",7),t.YNc(8,x,13,7,"ng-template",8),t.qZA(),t.TgZ(9,"p"),t._uU(10," Is the Talent you're looking for not in the list?"),t._UZ(11,"br"),t.TgZ(12,"a",9),t.NdJ("click",function(){return l.modalsController.closeAllModals()}),t._UZ(13,"i",10),t._uU(14," Click here to create a new Talent profile "),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("formControl",l.searchInputControl),t.xp6(2),t.Q6J("value",l.rows)("lazy",!0)("loading",l.loadingIndicator)("paginator",!0)("rows",l.step)("totalRecords",l.total))},directives:[s.Fj,s.JJ,s.oH,U.iA,d.jx,U.Ei,U.GE,p.yS],styles:[".has-search[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%] > .has-search-icon[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}"]}),a})();function V(a,A){1&a&&(t.TgZ(0,"span"),t._uU(1,"Assign talent to job"),t.qZA())}function q(a,A){1&a&&t._uU(0,"Edit employment information")}function J(a,A){if(1&a){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2),c=t.MAs(34);return u.modalsControllerService.openModal(c,{class:"modal-lg"})}),t._uU(1," Choose Talent "),t.qZA()}}function j(a,A){if(1&a){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).clearTalentFromForm()}),t.qZA()}}function Y(a,A){if(1&a&&(t.TgZ(0,"div",27),t._UZ(1,"input",28),t.YNc(2,j,1,0,"button",29),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",!0)("value",(null==e.currentlySelectedTalent?null:e.currentlySelectedTalent.name.given)+" "+(null==e.currentlySelectedTalent?null:e.currentlySelectedTalent.name.last)),t.xp6(1),t.Q6J("ngIf",e.addingEmployment)}}const H=function(a){return["/app/talent/view/",a]};function k(a,A){if(1&a){const e=t.EpF();t.TgZ(0,"div",31),t._uU(1," This talent has history, "),t.TgZ(2,"a",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).modalsControllerService.closeUpperModal()}),t._uU(3,"click here to view profile"),t.qZA(),t.qZA()}if(2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.VKq(1,H,null==e.currentlySelectedTalent?null:e.currentlySelectedTalent._id))}}function w(a,A){1&a&&(t.TgZ(0,"div",33),t._uU(1," This job coincides with the last previously known work information for this talent. "),t._UZ(2,"br"),t._uU(3,"We have autocompleted the date for you. "),t.qZA())}function W(a,A){1&a&&(t.TgZ(0,"div",31),t._uU(1," This job "),t.TgZ(2,"strong"),t._uU(3,"does not"),t.qZA(),t._uU(4," coincide with the last previously known work information for this talent. "),t._UZ(5,"br"),t._uU(6,"Please validate if this information is correct before proceeding. "),t.qZA())}function z(a,A){if(1&a&&(t.TgZ(0,"div",18),t.TgZ(1,"h6",7),t._uU(2,"End Date"),t.qZA(),t.TgZ(3,"div",19),t._UZ(4,"p-calendar",34),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("showIcon",!0)("minDate",(null==e.existing?null:e.existing.from)||e.today)("maxDate",e.today)}}function G(a,A){if(1&a&&(t.TgZ(0,"div",37),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.qZA()),2&a){const e=A.$implicit;t.xp6(2),t.Oqu(e.label)}}function K(a,A){if(1&a&&(t.TgZ(0,"div",18),t.TgZ(1,"h6",7),t._uU(2,"End Reason"),t.qZA(),t.TgZ(3,"div",19),t.TgZ(4,"p-dropdown",35),t.YNc(5,G,3,1,"ng-template",36),t.qZA(),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("options",e.endStatusOptions)("autoDisplayFirst",!1)("group",!0)}}function Q(a,A){1&a&&(t.TgZ(0,"div",18),t.TgZ(1,"h6",7),t._uU(2,"Notes"),t.qZA(),t.TgZ(3,"div",19),t._UZ(4,"textarea",38),t.qZA(),t.qZA())}function X(a,A){if(1&a&&(t.TgZ(0,"form",17),t.TgZ(1,"div",18),t.TgZ(2,"h6",7),t._uU(3,"Talent"),t.qZA(),t.TgZ(4,"div",19),t.YNc(5,J,2,0,"button",20),t.YNc(6,Y,3,3,"div",21),t.qZA(),t.YNc(7,k,4,3,"div",22),t.qZA(),t.TgZ(8,"div",18),t.TgZ(9,"h6",7),t._uU(10,"Start Date"),t.qZA(),t.TgZ(11,"div",19),t._UZ(12,"p-calendar",23),t.qZA(),t.YNc(13,w,4,0,"div",24),t.YNc(14,W,7,0,"div",22),t.qZA(),t.YNc(15,z,5,3,"div",25),t.YNc(16,K,6,3,"div",25),t.YNc(17,Q,5,0,"div",25),t.qZA()),2&a){const e=t.oxw();t.Q6J("formGroup",e.createEmploymentForm),t.xp6(5),t.Q6J("ngIf",!e.talentIsSelected),t.xp6(1),t.Q6J("ngIf",e.talentIsSelected),t.xp6(1),t.Q6J("ngIf",e.currentlySelectedTalent&&e.warnAboutSelectedTalent),t.xp6(5),t.Q6J("showIcon",!0)("maxDate",e.today),t.xp6(1),t.Q6J("ngIf",e.selectedTalentOnTrack),t.xp6(1),t.Q6J("ngIf",e.selectedTalentNotOnTrack),t.xp6(1),t.Q6J("ngIf",e.editingEndedEmployment),t.xp6(1),t.Q6J("ngIf",e.editingEndedEmployment),t.xp6(1),t.Q6J("ngIf",e.editingEndedEmployment)}}function $(a,A){1&a&&(t.TgZ(0,"span"),t._UZ(1,"i",39),t._uU(2," Assign talent "),t.qZA())}function tt(a,A){1&a&&(t._UZ(0,"i",40),t._uU(1," Edit employment "))}function et(a,A){if(1&a){const e=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.TgZ(2,"span"),t._uU(3,"Talent Search"),t.qZA(),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().modalsControllerService.closeUpperModal()}),t.TgZ(5,"span",5),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"keiro-talents-table",41),t.NdJ("onSelectTalent",function(u){return t.CHM(e),t.oxw().selectTalent(u)}),t.qZA(),t.qZA(),t.TgZ(9,"div",10),t.TgZ(10,"div",11),t.TgZ(11,"button",42),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return u.clearTalentFromForm(),u.modalsControllerService.closeUpperModal()}),t._UZ(12,"i",13),t._uU(13," Cancel "),t.qZA(),t.TgZ(14,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().modalsControllerService.closeUpperModal()}),t._UZ(15,"i",44),t._uU(16," Select "),t.qZA(),t.qZA(),t.qZA()}}let nt=(()=>{class a{constructor(e,l,u){this.fb=e,this.modalsControllerService=l,this.employmentServiceApi=u,this.addingEmployment=!0,this.editingEndedEmployment=!1,this.selectedTalentOnTrack=!1,this.selectedTalentNotOnTrack=!1,this.onSumbit=new t.vpe,this.onCloseModal=new t.vpe,this.processing=!1,this.warnAboutSelectedTalent=!1,this.endStatusOptions=[{label:"Change of job",items:[r.Vg.CHANGE_PROMOTION,r.Vg.CHANGE_LATERAL_MOVEMENT,r.Vg.CHANGE_TRANSFER_SAME_POSITION,r.Vg.CHANGE_TRANSFER_PROMOTION].map(c=>({label:r.ub.statusNameMap.get(c),value:c}))},{label:"Voluntary dismissals",items:[r.Vg.DISMISSAL_VOLUNTARY_ABSENTEEISM,r.Vg.DISMISSAL_VOLUNTARY_ABANDONMENT,r.Vg.DISMISSAL_VOLUNTARY_RETIREMENT,r.Vg.DISMISSAL_VOLUNTARY_BETTER_OFFER,r.Vg.DISMISSAL_VOLUNTARY_PERSONAL].map(c=>({label:r.ub.statusNameMap.get(c),value:c}))},{label:"Forced dismissals",items:[r.Vg.DISMISSAL_FORCED_END_OF_CONTRACT,r.Vg.DISMISSAL_FORCED_DISEASE,r.Vg.DISMISSAL_FORCED_DEATH,r.Vg.DISMISSAL_FORCED_LOW_PERFORMANCE,r.Vg.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,r.Vg.DISMISSAL_FORCED_OTHERS].map(c=>({label:r.ub.statusNameMap.get(c),value:c}))}],this.today=new Date}ngOnInit(){var e,l,u,c,I,S,O;if(this.currentlySelectedTalent=(null===(e=this.existing)||void 0===e?void 0:e.talent)||void 0,void 0!==this.existing){this.addingEmployment=!1,this.addingEmployment=!1;let M={talent:[(null===(l=this.existing)||void 0===l?void 0:l.talent._id)||null,s.kI.required],startDate:[null===(u=this.existing)||void 0===u?void 0:u.from,s.kI.required]};(null===(c=this.existing)||void 0===c?void 0:c.until)&&(this.editingEndedEmployment=!0,Object.assign(M,{endDate:[null===(I=this.existing)||void 0===I?void 0:I.until,s.kI.required]},{endReason:[null===(S=this.existing)||void 0===S?void 0:S.status,s.kI.required]},{notes:[null===(O=this.existing)||void 0===O?void 0:O.notes]})),this.createEmploymentForm=this.fb.group(M)}else this.createEmploymentForm=this.fb.group({talent:[null,s.kI.required],startDate:[null,s.kI.required]})}get talentIsSelected(){var e,l;return(null===(l=null===(e=this.createEmploymentForm)||void 0===e?void 0:e.get("talent"))||void 0===l?void 0:l.value)||!1}selectTalent(e){var l,u,c,I,S,O,M,N,R,b;this.warnAboutSelectedTalent=!1,this.currentlySelectedTalent=e,this.selectedTalentOnTrack=!1,this.selectedTalentNotOnTrack=!1,e?(null===(I=null===(c=this.createEmploymentForm)||void 0===c?void 0:c.get("talent"))||void 0===I||I.setValue(e._id),(null==e?void 0:e.position._id)==(null===(S=this.forJob)||void 0===S?void 0:S.position._id)&&(null==e?void 0:e.location._id)==(null===(O=this.forJob)||void 0===O?void 0:O.property._id)?(null===(N=null===(M=this.createEmploymentForm)||void 0===M?void 0:M.get("startDate"))||void 0===N||N.setValue(new Date(e.startDate)),null===(b=null===(R=this.createEmploymentForm)||void 0===R?void 0:R.get("startDate"))||void 0===b||b.markAsDirty(),this.selectedTalentOnTrack=!0):this.selectedTalentNotOnTrack=!0,this.employmentServiceApi.getEmploymentsForTalent(e._id).then(ot=>{this.warnAboutSelectedTalent=ot.some(lt=>r.ub.forcedDismissalReasons.includes(lt.status))})):null===(u=null===(l=this.createEmploymentForm)||void 0===l?void 0:l.get("talent"))||void 0===u||u.setValue(null)}clearTalentFromForm(){var e,l,u,c,I,S,O,M,N,R;this.warnAboutSelectedTalent=!1,null===(l=null===(e=this.createEmploymentForm)||void 0===e?void 0:e.get("talent"))||void 0===l||l.setValue(null),this.selectedTalentOnTrack=!1,this.selectedTalentNotOnTrack=!1,(null===(u=this.currentlySelectedTalent)||void 0===u?void 0:u.position._id)==(null===(c=this.forJob)||void 0===c?void 0:c.position._id)&&(null===(I=this.currentlySelectedTalent)||void 0===I?void 0:I.location._id)==(null===(S=this.forJob)||void 0===S?void 0:S.property._id)&&(null===(M=null===(O=this.createEmploymentForm)||void 0===O?void 0:O.get("startDate"))||void 0===M||M.setValue(null),null===(R=null===(N=this.createEmploymentForm)||void 0===N?void 0:N.get("startDate"))||void 0===R||R.markAsPristine()),this.currentlySelectedTalent=void 0}getFormValue(){var e,l,u,c,I,S,O,M;return Object.assign(Object.assign(Object.assign({talentId:null===(e=this.createEmploymentForm)||void 0===e?void 0:e.value.talent,startDate:null===(l=this.createEmploymentForm)||void 0===l?void 0:l.value.startDate},(null===(u=this.createEmploymentForm)||void 0===u?void 0:u.value.endDate)?{endDate:null===(c=this.createEmploymentForm)||void 0===c?void 0:c.value.endDate}:{}),(null===(I=this.createEmploymentForm)||void 0===I?void 0:I.value.endReason)?{endReason:null===(S=this.createEmploymentForm)||void 0===S?void 0:S.value.endReason}:{}),(null===(O=this.createEmploymentForm)||void 0===O?void 0:O.value.notes)?{notes:null===(M=this.createEmploymentForm)||void 0===M?void 0:M.value.notes}:{notes:null})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.qu),t.Y36(f.l),t.Y36(r.Ib))},a.\u0275cmp=t.Xpm({type:a,selectors:[["team-add-edit-employment-modal"]],inputs:{existing:"existing",forJob:"forJob"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal"},decls:35,vars:10,consts:[[1,"modal-header"],[1,"modal-title"],[4,"ngIf","ngIfElse"],["editEmploymentModalTitle",""],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mb-0"],[1,"mb-2"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["editEmploymentButtonContent",""],["talentSelectorModal",""],[3,"formGroup"],[1,"my-2"],[1,"p-fluid"],["pButton","",3,"click",4,"ngIf"],["class","p-inputgroup",4,"ngIf"],["class","mt-1 alert alert-warning","role","alert",4,"ngIf"],["formControlName","startDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","maxDate"],["class","mt-1 alert alert-info","role","alert",4,"ngIf"],["class","my-2",4,"ngIf"],["pButton","",3,"click"],[1,"p-inputgroup"],["type","text","pInputText","",3,"disabled","value"],["type","button","pButton","","icon","pi pi-times","label","Clear","class","p-button-danger",3,"click",4,"ngIf"],["type","button","pButton","","icon","pi pi-times","label","Clear",1,"p-button-danger",3,"click"],["role","alert",1,"mt-1","alert","alert-warning"],[3,"routerLink","click"],["role","alert",1,"mt-1","alert","alert-info"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","minDate","maxDate"],["formControlName","endReason",3,"options","autoDisplayFirst","group"],["pTemplate","group"],[1,"flex","align-items-center"],["pInputTextarea","","formControlName","notes"],["aria-hidden","true",1,"fa","fa-briefcase"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[3,"onSelectTalent"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-check-circle"]],template:function(e,l){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.YNc(2,V,2,0,"span",2),t.YNc(3,q,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(c){return l.onCloseModal.emit(c)}),t.TgZ(6,"span",5),t._uU(7,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",6),t.TgZ(9,"div"),t.TgZ(10,"h5"),t._uU(11,"Job:"),t.qZA(),t.TgZ(12,"h6",7),t._uU(13),t.qZA(),t.TgZ(14,"h6",8),t.TgZ(15,"small"),t._uU(16),t._UZ(17,"br"),t._uU(18),t.qZA(),t.qZA(),t.TgZ(19,"h6"),t._uU(20),t.qZA(),t.qZA(),t._UZ(21,"hr"),t.TgZ(22,"div"),t.YNc(23,X,18,11,"form",9),t.qZA(),t.qZA(),t.TgZ(24,"div",10),t.TgZ(25,"div",11),t.TgZ(26,"button",12),t.NdJ("click",function(c){return l.onCloseModal.emit(c)}),t._UZ(27,"i",13),t._uU(28," Cancel "),t.qZA(),t.TgZ(29,"button",14),t.NdJ("click",function(){return l.onSumbit.emit(l.getFormValue())}),t.YNc(30,$,3,0,"span",2),t.YNc(31,tt,2,0,"ng-template",null,15,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.YNc(33,et,17,0,"ng-template",null,16,t.W1O)),2&e){const u=t.MAs(4),c=t.MAs(32);t.xp6(2),t.Q6J("ngIf",l.addingEmployment)("ngIfElse",u),t.xp6(11),t.Oqu(null==l.forJob||null==l.forJob.position?null:l.forJob.position.name),t.xp6(3),t.hij(" ",null==l.forJob||null==l.forJob.position?null:l.forJob.position.area,""),t.xp6(2),t.hij(" ",null==l.forJob||null==l.forJob.position?null:l.forJob.position.department," "),t.xp6(2),t.Oqu(null==l.forJob||null==l.forJob.property?null:l.forJob.property.name),t.xp6(3),t.Q6J("ngIf",l.createEmploymentForm),t.xp6(6),t.Q6J("disabled",l.processing||(null==l.createEmploymentForm?null:l.createEmploymentForm.pristine)||(null==l.createEmploymentForm?null:l.createEmploymentForm.invalid)),t.xp6(1),t.Q6J("ngIf",l.addingEmployment)("ngIfElse",c)}},directives:[v.O5,s._Y,s.JL,s.sg,i.Hq,g.o,p.yS,n.f,s.JJ,s.u,T.Lt,d.jx,s.Fj,_.g,B],styles:[""]}),a})()},2727:(y,D,o)=>{o.d(D,{Z:()=>d});var t=o(9808),s=o(2382),r=o(5652),f=o(4036),v=o(4255),i=o(7311),g=o(5e3);let p=(()=>{class _{}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=g.oAB({type:_}),_.\u0275inj=g.cJS({imports:[[t.ez,i.Bz,s.UX,v.U$]]}),_})();var n=o(1424),T=o(3407);let d=(()=>{class _{}return _.\u0275fac=function(E){return new(E||_)},_.\u0275mod=g.oAB({type:_}),_.\u0275inj=g.cJS({imports:[[p,t.ez,i.Bz,s.UX,f.kW,r._8,n.j,T.A]]}),_})()},7182:(y,D,o)=>{o.d(D,{Q:()=>d});var t=o(5e3),s=o(2382),r=o(9147),f=o(9808),v=o(5652),i=o(4036),g=o(9783),p=o(3407);function n(_,h){if(1&_&&(t.TgZ(0,"div",20),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.qZA()),2&_){const E=h.$implicit;t.xp6(2),t.Oqu(E.label)}}function T(_,h){if(1&_&&(t.TgZ(0,"form",14),t.TgZ(1,"div",5),t.TgZ(2,"h6",6),t._uU(3,"Ended at:"),t.qZA(),t.TgZ(4,"div",15),t._UZ(5,"p-calendar",16),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"h6",6),t._uU(8,"End with status:"),t.qZA(),t.TgZ(9,"div",15),t.TgZ(10,"p-dropdown",17),t.YNc(11,n,3,1,"ng-template",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",5),t.TgZ(13,"h6",6),t._uU(14,"Additional notes:"),t.qZA(),t.TgZ(15,"div",15),t._UZ(16,"textarea",19),t.qZA(),t.qZA(),t.qZA()),2&_){const E=t.oxw();t.Q6J("formGroup",E.editEmploymentForm),t.xp6(5),t.Q6J("showIcon",!0)("maxDate",E.today)("minDate",(null==E.employment?null:E.employment.from)||E.today),t.xp6(5),t.Q6J("options",E.endStatusOptions)("autoDisplayFirst",!1)("group",!0)}}let d=(()=>{class _{constructor(E){this.fb=E,this.onSumbit=new t.vpe,this.onCloseModal=new t.vpe,this.processing=!1,this.endStatusOptions=[{label:"Change of job",items:[r.Vg.CHANGE_PROMOTION,r.Vg.CHANGE_LATERAL_MOVEMENT,r.Vg.CHANGE_TRANSFER_SAME_POSITION,r.Vg.CHANGE_TRANSFER_PROMOTION].map(m=>({label:r.ub.statusNameMap.get(m),value:m}))},{label:"Voluntary dismissals",items:[r.Vg.DISMISSAL_VOLUNTARY_ABSENTEEISM,r.Vg.DISMISSAL_VOLUNTARY_ABANDONMENT,r.Vg.DISMISSAL_VOLUNTARY_RETIREMENT,r.Vg.DISMISSAL_VOLUNTARY_BETTER_OFFER,r.Vg.DISMISSAL_VOLUNTARY_PERSONAL].map(m=>({label:r.ub.statusNameMap.get(m),value:m}))},{label:"Forced dismissals",items:[r.Vg.DISMISSAL_FORCED_END_OF_CONTRACT,r.Vg.DISMISSAL_FORCED_DISEASE,r.Vg.DISMISSAL_FORCED_DEATH,r.Vg.DISMISSAL_FORCED_LOW_PERFORMANCE,r.Vg.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,r.Vg.DISMISSAL_FORCED_OTHERS].map(m=>({label:r.ub.statusNameMap.get(m),value:m}))}],this.today=new Date}ngOnInit(){this.editEmploymentForm=this.fb.group({newStatus:[2,s.kI.required],endDate:[null,s.kI.required],notes:[null]})}getFormValue(){var E,m,C,Z;return Object.assign({newStatus:null===(E=this.editEmploymentForm)||void 0===E?void 0:E.value.newStatus,until:null===(m=this.editEmploymentForm)||void 0===m?void 0:m.value.endDate},(null===(C=this.editEmploymentForm)||void 0===C?void 0:C.value.notes)?{notes:null===(Z=this.editEmploymentForm)||void 0===Z?void 0:Z.value.notes}:{})}}return _.\u0275fac=function(E){return new(E||_)(t.Y36(s.qu))},_.\u0275cmp=t.Xpm({type:_,selectors:[["team-end-employment-modal"]],inputs:{job:"job",employment:"employment"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal"},decls:30,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"my-2"],[1,"mb-0"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-save"],[3,"formGroup"],[1,"p-fluid"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","maxDate","minDate"],["formControlName","newStatus",3,"options","autoDisplayFirst","group"],["pTemplate","group"],["pInputTextarea","","formControlName","notes"],[1,"flex","align-items-center"]],template:function(E,m){1&E&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t.TgZ(2,"span"),t._uU(3,"End employment"),t.qZA(),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(Z){return m.onCloseModal.emit(Z)}),t.TgZ(5,"span",3),t._uU(6,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"h5",5),t._uU(9),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"h6",6),t._uU(12,"Job title:"),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA(),t.qZA(),t.TgZ(15,"div",5),t.TgZ(16,"h6",6),t._uU(17,"Started at:"),t.qZA(),t.TgZ(18,"span"),t._uU(19),t.ALo(20,"date"),t.qZA(),t.qZA(),t.YNc(21,T,17,7,"form",7),t.qZA(),t.TgZ(22,"div",8),t.TgZ(23,"div",9),t.TgZ(24,"button",10),t.NdJ("click",function(Z){return m.onCloseModal.emit(Z)}),t._UZ(25,"i",11),t._uU(26," Cancel "),t.qZA(),t.TgZ(27,"button",12),t.NdJ("click",function(){return m.onSumbit.emit(m.getFormValue())}),t._UZ(28,"i",13),t._uU(29," End employment "),t.qZA(),t.qZA(),t.qZA()),2&E&&(t.xp6(9),t.AsE("",null==m.employment||null==m.employment.talent||null==m.employment.talent.name?null:m.employment.talent.name.given," ",null==m.employment||null==m.employment.talent||null==m.employment.talent.name?null:m.employment.talent.name.last,""),t.xp6(5),t.Oqu(null==m.job||null==m.job.position?null:m.job.position.name),t.xp6(5),t.Oqu(t.xi3(20,6,null==m.employment?null:m.employment.from,"dd MMM yyyy")),t.xp6(2),t.Q6J("ngIf",m.editEmploymentForm),t.xp6(6),t.Q6J("disabled",m.processing||(null==m.editEmploymentForm?null:m.editEmploymentForm.pristine)||(null==m.editEmploymentForm?null:m.editEmploymentForm.invalid)))},directives:[f.O5,s._Y,s.JL,s.sg,v.f,s.JJ,s.u,i.Lt,g.jx,s.Fj,p.g],pipes:[f.uU],styles:[""]}),_})()},9147:(y,D,o)=>{o.d(D,{Ib:()=>p,Vg:()=>i,ub:()=>g});var t=o(3905),s=o(4004),r=o(2340),f=o(5e3),v=o(520),i=(()=>{return(n=i||(i={}))[n.CANDIDATE=0]="CANDIDATE",n[n.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED=1]="CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED",n[n.CANDIDATE_ENDED_NOT_DESIRED=2]="CANDIDATE_ENDED_NOT_DESIRED",n[n.ACTIVE=10]="ACTIVE",n[n.ENDED=19]="ENDED",n[n.CHANGE_PROMOTION=20]="CHANGE_PROMOTION",n[n.CHANGE_LATERAL_MOVEMENT=21]="CHANGE_LATERAL_MOVEMENT",n[n.CHANGE_TRANSFER_SAME_POSITION=22]="CHANGE_TRANSFER_SAME_POSITION",n[n.CHANGE_TRANSFER_PROMOTION=23]="CHANGE_TRANSFER_PROMOTION",n[n.DISMISSAL_VOLUNTARY_ABSENTEEISM=50]="DISMISSAL_VOLUNTARY_ABSENTEEISM",n[n.DISMISSAL_VOLUNTARY_ABANDONMENT=51]="DISMISSAL_VOLUNTARY_ABANDONMENT",n[n.DISMISSAL_VOLUNTARY_RETIREMENT=52]="DISMISSAL_VOLUNTARY_RETIREMENT",n[n.DISMISSAL_VOLUNTARY_BETTER_OFFER=53]="DISMISSAL_VOLUNTARY_BETTER_OFFER",n[n.DISMISSAL_VOLUNTARY_PERSONAL=54]="DISMISSAL_VOLUNTARY_PERSONAL",n[n.DISMISSAL_FORCED_END_OF_CONTRACT=70]="DISMISSAL_FORCED_END_OF_CONTRACT",n[n.DISMISSAL_FORCED_DISEASE=71]="DISMISSAL_FORCED_DISEASE",n[n.DISMISSAL_FORCED_DEATH=72]="DISMISSAL_FORCED_DEATH",n[n.DISMISSAL_FORCED_LOW_PERFORMANCE=73]="DISMISSAL_FORCED_LOW_PERFORMANCE",n[n.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS=74]="DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS",n[n.DISMISSAL_FORCED_OTHERS=75]="DISMISSAL_FORCED_OTHERS",i;var n})();class g{}g.forcedDismissalReasons=[i.DISMISSAL_FORCED_END_OF_CONTRACT,i.DISMISSAL_FORCED_DISEASE,i.DISMISSAL_FORCED_DEATH,i.DISMISSAL_FORCED_LOW_PERFORMANCE,i.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,i.DISMISSAL_FORCED_OTHERS],g.statusNameMap=new Map([[i.CANDIDATE,"Candidate"],[i.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED,"Candidate ended but not selected"],[i.CANDIDATE_ENDED_NOT_DESIRED,"Candidate not desired"],[i.ACTIVE,"Active"],[i.ENDED,"Ended"],[i.CHANGE_PROMOTION,"Promotion"],[i.CHANGE_LATERAL_MOVEMENT,"Lateral movement"],[i.CHANGE_TRANSFER_SAME_POSITION,"Transfer same position"],[i.CHANGE_TRANSFER_PROMOTION,"Transfer promotion"],[i.DISMISSAL_VOLUNTARY_ABSENTEEISM,"Absenteeism"],[i.DISMISSAL_VOLUNTARY_ABANDONMENT,"Abandonment"],[i.DISMISSAL_VOLUNTARY_RETIREMENT,"Retirement"],[i.DISMISSAL_VOLUNTARY_BETTER_OFFER,"Better offer"],[i.DISMISSAL_VOLUNTARY_PERSONAL,"Personal"],[i.DISMISSAL_FORCED_END_OF_CONTRACT,"End of contract"],[i.DISMISSAL_FORCED_DISEASE,"Disease"],[i.DISMISSAL_FORCED_DEATH,"Death"],[i.DISMISSAL_FORCED_LOW_PERFORMANCE,"Low performance"],[i.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,"Inapropiate behaviors"],[i.DISMISSAL_FORCED_OTHERS,"Other"]]);let p=(()=>{class n{constructor(d){this.http=d,this.serverUrl=r.N.v2apiServer}static formatDates(d){return Object.assign(Object.assign(Object.assign({},d),d.from?{from:new Date(d.from)}:{}),d.until?{until:new Date(d.until)}:{})}createEmploymentRecord(d,_,h,E,m){return(0,t.z)(this.http.post(this.serverUrl+"employment/",Object.assign({job:d,talent:_,status:h,from:E.toISOString()},m?{allowMultiple:m}:{})).pipe((0,s.U)(C=>n.formatDates(C))))}getEmploymentsForTalent(d){return(0,t.z)(this.http.get(this.serverUrl+"employment/talent/"+d).pipe((0,s.U)(_=>_.map(h=>n.formatDates(h)))))}editEmployment(d,_,h,E,m){return(0,t.z)(this.http.put(this.serverUrl+"employment/"+d,Object.assign(Object.assign(Object.assign({from:_.toISOString()},void 0!==h?{status:h}:{}),void 0!==E?{until:E}:{}),void 0!==m?{notes:m}:{})).pipe((0,s.U)(C=>n.formatDates(C))))}endEmployment(d,_,h,E){return(0,t.z)(this.http.put(this.serverUrl+"employment/"+d,Object.assign({status:_,until:h.toISOString()},E?{notes:E}:{})).pipe((0,s.U)(m=>n.formatDates(m))))}}return n.\u0275fac=function(d){return new(d||n)(f.LFG(v.eN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},797:(y,D,o)=>{o.d(D,{_:()=>i});var t=o(4004),s=o(262),r=o(2340),f=o(5e3),v=o(520);let i=(()=>{class g{constructor(n){this.http=n,this.serverUrl=r.N.apiServer,this.serverV2Url=r.N.v2apiServer}findDistinctLocations(n,T){return this.http.post(this.serverUrl+"location/filter-distinct",Object.assign(Object.assign({},n?{country:n}:{}),T?{location:T}:{})).pipe((0,t.U)(d=>({countries:d.distinctOptions[0].countries,properties:d.distinctOptions[0].locations})),(0,s.K)(d=>(console.error(d.error),[])))}getAllProperties(){return this.http.get(this.serverV2Url+"property").pipe((0,t.U)(n=>({properties:n})),(0,s.K)(n=>(console.error(n.error),[])))}}return g.\u0275fac=function(n){return new(n||g)(f.LFG(v.eN))},g.\u0275prov=f.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},4053:(y,D,o)=>{o.d(D,{U:()=>g});var t=o(3905),s=o(4004),r=o(2340),f=o(9147),v=o(5e3),i=o(520);let g=(()=>{class p{constructor(T){this.http=T,this.serverUrl=r.N.v2apiServer}getTeamByLeader(T){return(0,t.z)(this.http.get(this.serverUrl+"team/"+T).pipe((0,s.U)(d=>Object.assign(Object.assign(Object.assign({},d),d.employment?{employment:f.Ib.formatDates(d.employment)}:{}),{teamMembers:d.teamMembers.map(_=>Object.assign(Object.assign({},_),_.employment?{employment:f.Ib.formatDates(_.employment)}:{}))}))))}getRelevantJobByTalent(T){return(0,t.z)(this.http.get(this.serverUrl+"team/relevant-job/"+T).pipe((0,s.U)(d=>d)))}getTopMostJobInHierarchy(){return(0,t.z)(this.http.get(this.serverUrl+"team/top-most-job/").pipe((0,s.U)(T=>T)))}addEndedEmployment(T,d,_,h,E,m,C){return(0,t.z)(this.http.post(this.serverUrl+"team/ended-employment",Object.assign({title:void 0,leaderJob:void 0,property:T,position:d,talent:_,status:h,from:E,until:m},C?{notes:C}:{})).pipe((0,s.U)(Z=>Z)))}addJob(T,d,_){return(0,t.z)(this.http.post(this.serverUrl+"job/",{leader:T,property:d,position:_}).pipe((0,s.U)(h=>h)))}removeJob(T){return(0,t.z)(this.http.delete(this.serverUrl+"job/"+T).pipe((0,s.U)(d=>d)))}}return p.\u0275fac=function(T){return new(T||p)(v.LFG(i.eN))},p.\u0275prov=v.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},3407:(y,D,o)=>{o.d(D,{A:()=>v,g:()=>f});var t=o(5e3),s=o(9808),r=o(2382);let f=(()=>{class i{constructor(p,n,T,d){this.el=p,this.ngModel=n,this.control=T,this.cd=d,this.onResize=new t.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(p){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(p){this.autoResize&&this.resize(p)}onBlur(p){this.autoResize&&this.resize(p)}resize(p){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(p||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return i.\u0275fac=function(p){return new(p||i)(t.Y36(t.SBq),t.Y36(r.On,8),t.Y36(r.a5,8),t.Y36(t.sBO))},i.\u0275dir=t.lG2({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(p,n){1&p&&t.NdJ("input",function(d){return n.onInput(d)})("focus",function(d){return n.onFocus(d)})("blur",function(d){return n.onBlur(d)}),2&p&&t.ekj("p-filled",n.filled)("p-inputtextarea-resizable",n.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),i})(),v=(()=>{class i{}return i.\u0275fac=function(p){return new(p||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[s.ez]]}),i})()}}]);