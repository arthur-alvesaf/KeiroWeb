"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[572],{9913:(C,v,s)=>{s.d(v,{Z:()=>E});var e=s(5e3),t=s(2382),u=s(8372),l=s(9766),d=s(9808),p=s(4036),m=s(9783),o=s(6526);function i(a,f){if(1&a&&(e.TgZ(0,"div",9),e.TgZ(1,"em"),e._uU(2),e.qZA(),e.qZA()),2&a){const _=e.oxw(2);e.xp6(2),e.Oqu(_.filter.metadata.visibleName)}}const n=function(){return[]};function r(a,f){if(1&a&&(e.TgZ(0,"p-dropdown",7),e.YNc(1,i,3,1,"ng-template",8),e.qZA()),2&a){const _=e.oxw();e.Q6J("formControl",_.control)("options",_.filter.metadata.options||e.DdM(5,n))("filter",!0)("placeholder",_.filter.metadata.visibleName)("showClear",_.filter.value&&!_.filter.metadata.required)}}function c(a,f){if(1&a&&e._UZ(0,"p-multiSelect",10),2&a){const _=e.oxw();e.Q6J("formControl",_.control)("options",_.filter.metadata.options||e.DdM(3,n))("placeholder",_.filter.metadata.visibleName)}}function h(a,f){if(1&a&&e._UZ(0,"p-multiSelect",11),2&a){const _=e.oxw();e.Q6J("formControl",_.control)("filter",!1)("options",_.filter.metadata.options||e.DdM(4,n))("placeholder",_.filter.metadata.visibleName)}}function D(a,f){if(1&a&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&a){const _=f.$implicit;e.Q6J("value",_.value),e.xp6(1),e.Oqu(_.name)}}function M(a,f){if(1&a&&(e.TgZ(0,"select",12),e.YNc(1,D,2,2,"option",13),e.qZA()),2&a){const _=e.oxw();e.Q6J("formControl",_.control),e.xp6(1),e.Q6J("ngForOf",_.filter.metadata.options)}}function g(a,f){if(1&a){const _=e.EpF();e.TgZ(0,"a",15),e.NdJ("click",function(){return e.CHM(_),e.oxw().onRemove.emit()}),e._UZ(1,"i",16),e.qZA()}}let E=(()=>{class a{constructor(){this.canRemove=!0,this.filterClass="",this.onRemove=new e.vpe}get FilterType(){return l.v}ngOnInit(){this.control=new t.NI(this.filter.value),this.control.valueChanges.pipe((0,u.b)(200)).subscribe(_=>{this.filter.value=_}),this.filter.valueChanges.subscribe(()=>{this.control.setValue(this.filter.value,{emitEvent:!1})})}}return a.\u0275fac=function(_){return new(_||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["alasta-filter-item"]],inputs:{filter:"filter",canRemove:"canRemove",filterClass:"filterClass"},outputs:{onRemove:"onRemove"},decls:7,vars:6,consts:[["id","filter-item",3,"ngClass"],["id","filter-value",3,"ngSwitch"],["optionLabel","name","optionValue","value","styleClass","alasta-filter-dropdown",3,"formControl","options","filter","placeholder","showClear",4,"ngSwitchCase"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","options","placeholder",4,"ngSwitchCase"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","filter","options","placeholder",4,"ngSwitchCase"],[3,"formControl",4,"ngSwitchDefault"],["id","filter-remover","class","btn btn-sm btn-secondary-outline p-1",3,"click",4,"ngIf"],["optionLabel","name","optionValue","value","styleClass","alasta-filter-dropdown",3,"formControl","options","filter","placeholder","showClear"],["pTemplate","header"],[1,"filter-dropdown-header"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","options","placeholder"],["optionLabel","name","optionValue","value","selectedItemsLabel","{0} items selected",3,"formControl","filter","options","placeholder"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","filter-remover",1,"btn","btn-sm","btn-secondary-outline","p-1",3,"click"],[1,"fas","fa-trash-alt"]],template:function(_,O){1&_&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,r,2,6,"p-dropdown",2),e.YNc(3,c,1,4,"p-multiSelect",3),e.YNc(4,h,1,5,"p-multiSelect",4),e.YNc(5,M,2,2,"select",5),e.qZA(),e.YNc(6,g,2,0,"a",6),e.qZA()),2&_&&(e.Q6J("ngClass",O.filterClass),e.xp6(1),e.Q6J("ngSwitch",O.filter.metadata.type),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.DROPDOWN_SEARCH),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.MULTISELECT_SEARCH),e.xp6(1),e.Q6J("ngSwitchCase",O.FilterType.MULTISELECT),e.xp6(2),e.Q6J("ngIf",O.canRemove))},directives:[d.mk,d.RF,d.n9,p.Lt,t.JJ,t.oH,m.jx,o.NU,d.ED,t.EJ,d.sg,t.YN,t.Kr,d.O5],styles:["#filter-item[_ngcontent-%COMP%]{border-radius:.25rem;display:inline-flex;justify-content:center;align-items:center}#filter-item[_ngcontent-%COMP%]   #filter-remover[_ngcontent-%COMP%]{margin:0 .3rem;width:1.4rem;height:1.4rem;line-height:0;border-radius:.25%}.filter-dropdown-header[_ngcontent-%COMP%]{padding:.2rem .75rem;background-color:#efefef}"]}),a})()},7064:(C,v,s)=>{s.d(v,{i:()=>o});var e=s(9808),t=s(2382),u=s(3077),l=s(3345),d=s(4036),p=s(6526),m=s(5e3);let o=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({imports:[[e.ez,t.UX,u.mr,l.k,d.kW,p.q4]]}),i})()},5653:(C,v,s)=>{s.d(v,{i:()=>d});var e=s(5e3),t=s(1135),u=s(7197),l=s(6817);let d=(()=>{class p{constructor(o){this._filterGroupSubject=new t.X([]),this.filterGroupsState=this._filterGroupSubject.asObservable(),this.valueChange=new e.vpe,this.lastInformed=void 0,o?(this.dropdownOptions=o.dropdownOptions,this.filtersMetadata=o.filtersMetadata):(this.dropdownOptions=[],this.filtersMetadata=[]);for(const i of this.filtersMetadata)if(i.required){let n=new l.w(i,"");this.addFilter(n)}}recursiveFindFiltersMetadata(o,i,n=!1){i||(i=this.filtersMetadata);for(const r of i){if(o(r))return r;if(r.children){const c=this.recursiveFindFiltersMetadata(o,r.children);if(c)return n&&this.addFilter(new l.w(r,"")),c}}}getMetadataWithId(o){return this.recursiveFindFiltersMetadata(i=>i.id==o)}addFilter(o,i=!1,n=!0){let r=this._filterGroupSubject.getValue(),c=r.find(h=>h.groupName==o.metadata.group);if(c){if(!o.metadata.multiple){const h=c.filters.find(D=>D.metadata.id==o.metadata.id);if(h)return void(i&&h.value!=o.value?h.setValue(o.value,!0,{ignoreChange:n}):console.warn("Filter already selected and has value"))}c.filters.push(o)}else c={groupName:o.metadata.group,filters:[o]},r.push(c);o.valueChanges.subscribe(h=>{h&&h.additional&&h.additional.ignoreChange||this.informChange()}),this._filterGroupSubject.next(r)}addFilterWithId(o,i=""){const n=this.recursiveFindFiltersMetadata(r=>r.id==o,void 0,!0);if(n){const r=new l.w(n,i);this.addFilter(r,!0,!1)}else console.warn("There is no filter with this ID")}canRemoveFilter(o){return!(o.metadata.required||o.metadata.children&&o.metadata.children.length>0&&this.getUngroupedFilters().some(i=>{var n;return null===(n=o.metadata.children)||void 0===n?void 0:n.some(r=>r.id==i.metadata.id)}))}removeFilter(o){if(!this.canRemoveFilter(o))return;let i=this._filterGroupSubject.getValue(),n=i.find(r=>r.groupName==o.metadata.group);n&&(n.filters=n.filters.filter(r=>r!=o),0==n.filters.length&&i.splice(i.indexOf(n),1)),this._filterGroupSubject.next(i),this.informChange()}getUngroupedFilters(){const o=this._filterGroupSubject.getValue();let i=[];for(const n of o)i.push(...n.filters);return i}getSimpleFilterListValue(){let o={};const i=this.getUngroupedFilters();for(const n of i)if(u.g.hasValue(n.value)){if(i.some(r=>r.metadata.children&&r.metadata.children.some(c=>n.metadata.id==c.id)&&!u.g.hasValue(r.value)))continue;Object.keys(o).includes(n.metadata.key)?Array.isArray(o[n.metadata.key])?o[n.metadata.key].push(n.value):o[n.metadata.key]=[o[n.metadata.key],n.value]:o[n.metadata.key]=n.value}return o}informChange(){const o=this.getSimpleFilterListValue();this.isEqual(this.lastInformed,o)||(this.valueChange.emit(o),this.lastInformed=o)}addFilterValues(o){const i=this.getSimpleFilterListValue();for(let n of Object.keys(o)){const r=this.recursiveFindFiltersMetadata(c=>c.key==n);if(r){const c=new l.w(r,o[n]);this.addFilter(c,!0)}else console.warn("There is no filter with this key")}this.isEqual(this.getSimpleFilterListValue(),i)||this.informChange()}isEqual(o,i){return JSON.stringify(o)==JSON.stringify(i)}}return p.\u0275fac=function(o){return new(o||p)(e.LFG("filterConfiguration",8))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac}),p})()},4829:(C,v,s)=>{s.d(v,{a:()=>M});var e=s(7197),t=s(5e3),u=s(9808),l=s(9913),d=s(3077);const p=["selector"];function m(g,E){1&g&&t.Hsn(0,0,["*ngTemplateOutlet","selector ? selector : defaultSelector"])}function o(g,E){if(1&g&&(t.TgZ(0,"span",9),t._uU(1),t.qZA()),2&g){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.groupName)}}function i(g,E){if(1&g){const a=t.EpF();t.TgZ(0,"alasta-filter-item",10),t.NdJ("onRemove",function(){const O=t.CHM(a).$implicit;return t.oxw(2).service.removeFilter(O)}),t.qZA()}if(2&g){const a=E.$implicit,f=t.oxw(2);t.Gre("order-",a.metadata.groupOrder," mx-1 mb-1"),t.Q6J("filter",a)("filterClass",f.filterNeedsValue(a)?"border border-danger":"border border-secondary")("canRemove",f.service.canRemoveFilter(a))}}function n(g,E){if(1&g&&(t.TgZ(0,"div",5),t.YNc(1,o,2,1,"span",6),t.TgZ(2,"div",7),t.YNc(3,i,1,6,"alasta-filter-item",8),t.qZA(),t.qZA()),2&g){const a=E.$implicit;t.xp6(1),t.Q6J("ngIf",a.groupName),t.xp6(2),t.Q6J("ngForOf",a.filters)}}function r(g,E){if(1&g){const a=t.EpF();t.TgZ(0,"li",17),t.TgZ(1,"button",18),t.NdJ("click",function(){const O=t.CHM(a).$implicit;return t.oxw(3).service.addFilterWithId(O.id)}),t._uU(2),t.qZA(),t.qZA()}if(2&g){const a=E.$implicit,f=t.oxw(3);t.xp6(1),t.Q6J("disabled",f.canSelectDropdownOption(a.id)),t.xp6(1),t.hij(" ",a.name," ")}}function c(g,E){if(1&g&&(t.TgZ(0,"ul",15),t.YNc(1,r,3,2,"li",16),t.qZA()),2&g){const a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.service.dropdownOptions)}}function h(g,E){1&g&&(t.TgZ(0,"div",11),t.TgZ(1,"button",12),t._uU(2," Add filter "),t._UZ(3,"span",13),t.qZA(),t.YNc(4,c,2,1,"ul",14),t.qZA())}const D=["*"];let M=(()=>{class g{constructor(){}ngOnInit(){}canSelectDropdownOption(a){return!!this.service.getUngroupedFilters().some(f=>f.metadata.id==a&&!f.metadata.multiple)}filterNeedsValue(a){return!(e.g.hasValue(a.value)||!a.metadata.children||!this.service.getUngroupedFilters().some(f=>{var _;return(null===(_=a.metadata.children)||void 0===_?void 0:_.some(O=>O.id==f.metadata.id))&&e.g.hasValue(f.value)}))}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["alasta-filters-list"]],contentQueries:function(a,f,_){if(1&a&&t.Suo(_,p,5),2&a){let O;t.iGM(O=t.CRH())&&(f.selector=O.first)}},inputs:{service:"service"},ngContentSelectors:D,decls:7,vars:4,consts:[["id","filters-list",1,"d-flex","flex-wrap"],["id","filters-dropdown",1,"mr-1"],[4,"ngTemplateOutlet"],["class","filter-group border border-primary mr-1 mb-1",4,"ngFor","ngForOf"],["defaultSelector",""],[1,"filter-group","border","border-primary","mr-1","mb-1"],["class","filter-group-title",4,"ngIf"],[1,"d-flex","flex-wrap"],[3,"class","filter","filterClass","canRemove","onRemove",4,"ngFor","ngForOf"],[1,"filter-group-title"],[3,"filter","filterClass","canRemove","onRemove"],["dropdown","",1,"btn-group"],["id","filter-dropdown-button","dropdownToggle","","type","button","aria-controls","filter-dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["id","filter-dropdown","class","dropdown-menu","role","menu","aria-labelledby","filter-dropdown-button",4,"dropdownMenu"],["id","filter-dropdown","role","menu","aria-labelledby","filter-dropdown-button",1,"dropdown-menu"],["role","menuitem",4,"ngFor","ngForOf"],["role","menuitem"],[1,"dropdown-item",3,"disabled","click"]],template:function(a,f){if(1&a&&(t.F$t(),t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,m,1,0,"ng-content",2),t.qZA(),t.YNc(3,n,4,2,"div",3),t.ALo(4,"async"),t.qZA(),t.YNc(5,h,5,0,"ng-template",null,4,t.W1O)),2&a){const _=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",f.selector?f.selector:_),t.xp6(1),t.Q6J("ngForOf",t.lcZ(4,2,f.service.filterGroupsState))}},directives:[u.tP,u.sg,u.O5,l.Z,d.TO,d.Mq,d.Hz],pipes:[u.Ov],styles:[".filter-group[_ngcontent-%COMP%]{border-radius:.25rem}.filter-group[_ngcontent-%COMP%] > .filter-group-title[_ngcontent-%COMP%]{display:block;font-size:.8rem;margin:0 .8rem}"]}),g})()},9766:(C,v,s)=>{s.d(v,{v:()=>e});var e=(()=>{return(t=e||(e={}))[t.DROPDOWN_SEARCH=0]="DROPDOWN_SEARCH",t[t.MULTISELECT_SEARCH=1]="MULTISELECT_SEARCH",t[t.MULTISELECT=2]="MULTISELECT",t[t.TEXT_INPUT=3]="TEXT_INPUT",t[t.TOGGLE=4]="TOGGLE",e;var t})()},6817:(C,v,s)=>{s.d(v,{w:()=>t});var e=s(5e3);class t{constructor(l,d){this.valueChanges=new e.vpe,this.metadata=l,this.value=d}set value(l){this.setValue(l)}setValue(l,d=!0,p){this._value=l,d&&this.valueChanges.emit({value:this._value,additional:p})}get value(){return this._value}}},797:(C,v,s)=>{s.d(v,{_:()=>m});var e=s(4004),t=s(262),u=s(3905),l=s(2340),d=s(5e3),p=s(520);let m=(()=>{class o{constructor(n){this.http=n,this.serverUrl=l.N.apiServer,this.serverV2Url=l.N.v2apiServer}findDistinctLocations(n,r){return this.http.post(this.serverUrl+"location/filter-distinct",Object.assign(Object.assign({},n?{country:n}:{}),r?{location:r}:{})).pipe((0,e.U)(c=>({countries:c.distinctOptions[0].countries,properties:c.distinctOptions[0].locations})),(0,t.K)(c=>(console.error(c.error),[])))}getAllProperties(){return(0,u.z)(this.http.get(this.serverV2Url+"property").pipe((0,e.U)(n=>({properties:n})),(0,t.K)(n=>(console.error(n.error),[]))))}}return o.\u0275fac=function(n){return new(n||o)(d.LFG(p.eN))},o.\u0275prov=d.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},917:(C,v,s)=>{s.d(v,{m:()=>p});var e=s(4004),t=s(3905),u=s(2340),l=s(5e3),d=s(520);let p=(()=>{class m{constructor(i){this.http=i,this.serverUrl=u.N.apiServer,this.serverV2Url=u.N.v2apiServer}findDistinctPositions(i,n,r){return this.http.post(this.serverUrl+"position/filter-distinct",Object.assign(Object.assign(Object.assign({},i?{area:i}:{}),n?{department:n}:{}),r?{position:r}:{})).pipe((0,e.U)(c=>({areas:c.distinctOptions[0].areas,departments:c.distinctOptions[0].departments,positions:c.distinctOptions[0].positions})))}getAllPositions(){return(0,t.z)(this.http.get(this.serverV2Url+"position").pipe((0,e.U)(i=>({positions:i}))))}listPositions(i,n,r){return(0,t.z)(this.http.get(this.serverV2Url+"position/list",{params:Object.assign(Object.assign(Object.assign({},i?{search:i}:{}),r?{page:r}:{}),n?{count:n}:{})}).pipe((0,e.U)(c=>c)))}createPosition(i){return(0,t.z)(this.http.post(this.serverV2Url+"position",Object.assign(Object.assign(Object.assign(Object.assign({},i.name?{name:i.name}:{}),i.department?{department:i.department}:{}),i.area?{area:i.area}:{}),i.description?{description:i.description}:{})).pipe((0,e.U)(n=>n)))}editPosition(i,n){return(0,t.z)(this.http.put(this.serverV2Url+"position/"+i,Object.assign(Object.assign(Object.assign(Object.assign({},n.name?{name:n.name}:{}),n.department?{department:n.department}:{}),n.area?{area:n.area}:{}),n.description?{description:n.description}:{})).pipe((0,e.U)(r=>r)))}}return m.\u0275fac=function(i){return new(i||m)(l.LFG(d.eN))},m.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},4954:(C,v,s)=>{s.d(v,{m:()=>o});var e=s(3905),t=s(4004),u=s(262),l=s(2340),d=s(2027),p=s(5e3),m=s(520);let o=(()=>{class i{constructor(r){this.http=r,this.serverUrl=l.N.apiServer,this.serverV2Url=l.N.v2apiServer}findReviewWindows(){return this.http.get(this.serverUrl+"window").pipe((0,t.U)(r=>({reviewWindows:r.windows})),(0,u.K)(r=>(console.error(r.error),[])))}getReviewCycleStats(r){return(0,e.z)(this.http.post(this.serverUrl+"talent/window",{windowRId:r}).pipe((0,t.U)(c=>c)))}static formatDates(r){if(r)return Object.assign(Object.assign(Object.assign({},r),r.startDate?{startDate:new d.p({ISODateString:r.startDate})}:{}),r.endDate?{endDate:new d.p({ISODateString:r.endDate})}:{})}getAllReviewCycles(){return(0,e.z)(this.http.get(this.serverV2Url+"review-cycle").pipe((0,t.U)(r=>({reviewCycles:r.map(c=>i.formatDates(c))}))))}getCurrentReviewCycle(){return(0,e.z)(this.http.get(this.serverV2Url+"review-cycle/current").pipe((0,t.U)(r=>({reviewCycle:i.formatDates(r)}))))}createReviewCycle(r){return(0,e.z)(this.http.post(this.serverV2Url+"review-cycle",Object.assign(Object.assign(Object.assign({},r.name?{name:r.name}:{}),r.startDate?{startDate:r.startDate}:{}),r.endDate?{endDate:r.endDate}:{})).pipe((0,t.U)(c=>i.formatDates(c))))}editReviewCycle(r){return(0,e.z)(this.http.put(this.serverV2Url+"review-cycle/"+r._id,Object.assign(Object.assign(Object.assign({},r.name?{name:r.name}:{}),r.startDate?{startDate:r.startDate}:{}),r.endDate?{endDate:r.endDate}:{})).pipe((0,t.U)(c=>i.formatDates(c))))}deleteReviewCycle(r){return(0,e.z)(this.http.delete(this.serverV2Url+"review-cycle/"+r).pipe((0,t.U)(c=>c)))}}return i.\u0275fac=function(r){return new(r||i)(p.LFG(m.eN))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},8254:(C,v,s)=>{s.d(v,{M:()=>m});var e=s(3905),t=s(4004),u=s(262),l=s(2340),d=s(5e3),p=s(520);let m=(()=>{class o{constructor(n){this.http=n,this.serverUrl=l.N.apiServer}getBoxes(){return(0,e.z)(this.http.get(this.serverUrl+"box").pipe((0,t.U)(n=>({boxes:n.boxes.map(r=>({pos:r.pos,title:r.title,txtCol:r.txtCol,bkgCol:r.bkgCol,potRng:r.potRng,perRng:r.perRng,_id:r._id}))})),(0,u.K)(n=>(console.error(n.error),[]))))}}return o.\u0275fac=function(n){return new(n||o)(d.LFG(p.eN))},o.\u0275prov=d.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},2338:(C,v,s)=>{s.d(v,{F:()=>e});class e{static encodeObjectToURLParam(u,l=""){const d=Object.keys(u).map(p=>{const m=u[p];return u.constructor===Array?p=`${l}[]`:u.constructor===Object&&(p=l?`${l}[${p}]`:p),"object"==typeof m?this.encodeObjectToURLParam(m,p):`${p}=${encodeURIComponent(m)}`});return[].concat.apply([],d).join("&")}static decodeURLParamToObject(u){let l={};for(const d of u.split("&")){let[p,m]=d.split("=");m=decodeURIComponent(m),this.handleSingleValue(l,p,m)}return l}static handleSingleValue(u,l,d){if(l.includes("["))if("[]"==l)u.push(d);else{const p=l.indexOf("["),m=l.indexOf("]"),o=l.substring(0,p);if(p+1==m){const i=l.substring(p);if(""!=o)null==u[o]&&(u[o]=[]),this.handleSingleValue(u[o],i,d);else{const n=l.substring(m+1),r=n.indexOf("["),c=n.indexOf("]");if(r+1==c){let h=[];u.push(h),this.handleSingleValue(h,n,d)}else{const h=n.substring(r+1,c)+n.substring(c+1);let D={};u.push(D),this.handleSingleValue(D,h,d)}}}else{const i=l.substring(p+1,m)+l.substring(m+1);null==u[o]&&(u[o]={}),this.handleSingleValue(u[o],i,d)}}else u[l]=d}}}}]);