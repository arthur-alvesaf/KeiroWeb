"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[721],{1658:(z,B,s)=>{s.d(B,{d:()=>i});var q=s(4004);class i{static valueNotInArray(w){return v=>w.includes(v.value)?{valueInArray:{value:v.value}}:null}static valueInArray(w){return v=>w.includes(v.value)?null:{valueNotInOptions:{value:v.value}}}static optionalValueInArray(w){return v=>w.pipe((0,q.U)(f=>f.includes(v.value)),(0,q.U)(f=>f?null:{valueNotInOptions:{value:v.value}}))}static allOrNothing(w){return v=>{const f=w.some(b=>{var l;return null===(l=v.get(b))||void 0===l?void 0:l.value}),F=w.every(b=>{var l;return null===(l=v.get(b))||void 0===l?void 0:l.value});return w.forEach(b=>{let l=v.get(b);f&&!F?(null==l?void 0:l.value)||null==l||l.setErrors(Object.assign(Object.assign({},l.errors),{allOrNothing:f})):(null==l?void 0:l.errors)&&l.errors.allOrNothing&&(delete l.errors.allOrNothing,l.markAsUntouched(),l.updateValueAndValidity())}),f&&!F?{allOrNothing:f}:null}}static isInteger(){return w=>{const v=parseFloat(w.value);return!isNaN(v)&&isFinite(v)&&Number.isInteger(v)&&"number"==typeof v?null:{notInteger:{value:w.value}}}}static isNumeric(){return w=>!isNaN(parseFloat(w.value))&&isFinite(w.value)?null:{notNumeric:{value:w.value}}}static isWithinDates(w,v,f){return F=>f.date.valueOf()>w.date.valueOf()&&f.date.valueOf()<v.date.valueOf()?null:{dateNotAcceptable:{value:F.value}}}}},7721:(z,B,s)=>{s.r(B),s.d(B,{ReviewsModule:()=>Ee});var q=s(9808),i=s(2382),a=s(7322),w=s(7531),v=s(5399),f=s(5350),F=s(1217),b=s(2236),l=s(1035),V=s(727),$=s(9300),o=s(2776),p=s(2027),n=s(1658),e=s(4893),P=s(18),G=s(171),ee=s(921),te=s(6489);function ie(d,g){if(1&d&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e._UZ(2,"app-shared-review-window-progress",12),e.qZA(),e.qZA()),2&d){const t=e.oxw();e.xp6(2),e.Q6J("reviewWindow",t.currentReviewWindow)("totalTalents",t.totalTalents)("reviewedTalents",t.reviewedTalents)}}function ne(d,g){if(1&d){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(t);const m=e.oxw(),_=e.MAs(23);return m.addReviewWindowInfo(_)}),e._UZ(2,"i",15),e._uU(3," Add new Review Cycle "),e.qZA(),e.qZA()}}function de(d,g){1&d&&(e.TgZ(0,"div",16),e.TgZ(1,"h6"),e._uU(2,"More"),e.qZA(),e.qZA())}function oe(d,g){1&d&&(e.TgZ(0,"span",18),e._uU(1,"Curent Cycle"),e.qZA())}function ae(d,g){if(1&d){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const m=e.oxw(2).$implicit,_=e.oxw(),E=e.MAs(23);return _.editReviewWindowInfo(E,m)}),e._UZ(1,"i",21),e._uU(2," Edit "),e.qZA()}}function re(d,g){if(1&d&&(e.TgZ(0,"div",16),e.YNc(1,ae,3,0,"button",19),e.qZA()),2&d){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.canBeEdited)}}function se(d,g){if(1&d&&(e.TgZ(0,"div",4),e.TgZ(1,"div",7),e.TgZ(2,"p"),e._uU(3),e.YNc(4,oe,2,0,"span",17),e.qZA(),e.qZA(),e.TgZ(5,"div",8),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.YNc(11,re,2,1,"div",9),e.qZA()),2&d){const t=g.$implicit,r=e.oxw();e.xp6(3),e.hij(" ",t.name||"None on file"," "),e.xp6(1),e.Q6J("ngIf",t.hasStarted&&!t.hasEnded),e.xp6(3),e.AsE("",t.start||"None on file"," - ",t.start.displayTime(),""),e.xp6(3),e.AsE("",t.end||"None on file"," - ",t.end.displayTime(),""),e.xp6(1),e.Q6J("ngIf",r.canAddEditReviewCycles)}}function le(d,g){1&d&&(e.TgZ(0,"span"),e._uU(1,"Add "),e.qZA())}function ue(d,g){1&d&&(e.TgZ(0,"span"),e._uU(1,"Edit "),e.qZA())}function ve(d,g){if(1&d&&(e.TgZ(0,"alert",50),e._uU(1),e.qZA()),2&d){const t=e.oxw(3);e.Q6J("dismissible",!0),e.xp6(1),e.hij(" There was an error while trying to save the information: ",t.backendErrorMsg," ")}}function me(d,g){if(1&d&&(e.TgZ(0,"div"),e.TgZ(1,"mat-form-field",43),e.TgZ(2,"mat-label"),e._uU(3,"Hour"),e.qZA(),e._UZ(4,"input",51),e.TgZ(5,"mat-error"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"mat-form-field",43),e.TgZ(8,"mat-label"),e._uU(9,"Minute"),e.qZA(),e._UZ(10,"input",52),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(3);e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsHour.errors)),e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsMin.errors))}}function ce(d,g){if(1&d&&(e.TgZ(0,"div"),e.TgZ(1,"mat-form-field",43),e.TgZ(2,"mat-label"),e._uU(3,"Hour"),e.qZA(),e._UZ(4,"input",53),e.TgZ(5,"mat-error"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"mat-form-field",43),e.TgZ(8,"mat-label"),e._uU(9,"Minute"),e.qZA(),e._UZ(10,"input",54),e.TgZ(11,"mat-error"),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(3);e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weHour.errors)),e.xp6(1),e.Udp("width",25,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weMin.errors))}}function we(d,g){if(1&d&&(e.TgZ(0,"div",35),e.TgZ(1,"form",36),e.YNc(2,ve,2,2,"alert",37),e.TgZ(3,"div",38),e.TgZ(4,"div",39),e.TgZ(5,"mat-form-field",40),e.TgZ(6,"mat-label"),e._uU(7,"Review cycle name"),e.qZA(),e._UZ(8,"input",41),e.TgZ(9,"mat-error"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",39),e.TgZ(12,"mat-label",42),e.TgZ(13,"small"),e._uU(14,"Cycle start date"),e.qZA(),e.qZA(),e.TgZ(15,"mat-form-field",43),e.TgZ(16,"mat-label"),e._uU(17,"Month"),e.qZA(),e._UZ(18,"input",44),e.TgZ(19,"mat-error"),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"mat-form-field",43),e.TgZ(22,"mat-label"),e._uU(23,"Day"),e.qZA(),e._UZ(24,"input",45),e.TgZ(25,"mat-error"),e._uU(26),e.qZA(),e.qZA(),e.TgZ(27,"mat-form-field",43),e.TgZ(28,"mat-label"),e._uU(29,"Year"),e.qZA(),e._UZ(30,"input",46),e.TgZ(31,"mat-error"),e._uU(32),e.qZA(),e.qZA(),e.YNc(33,me,13,6,"div",24),e.qZA(),e.TgZ(34,"div",39),e.TgZ(35,"mat-label",42),e.TgZ(36,"small"),e._uU(37,"Cycle end date"),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field",43),e.TgZ(39,"mat-label"),e._uU(40,"Month"),e.qZA(),e._UZ(41,"input",47),e.TgZ(42,"mat-error"),e._uU(43),e.qZA(),e.qZA(),e.TgZ(44,"mat-form-field",43),e.TgZ(45,"mat-label"),e._uU(46,"Day"),e.qZA(),e._UZ(47,"input",48),e.TgZ(48,"mat-error"),e._uU(49),e.qZA(),e.qZA(),e.TgZ(50,"mat-form-field",43),e.TgZ(51,"mat-label"),e._uU(52,"Year"),e.qZA(),e._UZ(53,"input",49),e.TgZ(54,"mat-error"),e._uU(55),e.qZA(),e.qZA(),e.YNc(56,ce,13,6,"div",24),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&d){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.addEditReviewWindowForm),e.xp6(1),e.Q6J("ngIf",t.backendError),e.xp6(3),e.Udp("width",100,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).windowName.errors)),e.xp6(5),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsMonth.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsDay.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).wsYear.errors)),e.xp6(1),e.Q6J("ngIf",t.timeInput),e.xp6(5),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weMonth.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weDay.errors)),e.xp6(1),e.Udp("width",32,"%"),e.xp6(5),e.Oqu(t.prettifyError((null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.controls).weYear.errors)),e.xp6(1),e.Q6J("ngIf",t.timeInput)}}function pe(d,g){if(1&d){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).sendDeleteWindowModal()}),e._UZ(1,"i",56),e._uU(2," Delete "),e.qZA()}}function he(d,g){1&d&&(e.TgZ(0,"span"),e._uU(1,"Add new cycle"),e.qZA())}function ge(d,g){1&d&&(e.TgZ(0,"span"),e._uU(1,"Update cycle details"),e.qZA())}function fe(d,g){if(1&d){const t=e.EpF();e.TgZ(0,"div",22),e.TgZ(1,"h4",23),e.TgZ(2,"span"),e.YNc(3,le,2,0,"span",24),e.YNc(4,ue,2,0,"span",24),e._uU(5," Review Cycle "),e.qZA(),e.qZA(),e.TgZ(6,"button",25),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return null==m.modalRef?null:m.modalRef.hide()}),e.TgZ(7,"span",26),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,we,57,25,"div",27),e.TgZ(10,"div",28),e.TgZ(11,"div",29),e.YNc(12,pe,3,0,"button",30),e.TgZ(13,"button",31),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return null==m.modalRef?null:m.modalRef.hide()}),e._UZ(14,"i",32),e._uU(15," Cancel "),e.qZA(),e.TgZ(16,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().sendReviewWindowModal()}),e._UZ(17,"i",34),e.YNc(18,he,2,0,"span",24),e.YNc(19,ge,2,0,"span",24),e.qZA(),e.qZA(),e.qZA()}if(2&d){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.addEditReviewExtraInfo.create),e.xp6(1),e.Q6J("ngIf",!t.addEditReviewExtraInfo.create),e.xp6(5),e.Q6J("ngIf",t.addEditReviewWindowForm),e.xp6(3),e.Q6J("ngIf",t.addEditReviewExtraInfo.delete),e.xp6(4),e.Q6J("disabled",(null==t.addEditReviewExtraInfo?null:t.addEditReviewExtraInfo.processingForm)||(null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.invalid)||(null==t.addEditReviewWindowForm?null:t.addEditReviewWindowForm.pristine)),e.xp6(2),e.Q6J("ngIf",1==t.addEditReviewExtraInfo.create),e.xp6(1),e.Q6J("ngIf",1!=t.addEditReviewExtraInfo.create)}}let _e=(()=>{class d{constructor(t,r,m,_,E,I,R){this.modalService=t,this.router=r,this.fb=m,this.authStateService=_,this.sessionStateService=E,this.store=I,this.actionDispatcher=R,this.canAddEditReviewCycles=!1,this.totalTalents=0,this.reviewedTalents=0,this.allWindows=[],this.timeInput=!1,this.subscriptions=new V.w0,this.backendError=!1,this.backendErrorMsg="",this.addEditReviewExtraInfo={create:!0,delete:!1,processingForm:!1},this.reviewWindow$=I.pipe((0,l.Ys)("reviewWindowState")),this.store.dispatch((0,o.Dz)()),this.store.dispatch((0,o.Km)()),this.subscriptions.add(this.sessionStateService.onSessionDestroyed.subscribe(u=>{this.modalRef&&this.modalRef.hide()})),this.subscriptions.add(this.authStateService.authState.subscribe(u=>{let c;u.identity&&(c=u.identity),this.canAddEditReviewCycles="SuperAdmin"==(null==c?void 0:c.role)||"Admin"==(null==c?void 0:c.role)})),this.subscriptions.add(this.reviewWindow$.subscribe(u=>{var c,y,W;this.backendErrorMsg=null===(c=u.errorMessage)||void 0===c?void 0:c.error,this.totalTalents=u.talentsIgnoreReview?u.talentsIgnoreReview:0,this.reviewedTalents=u.reviewedTalents?u.reviewedTalents:0,this.currentReviewWindow!=u.currentWindowReview&&(this.currentReviewWindow=u.currentWindowReview?u.currentWindowReview:void 0,this.store.dispatch((0,o.v2)({windowRId:(null===(y=this.currentReviewWindow)||void 0===y?void 0:y.id)?null===(W=this.currentReviewWindow)||void 0===W?void 0:W.id:""})));let A=new p.p,x=new p.p;x.date.setMonth(x.date.getMonth()-1),u.allWindows.length&&(this.allWindows=[]);for(let Z of u.allWindows){if(null==Z._id)continue;let h={id:"",name:"",start:null,end:null,hasStarted:!1,hasEnded:!1,canBeEdited:!1};h.id=Z._id,h.name=Z.name,h.start=new p.p({ISODateString:Z.startDate}),h.end=new p.p({ISODateString:Z.endDate}),h.hasStarted=h.start.date.valueOf()<A.date.valueOf(),h.hasEnded=h.end.date.valueOf()<A.date.valueOf(),h.hasStarted?h.end.date.valueOf()>x.date.valueOf()&&(h.canBeEdited=!0):h.canBeEdited=!0,this.allWindows.push(h)}this.allWindows=this.allWindows.sort((Z,h)=>Z.start.date.valueOf()<h.end.date.valueOf()?1:-1)})),this.subscriptions.add(this.actionDispatcher.pipe((0,$.h)(u=>[o.UD.CREATE_REVIEW_WINDOW_SUCCESS,o.UD.CREATE_REVIEW_WINDOW_FAILURE,o.UD.EDIT_REVIEW_WINDOW_SUCCESS,o.UD.EDIT_REVIEW_WINDOW_FAILURE,o.UD.DELETE_REVIEW_WINDOW_SUCCESS,o.UD.DELETE_REVIEW_WINDOW_FAILURE].includes(u.type))).subscribe(u=>{var c;this.addEditReviewExtraInfo.processingForm=!1,this.backendError=!1,u.type.includes("success")&&(null===(c=this.modalRef)||void 0===c||c.hide(),u.type==o.UD.EDIT_REVIEW_WINDOW_SUCCESS&&this.store.dispatch((0,o.Dz)())),u.type.includes("failure")&&(this.backendError=!0)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}addReviewWindowInfo(t){this.modalRef=this.modalService.show(t,{keyboard:!1}),this.addEditReviewExtraInfo.create=!0,this.addEditReviewExtraInfo.delete=!1,this.backendError=!1,this.addEditReviewWindowForm=this.fb.group({windowName:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(100)]],wsDay:["",[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(31)]],wsMonth:["",[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(12)]],wsYear:["",[i.kI.required,n.d.isInteger(),i.kI.min(2020),i.kI.max((new Date).getFullYear()+10)]],weDay:["",[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(31)]],weMonth:["",[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(12)]],weYear:["",[i.kI.required,n.d.isInteger(),i.kI.min(2020),i.kI.max((new Date).getFullYear()+10)]]}),this.timeInput&&(this.addEditReviewWindowForm.addControl("wsMin",this.fb.control("",[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(59)])),this.addEditReviewWindowForm.addControl("wsHour",this.fb.control("",[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(23)])),this.addEditReviewWindowForm.addControl("weMin",this.fb.control("",[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(59)])),this.addEditReviewWindowForm.addControl("weHour",this.fb.control("",[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(23)])))}editReviewWindowInfo(t,r){var m,_,E,I,R;this.modalRef=this.modalService.show(t,{keyboard:!1}),this.addEditReviewExtraInfo.create=!1,this.addEditReviewExtraInfo.delete=!r.hasStarted,this.backendError=!1,this.addEditReviewWindowForm=this.fb.group({windowId:[r.id,[]],windowName:[r.name,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(100)]],wsDay:[String(r.start.day),[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(31)]],wsMonth:[String(r.start.month),[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(12)]],wsYear:[String(r.start.year),[i.kI.required,n.d.isInteger(),i.kI.min(2020),i.kI.max((new Date).getFullYear()+10)]],weDay:[String(r.end.day),[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(31)]],weMonth:[String(r.end.month),[i.kI.required,n.d.isInteger(),i.kI.min(1),i.kI.max(12)]],weYear:[String(r.end.year),[i.kI.required,n.d.isInteger(),i.kI.min(2020),i.kI.max((new Date).getFullYear()+10)]]}),this.timeInput&&(this.addEditReviewWindowForm.addControl("wsMin",this.fb.control(String(r.start.min),[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(59)])),this.addEditReviewWindowForm.addControl("wsHour",this.fb.control(String(r.start.hour),[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(23)])),this.addEditReviewWindowForm.addControl("weMin",this.fb.control(String(r.end.min),[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(59)])),this.addEditReviewWindowForm.addControl("weHour",this.fb.control(String(r.end.hour),[i.kI.required,n.d.isInteger(),i.kI.min(0),i.kI.max(23)]))),r.hasStarted&&(this.timeInput&&(null===(m=this.addEditReviewWindowForm.get("wsMin"))||void 0===m||m.disable(),null===(_=this.addEditReviewWindowForm.get("wsHour"))||void 0===_||_.disable()),null===(E=this.addEditReviewWindowForm.get("wsDay"))||void 0===E||E.disable(),null===(I=this.addEditReviewWindowForm.get("wsMonth"))||void 0===I||I.disable(),null===(R=this.addEditReviewWindowForm.get("wsYear"))||void 0===R||R.disable())}sendCreateReviewWindowModal(){var t,r,m,_,E,I,R,u,c,y,W,A,x,Z,h,k,M,D,O,N,Y,S;this.formWindow={name:"",start:new Date,end:new Date};let C={values:{year:"",month:"",day:""}},T={values:{year:"",month:"",day:""}};this.formWindow.name=null===(r=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowName"))||void 0===r?void 0:r.value,C.values.year=null===(_=null===(m=this.addEditReviewWindowForm)||void 0===m?void 0:m.get("wsYear"))||void 0===_?void 0:_.value,C.values.month=null===(I=null===(E=this.addEditReviewWindowForm)||void 0===E?void 0:E.get("wsMonth"))||void 0===I?void 0:I.value,C.values.day=null===(u=null===(R=this.addEditReviewWindowForm)||void 0===R?void 0:R.get("wsDay"))||void 0===u?void 0:u.value,this.timeInput&&(C.values.hour=null===(y=null===(c=this.addEditReviewWindowForm)||void 0===c?void 0:c.get("wsHour"))||void 0===y?void 0:y.value,C.values.min=null===(A=null===(W=this.addEditReviewWindowForm)||void 0===W?void 0:W.get("wsMin"))||void 0===A?void 0:A.value);let H=new p.p(C);this.formWindow.start=H.date,T.values.year=null===(Z=null===(x=this.addEditReviewWindowForm)||void 0===x?void 0:x.get("weYear"))||void 0===Z?void 0:Z.value,T.values.month=null===(k=null===(h=this.addEditReviewWindowForm)||void 0===h?void 0:h.get("weMonth"))||void 0===k?void 0:k.value,T.values.day=null===(D=null===(M=this.addEditReviewWindowForm)||void 0===M?void 0:M.get("weDay"))||void 0===D?void 0:D.value,T.values.hour="23",T.values.min="59",this.timeInput&&(T.values.hour=null===(N=null===(O=this.addEditReviewWindowForm)||void 0===O?void 0:O.get("weHour"))||void 0===N?void 0:N.value,T.values.min=null===(S=null===(Y=this.addEditReviewWindowForm)||void 0===Y?void 0:Y.get("weMin"))||void 0===S?void 0:S.value);let Q=new p.p(T);this.formWindow.end=Q.date,this.store.dispatch((0,o.GC)({newWindow:this.formWindow}))}sendEditReviewWindowModal(){var t,r,m,_,E,I,R,u,c,y,W,A,x,Z,h,k,M,D,O,N,Y,S,C,T,H,Q;this.formWindow={id:null===(r=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowId"))||void 0===r?void 0:r.value};let j=this.allWindows.filter(L=>{var K;return L.id==(null===(K=this.formWindow)||void 0===K?void 0:K.id)})[0],J={values:{year:"",month:"",day:""}},U={values:{year:"",month:"",day:""}};if((null===(_=null===(m=this.addEditReviewWindowForm)||void 0===m?void 0:m.get("windowName"))||void 0===_?void 0:_.value)!=j.name&&(this.formWindow.name=null===(I=null===(E=this.addEditReviewWindowForm)||void 0===E?void 0:E.get("windowName"))||void 0===I?void 0:I.value),!j.hasStarted){J.values.year=null===(u=null===(R=this.addEditReviewWindowForm)||void 0===R?void 0:R.get("wsYear"))||void 0===u?void 0:u.value,J.values.month=null===(y=null===(c=this.addEditReviewWindowForm)||void 0===c?void 0:c.get("wsMonth"))||void 0===y?void 0:y.value,J.values.day=null===(A=null===(W=this.addEditReviewWindowForm)||void 0===W?void 0:W.get("wsDay"))||void 0===A?void 0:A.value,this.timeInput&&(J.values.hour=null===(Z=null===(x=this.addEditReviewWindowForm)||void 0===x?void 0:x.get("wsHour"))||void 0===Z?void 0:Z.value,J.values.min=null===(k=null===(h=this.addEditReviewWindowForm)||void 0===h?void 0:h.get("wsMin"))||void 0===k?void 0:k.value);let L=new p.p(J);L.date.valueOf()!=j.start.date.valueOf()&&(this.formWindow.start=L.date)}U.values.year=null===(D=null===(M=this.addEditReviewWindowForm)||void 0===M?void 0:M.get("weYear"))||void 0===D?void 0:D.value,U.values.month=null===(N=null===(O=this.addEditReviewWindowForm)||void 0===O?void 0:O.get("weMonth"))||void 0===N?void 0:N.value,U.values.day=null===(S=null===(Y=this.addEditReviewWindowForm)||void 0===Y?void 0:Y.get("weDay"))||void 0===S?void 0:S.value,U.values.hour="23",U.values.min="59",this.timeInput&&(U.values.hour=null===(T=null===(C=this.addEditReviewWindowForm)||void 0===C?void 0:C.get("weHour"))||void 0===T?void 0:T.value,U.values.min=null===(Q=null===(H=this.addEditReviewWindowForm)||void 0===H?void 0:H.get("weMin"))||void 0===Q?void 0:Q.value);let X=new p.p(U);X.date.valueOf()!=j.end.date.valueOf()&&(this.formWindow.end=X.date),this.store.dispatch((0,o.BB)({editWindow:this.formWindow}))}sendReviewWindowModal(){this.addEditReviewExtraInfo.processingForm=!0,this.addEditReviewExtraInfo.create?this.sendCreateReviewWindowModal():this.sendEditReviewWindowModal()}sendDeleteWindowModal(){var t,r;this.addEditReviewExtraInfo.processingForm=!0,this.formWindow={id:""},this.formWindow.id=null===(r=null===(t=this.addEditReviewWindowForm)||void 0===t?void 0:t.get("windowId"))||void 0===r?void 0:r.value,this.store.dispatch((0,o.yQ)({deleteWindow:this.formWindow}))}prettifyError(t){return t?t.required?"Required":t.min||t.max?"Invalid":t.notInteger||t.notNumeric?"Not number":t.valueNotInOptions?"Unknown value":t.email?"Not valid email address":t.minlength||t.maxlength?"Invalid length":t.allOrNothing?"Incomplete work information":"":""}}return d.\u0275fac=function(t){return new(t||d)(e.Y36(P.tT),e.Y36(v.F0),e.Y36(i.qu),e.Y36(G.V),e.Y36(ee.W),e.Y36(l.yh),e.Y36(l.mK))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-create-window"]],decls:24,vars:4,consts:[[1,"animated","fadeIn"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-auto"],["class","col text-right",4,"ngIf"],[1,"col-4","col-md-3"],[1,"col-3","col-md-3"],["class","col-2 col-md-3",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],["addEditWindowModal",""],["sectionHeader","Current Review Cycle",3,"reviewWindow","totalTalents","reviewedTalents"],[1,"col","text-right"],[1,"btn","btn-sm","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square"],[1,"col-2","col-md-3"],["class","badge badge-pill badge-primary",4,"ngIf"],[1,"badge","badge-pill","badge-primary"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[1,"modal-header"],[1,"modal-title","pull-left"],[4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-edit"],[1,"modal-body"],[3,"formGroup"],["type","danger",3,"dismissible",4,"ngIf"],[1,"form-row"],[1,"col-12"],["appearance","outline"],["formControlName","windowName","matInput","","placeholder","Review cycle name"],[1,"d-block"],["appearance","outline",1,"d-inline-block"],["formControlName","wsMonth","matInput","","placeholder","MM"],["formControlName","wsDay","matInput","","placeholder","DD"],["formControlName","wsYear","matInput","","placeholder","YYYY"],["formControlName","weMonth","matInput","","placeholder","MM"],["formControlName","weDay","matInput","","placeholder","DD"],["formControlName","weYear","matInput","","placeholder","YYYY"],["type","danger",3,"dismissible"],["formControlName","wsHour","matInput","","placeholder","hh"],["formControlName","wsMin","matInput","","placeholder","mm"],["formControlName","weHour","matInput","","placeholder","hh"],["formControlName","weMin","matInput","","placeholder","mm"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-remove"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ie,3,3,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h4"),e._uU(7,"All Review Cycles"),e.qZA(),e.qZA(),e.YNc(8,ne,4,0,"div",6),e.qZA(),e.TgZ(9,"div"),e.TgZ(10,"div",4),e.TgZ(11,"div",7),e.TgZ(12,"h6"),e._uU(13,"Review cycle:"),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"h6"),e._uU(16,"Cycle start:"),e.qZA(),e.qZA(),e.TgZ(17,"div",8),e.TgZ(18,"h6"),e._uU(19,"Cycle end:"),e.qZA(),e.qZA(),e.YNc(20,de,3,0,"div",9),e.qZA(),e.YNc(21,se,12,7,"div",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(22,fe,20,7,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",r.currentReviewWindow),e.xp6(7),e.Q6J("ngIf",r.canAddEditReviewCycles),e.xp6(12),e.Q6J("ngIf",r.canAddEditReviewCycles),e.xp6(1),e.Q6J("ngForOf",r.allWindows))},directives:[q.O5,te.v,q.sg,i._Y,i.JL,i.sg,f.wx,a.KE,a.hX,i.Fj,w.Nt,i.JJ,i.u,a.TO],encapsulation:2}),d})(),Ee=(()=>{class d{}return d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[[v.Bz.forChild([{path:"",component:_e}]),q.ez,i.UX,f.nM,a.lN,w.c,F.HC.forRoot(),b.B]]}),d})()},1217:(z,B,s)=>{s.d(B,{HC:()=>$,O1:()=>l});var q=s(4559),i=s(9808),a=s(4893);function w(o,p){if(1&o&&(a.TgZ(0,"bar",2),a.Hsn(1),a.qZA()),2&o){const n=a.oxw();a.Q6J("type",n.type)("value",n._value)}}function v(o,p){if(1&o&&(a.TgZ(0,"bar",2),a._uU(1),a.qZA()),2&o){const n=p.$implicit;a.Q6J("type",n.type)("value",n.value),a.xp6(1),a.Oqu(n.label)}}function f(o,p){if(1&o&&a.YNc(0,v,2,3,"bar",3),2&o){const n=a.oxw();a.Q6J("ngForOf",n._value)}}const F=["*"];let b=(()=>{class o{constructor(){this.animate=!1,this.max=100}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac}),o})(),l=(()=>{class o{constructor(n){this.isStacked=!1,this.addClass=!0,this.bars=[],this._max=100,Object.assign(this,n)}set animate(n){this._animate=n,this.bars.forEach(e=>{e.animate=n})}set striped(n){this._striped=n,this.bars.forEach(e=>{e.striped=n})}set value(n){this.isStacked=Array.isArray(n),this._value=n}get isBs3(){return(0,q.XA)()}get max(){return this._max}set max(n){this._max=n,this.bars.forEach(e=>{e.recalculatePercentage()})}addBar(n){n.animate=this._animate,n.striped=this._striped,this.bars.push(n)}removeBar(n){this.bars.splice(this.bars.indexOf(n),1)}}return o.\u0275fac=function(n){return new(n||o)(a.Y36(b))},o.\u0275cmp=a.Xpm({type:o,selectors:[["progressbar"]],hostVars:3,hostBindings:function(n,e){2&n&&(a.uIk("max",e.max),a.ekj("progress",e.addClass))},inputs:{animate:"animate",striped:"striped",value:"value",max:"max",type:"type"},ngContentSelectors:F,decls:2,vars:2,consts:[[3,"type","value",4,"ngIf"],[3,"ngIf"],[3,"type","value"],[3,"type","value",4,"ngFor","ngForOf"]],template:function(n,e){1&n&&(a.F$t(),a.YNc(0,w,2,2,"bar",0),a.YNc(1,f,1,1,"ng-template",1)),2&n&&(a.Q6J("ngIf",!e.isStacked),a.xp6(1),a.Q6J("ngIf",e.isStacked))},directives:function(){return[i.O5,V,i.sg]},styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"]}),o})(),V=(()=>{class o{constructor(n,e,P){this.el=n,this.renderer=P,this.addClass=!0,this.percent=0,this.progress=e}get type(){return this._type}set type(n){this._type=n,this.applyTypeClasses()}get value(){return this._value}set value(n){!n&&0!==n||(this._value=n,this.recalculatePercentage())}get setBarWidth(){return this.recalculatePercentage(),this.percent}get isBs3(){return(0,q.XA)()}ngOnInit(){this.progress.addBar(this)}ngOnDestroy(){this.progress.removeBar(this)}recalculatePercentage(){this.percent=+(this.value/this.progress.max*100).toFixed(2);const n=this.progress.bars.reduce(function(e,P){return e+P.percent},0);n>100&&(this.percent-=n-100)}applyTypeClasses(){if(this._prevType){const e=`bg-${this._prevType}`;this.renderer.removeClass(this.el.nativeElement,`progress-bar-${this._prevType}`),this.renderer.removeClass(this.el.nativeElement,e),this._prevType=null}if(this._type){const e=`bg-${this._type}`;this.renderer.addClass(this.el.nativeElement,`progress-bar-${this._type}`),this.renderer.addClass(this.el.nativeElement,e),this._prevType=this._type}}}return o.\u0275fac=function(n){return new(n||o)(a.Y36(a.SBq),a.Y36(l,1),a.Y36(a.Qsj))},o.\u0275cmp=a.Xpm({type:o,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:15,hostBindings:function(n,e){2&n&&(a.uIk("aria-valuenow",e.value)("aria-valuetext",e.percent?e.percent.toFixed(0)+"%":"")("aria-valuemax",e.max),a.Udp("height","100","%")("width",e.setBarWidth,"%"),a.ekj("progress-bar-animated",!e.isBs3&&e.animate)("progress-bar-striped",e.striped)("active",e.isBs3&&e.animate)("progress-bar",e.addClass))},inputs:{type:"type",value:"value"},ngContentSelectors:F,decls:1,vars:0,template:function(n,e){1&n&&(a.F$t(),a.Hsn(0))},encapsulation:2}),o})(),$=(()=>{class o{static forRoot(){return{ngModule:o,providers:[b]}}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({imports:[[i.ez]]}),o})()}}]);