"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[964],{9147:(U,v,h)=>{h.d(v,{Ib:()=>R,Vg:()=>l,ub:()=>u});var A,g=h(3905),e=h(4004),M=h(2340),N=h(1571),S=h(529),l=(()=>{return(a=l||(l={}))[a.CANDIDATE=0]="CANDIDATE",a[a.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED=1]="CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED",a[a.CANDIDATE_ENDED_NOT_DESIRED=2]="CANDIDATE_ENDED_NOT_DESIRED",a[a.ACTIVE=10]="ACTIVE",a[a.ENDED=19]="ENDED",a[a.CHANGE_PROMOTION=20]="CHANGE_PROMOTION",a[a.CHANGE_LATERAL_MOVEMENT=21]="CHANGE_LATERAL_MOVEMENT",a[a.CHANGE_TRANSFER_SAME_POSITION=22]="CHANGE_TRANSFER_SAME_POSITION",a[a.CHANGE_TRANSFER_PROMOTION=23]="CHANGE_TRANSFER_PROMOTION",a[a.DISMISSAL_VOLUNTARY_ABSENTEEISM=50]="DISMISSAL_VOLUNTARY_ABSENTEEISM",a[a.DISMISSAL_VOLUNTARY_ABANDONMENT=51]="DISMISSAL_VOLUNTARY_ABANDONMENT",a[a.DISMISSAL_VOLUNTARY_RETIREMENT=52]="DISMISSAL_VOLUNTARY_RETIREMENT",a[a.DISMISSAL_VOLUNTARY_BETTER_OFFER=53]="DISMISSAL_VOLUNTARY_BETTER_OFFER",a[a.DISMISSAL_VOLUNTARY_PERSONAL=54]="DISMISSAL_VOLUNTARY_PERSONAL",a[a.DISMISSAL_FORCED_END_OF_CONTRACT=70]="DISMISSAL_FORCED_END_OF_CONTRACT",a[a.DISMISSAL_FORCED_DISEASE=71]="DISMISSAL_FORCED_DISEASE",a[a.DISMISSAL_FORCED_DEATH=72]="DISMISSAL_FORCED_DEATH",a[a.DISMISSAL_FORCED_LOW_PERFORMANCE=73]="DISMISSAL_FORCED_LOW_PERFORMANCE",a[a.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS=74]="DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS",a[a.DISMISSAL_FORCED_OTHERS=75]="DISMISSAL_FORCED_OTHERS",l;var a})();class u{}A=u,u.changesReasons=[l.CHANGE_PROMOTION,l.CHANGE_LATERAL_MOVEMENT,l.CHANGE_TRANSFER_SAME_POSITION,l.CHANGE_TRANSFER_PROMOTION],u.voluntaryDismissalReasons=[l.DISMISSAL_VOLUNTARY_ABSENTEEISM,l.DISMISSAL_VOLUNTARY_ABANDONMENT,l.DISMISSAL_VOLUNTARY_RETIREMENT,l.DISMISSAL_VOLUNTARY_BETTER_OFFER,l.DISMISSAL_VOLUNTARY_PERSONAL],u.forcedDismissalReasons=[l.DISMISSAL_FORCED_END_OF_CONTRACT,l.DISMISSAL_FORCED_DISEASE,l.DISMISSAL_FORCED_DEATH,l.DISMISSAL_FORCED_LOW_PERFORMANCE,l.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,l.DISMISSAL_FORCED_OTHERS],u.allDismissalReasons=[...A.voluntaryDismissalReasons,...A.forcedDismissalReasons],u.statusNameMap=new Map([[l.CANDIDATE,"Candidate"],[l.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED,"Candidate ended but not selected"],[l.CANDIDATE_ENDED_NOT_DESIRED,"Candidate not desired"],[l.ACTIVE,"Active"],[l.ENDED,"Ended"],[l.CHANGE_PROMOTION,"Promotion"],[l.CHANGE_LATERAL_MOVEMENT,"Lateral movement"],[l.CHANGE_TRANSFER_SAME_POSITION,"Transfer same position"],[l.CHANGE_TRANSFER_PROMOTION,"Transfer promotion"],[l.DISMISSAL_VOLUNTARY_ABSENTEEISM,"Absenteeism"],[l.DISMISSAL_VOLUNTARY_ABANDONMENT,"Abandonment"],[l.DISMISSAL_VOLUNTARY_RETIREMENT,"Retirement"],[l.DISMISSAL_VOLUNTARY_BETTER_OFFER,"Better offer"],[l.DISMISSAL_VOLUNTARY_PERSONAL,"Personal"],[l.DISMISSAL_FORCED_END_OF_CONTRACT,"End of contract"],[l.DISMISSAL_FORCED_DISEASE,"Disease"],[l.DISMISSAL_FORCED_DEATH,"Death"],[l.DISMISSAL_FORCED_LOW_PERFORMANCE,"Low performance"],[l.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,"Inapropiate behaviors"],[l.DISMISSAL_FORCED_OTHERS,"Other"]]);let R=(()=>{class a{constructor(_){this.http=_,this.serverUrl=M.N.v2apiServer}static formatDates(_){return{..._,..._.from?{from:new Date(_.from)}:{},..._.until?{until:new Date(_.until)}:{}}}createEmploymentRecord(_,f,E,O,T){return(0,g.z)(this.http.post(this.serverUrl+"employment/",{job:_,talent:f,status:E,from:O.toISOString(),...T?{allowMultiple:T}:{}}).pipe((0,e.U)(r=>a.formatDates(r))))}getActiveEmploymentForTalent(_){return(0,g.z)(this.http.get(this.serverUrl+"employment/active/"+_).pipe((0,e.U)(f=>f?a.formatDates(f):null)))}getRelevantEmploymentForReview(_,f){return(0,g.z)(this.http.get(this.serverUrl+"employment/relevant/"+_+"/"+f).pipe((0,e.U)(E=>E?a.formatDates(E):null)))}getEmploymentsForTalent(_){return(0,g.z)(this.http.get(this.serverUrl+"employment/talent/"+_).pipe((0,e.U)(f=>f.map(E=>a.formatDates(E)))))}editEmployment(_,f,E,O,T){return(0,g.z)(this.http.put(this.serverUrl+"employment/"+_,{from:f.toISOString(),...void 0!==E?{status:E}:{},...void 0!==O?{until:O}:{},...void 0!==T?{notes:T}:{}}).pipe((0,e.U)(r=>a.formatDates(r))))}endEmployment(_,f,E,O){return(0,g.z)(this.http.put(this.serverUrl+"employment/"+_,{status:f,until:E.toISOString(),...O?{notes:O}:{}}).pipe((0,e.U)(T=>a.formatDates(T))))}}return a.\u0275fac=function(_){return new(_||a)(N.LFG(S.eN))},a.\u0275prov=N.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},4053:(U,v,h)=>{h.d(v,{U:()=>l});var g=h(3905),e=h(4004),M=h(2340),N=h(9147),S=h(1571),A=h(529);let l=(()=>{class u{constructor(a){this.http=a,this.serverUrl=M.N.v2apiServer}getTeamByLeader(a){return(0,g.z)(this.http.get(this.serverUrl+"team/"+a).pipe((0,e.U)(m=>({...m,...m.employment?{employment:N.Ib.formatDates(m.employment)}:{},teamMembers:m.teamMembers.map(_=>({..._,..._.employment?{employment:N.Ib.formatDates(_.employment)}:{}}))}))))}getRelevantJobByTalent(a){return(0,g.z)(this.http.get(this.serverUrl+"team/relevant-job/"+a).pipe((0,e.U)(m=>m)))}getTopMostJobInHierarchy(){return(0,g.z)(this.http.get(this.serverUrl+"team/top-most-job/").pipe((0,e.U)(a=>a)))}addEndedEmployment(a,m,_,f,E,O,T){return(0,g.z)(this.http.post(this.serverUrl+"team/ended-employment",{title:void 0,leaderJob:void 0,property:a,position:m,talent:_,status:f,from:E,until:O,...T?{notes:T}:{}}).pipe((0,e.U)(r=>r)))}addJob(a,m,_){return(0,g.z)(this.http.post(this.serverUrl+"job/",{leader:a,property:m,position:_}).pipe((0,e.U)(f=>f)))}removeJob(a){return(0,g.z)(this.http.delete(this.serverUrl+"job/"+a).pipe((0,e.U)(m=>m)))}getOwnActiveResponsibiliy(){return(0,g.z)(this.http.get(this.serverUrl+"team/active-responsibility/").pipe((0,e.U)(a=>a)))}}return u.\u0275fac=function(a){return new(a||u)(S.LFG(A.eN))},u.\u0275prov=S.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},1964:(U,v,h)=>{h.r(v),h.d(v,{JobsModule:()=>X});var g=h(6895),e=h(1571),M=h(727),N=h(4053),S=h(171),A=h(4789),l=h(7340),u=h(805),R=h(7579);const a=["pOrganizationChartNode",""];function m(n,d){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.node.label)}}function _(n,d){1&n&&e.GkF(0)}const f=function(n){return{$implicit:n}};function E(n,d){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,_,1,0,"ng-container",7),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",t.chart.getTemplateForNode(t.node))("ngTemplateOutletContext",e.VKq(2,f,t.node))}}const O=function(n,d){return{"pi-chevron-down":n,"pi-chevron-up":d}};function T(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"a",8),e.NdJ("click",function(s){e.CHM(t);const p=e.oxw(2);return e.KtG(p.toggleNode(s,p.node))})("keydown.enter",function(s){e.CHM(t);const p=e.oxw(2);return e.KtG(p.toggleNode(s,p.node))}),e._UZ(1,"i",9),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.WLB(1,O,t.node.expanded,!t.node.expanded))}}function r(n,d){if(1&n&&(e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"div",4),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.uIk("colspan",t.colspan)}}const C=function(n){return{"p-organizationchart-line-top":n}};function o(n,d){if(1&n&&(e.TgZ(0,"td",11),e._uU(1,"\xa0"),e.qZA(),e.TgZ(2,"td",12),e._uU(3,"\xa0"),e.qZA()),2&n){const i=d.last;e.Q6J("ngClass",e.VKq(2,C,!d.first)),e.xp6(2),e.Q6J("ngClass",e.VKq(4,C,!i))}}function c(n,d){if(1&n&&(e.ynx(0),e.YNc(1,o,4,6,"ng-template",10),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.node.children)}}function I(n,d){if(1&n&&(e.TgZ(0,"td",13),e._UZ(1,"table",14),e.qZA()),2&n){const t=d.$implicit;e.xp6(1),e.Q6J("node",t)}}const b=function(n,d){return{"p-organizationchart-node-content":!0,"p-organizationchart-selectable-node":n,"p-highlight":d}};function z(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"tbody")(1,"tr")(2,"td")(3,"div",1),e.NdJ("click",function(s){e.CHM(t);const p=e.oxw();return e.KtG(p.onNodeClick(s,p.node))}),e.YNc(4,m,2,1,"div",0),e.YNc(5,E,2,4,"div",0),e.YNc(6,T,2,4,"a",2),e.qZA()()(),e.TgZ(7,"tr",3)(8,"td"),e._UZ(9,"div",4),e.qZA()(),e.TgZ(10,"tr",3),e.YNc(11,r,3,1,"ng-container",0),e.YNc(12,c,2,1,"ng-container",0),e.qZA(),e.TgZ(13,"tr",5),e.YNc(14,I,2,1,"td",6),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.uIk("colspan",t.colspan),e.xp6(1),e.Tol(t.node.styleClass),e.Q6J("ngClass",e.WLB(17,b,t.chart.selectionMode&&!1!==t.node.selectable,t.isSelected())),e.xp6(1),e.Q6J("ngIf",!t.chart.getTemplateForNode(t.node)),e.xp6(1),e.Q6J("ngIf",t.chart.getTemplateForNode(t.node)),e.xp6(1),e.Q6J("ngIf",!t.leaf),e.xp6(1),e.Q6J("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.xp6(1),e.uIk("colspan",t.colspan),e.xp6(2),e.Q6J("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.xp6(1),e.Q6J("ngIf",t.node.children&&1===t.node.children.length),e.xp6(1),e.Q6J("ngIf",t.node.children&&t.node.children.length>1),e.xp6(1),e.Q6J("ngClass",!t.leaf&&t.node.expanded?"p-organizationchart-node-visible":"p-organizationchart-node-hidden")("@childState","in"),e.xp6(1),e.Q6J("ngForOf",t.node.children)}}function F(n,d){if(1&n&&e._UZ(0,"table",2),2&n){const t=e.oxw();e.Q6J("node",t.root)}}const P=function(n){return{"p-organizationchart p-component":!0,"p-organizationchart-preservespace":n}};let B=(()=>{class n{constructor(t,i){this.cd=i,this.chart=t,this.subscription=this.chart.selectionSource$.subscribe(()=>{this.cd.markForCheck()})}get leaf(){return 0!=this.node.leaf&&!(this.node.children&&this.node.children.length)}get colspan(){return this.node.children&&this.node.children.length?2*this.node.children.length:null}onNodeClick(t,i){this.chart.onNodeClick(t,i)}toggleNode(t,i){i.expanded=!i.expanded,i.expanded?this.chart.onNodeExpand.emit({originalEvent:t,node:this.node}):this.chart.onNodeCollapse.emit({originalEvent:t,node:this.node}),t.preventDefault()}isSelected(){return this.chart.isSelected(this.node)}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36((0,e.Gpc)(()=>x)),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["","pOrganizationChartNode",""]],hostAttrs:[1,"p-element"],inputs:{node:"node",root:"root",first:"first",last:"last"},attrs:a,decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngClass","click"],["tabindex","0","class","p-node-toggler",3,"click","keydown.enter",4,"ngIf"],[1,"p-organizationchart-lines",3,"ngClass"],[1,"p-organizationchart-line-down"],[1,"p-organizationchart-nodes",3,"ngClass"],["colspan","2",4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0",1,"p-node-toggler",3,"click","keydown.enter"],[1,"p-node-toggler-icon","pi",3,"ngClass"],["ngFor","",3,"ngForOf"],[1,"p-organizationchart-line-left",3,"ngClass"],[1,"p-organizationchart-line-right",3,"ngClass"],["colspan","2"],["pOrganizationChartNode","",1,"p-organizationchart-table",3,"node"]],template:function(t,i){1&t&&e.YNc(0,z,15,20,"tbody",0),2&t&&e.Q6J("ngIf",i.node)},dependencies:[g.mk,g.sg,g.O5,g.tP,n],styles:[".p-organizationchart-table{border-spacing:0;border-collapse:separate;margin:0 auto}.p-organizationchart-table>tbody>tr>td{text-align:center;vertical-align:top;padding:0 .75rem}.p-organizationchart-node-content{display:inline-block;position:relative}.p-organizationchart-node-content .p-node-toggler{position:absolute;bottom:-.75rem;margin-left:-.75rem;z-index:2;left:50%;-webkit-user-select:none;user-select:none;cursor:pointer;width:1.5rem;height:1.5rem}.p-organizationchart-node-content .p-node-toggler .p-node-toggler-icon{position:relative;top:.25rem}.p-organizationchart-line-down{margin:0 auto;height:20px;width:1px}.p-organizationchart-line-right,.p-organizationchart-line-left{border-radius:0}.p-organizationchart-selectable-node{cursor:pointer}.p-organizationchart .p-organizationchart-node-hidden{display:none}.p-organizationchart-preservespace .p-organizationchart-node-hidden{visibility:hidden;display:inherit}\n"],encapsulation:2,data:{animation:[(0,l.X$)("childState",[(0,l.SB)("in",(0,l.oB)({opacity:1})),(0,l.eR)("void => *",[(0,l.oB)({opacity:0}),(0,l.jt)(150)]),(0,l.eR)("* => void",[(0,l.jt)(150,(0,l.oB)({opacity:0}))])])]},changeDetection:0}),n})(),x=(()=>{class n{constructor(t,i){this.el=t,this.cd=i,this.preserveSpace=!0,this.selectionChange=new e.vpe,this.onNodeSelect=new e.vpe,this.onNodeUnselect=new e.vpe,this.onNodeExpand=new e.vpe,this.onNodeCollapse=new e.vpe,this.selectionSource=new R.x,this.selectionSource$=this.selectionSource.asObservable()}get selection(){return this._selection}set selection(t){this._selection=t,this.initialized&&this.selectionSource.next(null)}get root(){return this.value&&this.value.length?this.value[0]:null}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(t=>{this.templateMap[t.getType()]=t.template}),this.initialized=!0}getTemplateForNode(t){return this.templateMap?t.type?this.templateMap[t.type]:this.templateMap.default:null}onNodeClick(t,i){let s=t.target;if((!s.className||-1===s.className.indexOf("p-node-toggler")&&-1===s.className.indexOf("p-node-toggler-icon"))&&this.selectionMode){if(!1===i.selectable)return;let p=this.findIndexInSelection(i),D=p>=0;"single"===this.selectionMode?D?(this.selection=null,this.onNodeUnselect.emit({originalEvent:t,node:i})):(this.selection=i,this.onNodeSelect.emit({originalEvent:t,node:i})):"multiple"===this.selectionMode&&(D?(this.selection=this.selection.filter((L,y)=>y!=p),this.onNodeUnselect.emit({originalEvent:t,node:i})):(this.selection=[...this.selection||[],i],this.onNodeSelect.emit({originalEvent:t,node:i}))),this.selectionChange.emit(this.selection),this.selectionSource.next(null)}}findIndexInSelection(t){let i=-1;if(this.selectionMode&&this.selection)if("single"===this.selectionMode)i=this.selection==t?0:-1;else if("multiple"===this.selectionMode)for(let s=0;s<this.selection.length;s++)if(this.selection[s]==t){i=s;break}return i}isSelected(t){return-1!=this.findIndexInSelection(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-organizationChart"]],contentQueries:function(t,i,s){if(1&t&&e.Suo(s,u.jx,4),2&t){let p;e.iGM(p=e.CRH())&&(i.templates=p)}},hostAttrs:[1,"p-element"],inputs:{value:"value",style:"style",styleClass:"styleClass",selectionMode:"selectionMode",preserveSpace:"preserveSpace",selection:"selection"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse"},decls:2,vars:7,consts:[[3,"ngStyle","ngClass"],["class","p-organizationchart-table","pOrganizationChartNode","",3,"node",4,"ngIf"],["pOrganizationChartNode","",1,"p-organizationchart-table",3,"node"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,F,1,1,"table",1),e.qZA()),2&t&&(e.Tol(i.styleClass),e.Q6J("ngStyle",i.style)("ngClass",e.VKq(5,P,i.preserveSpace)),e.xp6(1),e.Q6J("ngIf",i.root))},dependencies:[g.mk,g.O5,g.PC,B],encapsulation:2,changeDetection:0}),n})(),Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,u.m8]}),n})();var J=h(8652);const w=function(n){return{j:n}};function k(n,d){if(1&n&&(e.TgZ(0,"a",7),e._UZ(1,"i",8),e._uU(2," View in Job Navigator "),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("queryParams",e.VKq(1,w,t.selected[0].key))}}function Y(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.triggerLeaderChange())}),e._UZ(1,"i",10),e._uU(2," Move leader "),e.qZA()}}function H(n,d){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,k,3,3,"a",5),e.YNc(2,Y,3,0,"button",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",1===t.selected.length),e.xp6(1),e.Q6J("ngIf",t.canMoveLeader&&t.selected.length>=1)}}function Q(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.submitMoveLeader())}),e._UZ(1,"i",10),e._uU(2," Choose as leader "),e.qZA()}}function V(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",4),e.YNc(2,Q,3,0,"button",11),e.qZA(),e.TgZ(3,"div",12)(4,"h5"),e._uU(5,"Hierarchy Change Mode"),e.qZA(),e._uU(6),e._UZ(7,"br"),e.TgZ(8,"strong"),e._uU(9,"Please note:"),e.qZA(),e._uU(10," this action is not recommended. It is intended to correct mistakes when defining the hierarchy."),e._UZ(11,"br"),e.TgZ(12,"button",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancelLeaderChange())}),e._uU(13,"Click here to cancel"),e.qZA(),e._uU(14),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selected.length>=1),e.xp6(4),e.hij(" You have selected ",t.jobsToMove.length," jobs to move in the hierarchy."),e.xp6(8),e.hij(" or select the leader of the ",t.jobsToMove.length," selected jobs. ")}}function W(n,d){1&n&&(e.TgZ(0,"p",18),e._UZ(1,"i",19),e._uU(2,"Vacant job "),e.qZA()),2&n&&e.Udp("line-height",1.2)("font-size",.7,"em")}function j(n,d){if(1&n&&(e.TgZ(0,"p",15),e._uU(1),e.qZA(),e.TgZ(2,"p",16),e._uU(3),e.qZA(),e.TgZ(4,"p",16),e._uU(5),e.qZA(),e.TgZ(6,"p",15),e._uU(7),e.qZA(),e.YNc(8,W,3,4,"p",17)),2&n){const t=d.$implicit;e.Udp("line-height",1.2),e.xp6(1),e.hij(" ",null==t.data||null==t.data.position?null:t.data.position.name," "),e.xp6(1),e.Udp("line-height",1.2)("font-size",.7,"em"),e.xp6(1),e.hij(" ",null==t.data||null==t.data.position?null:t.data.position.area," "),e.xp6(1),e.Udp("line-height",1.2)("font-size",.7,"em"),e.xp6(1),e.hij(" ",null==t.data||null==t.data.position?null:t.data.position.department," "),e.xp6(1),e.Udp("line-height",1.3)("font-size",.9,"em"),e.xp6(1),e.hij(" ",null==t.data||null==t.data.property?null:t.data.property.name," "),e.xp6(1),e.Q6J("ngIf",null===t.data.employment)}}let G=(()=>{class n{constructor(t,i){this.teamApiService=t,this.authStateService=i,this.data=[],this.selectionMode="multiple",this.selected=[],this.leaderChangeMode=!1,this.canMoveLeader=!1,this.subscriptions=new M.w0,this.jobsToMove=[],this.subscriptions.add(this.authStateService.authState.subscribe(s=>{"SuperAdmin"==s.identity?.role&&(this.canMoveLeader=!0)}))}ngOnInit(){this.fetchTopLevelJob()}createNodeFromJob(t,i=[]){return{key:t._id,type:"job",label:t.position.name,leaf:!1,data:{position:t.position,property:t.property,employment:t.employment},children:i,expanded:i&&0!==i.length||!1}}findChild(t,i){if(void 0===i&&(i=this.data[0]),i.key===t)return i;if(i.children)for(let s of i.children){const p=this.findChild(t,s);if(void 0!==p)return p}}flattenNode(t,i){if(void 0===i&&(i=[t]),t.children)for(let s of t.children)i?.push(s),this.flattenNode(s,i);return i}nodeExpanded({node:t}){this.fetchChildrenForJob(t.key)}nodeCollapsed({node:t}){let i=this.flattenNode(t);i.shift(),this.selected=this.selected.filter(s=>!i.some(p=>p.key==s.key))}nodeSelected(t){this.selected.push(t.node)}nodeUnselected(t){this.selected=this.selected.filter(i=>i.key!=t.node.key)}getSelectedNodes(t){const i=this.flattenNode(this.data[0]);return t.map(s=>i.find(p=>p.key===s.key)).filter(s=>void 0!==s)}triggerLeaderChange(){this.jobsToMove=this.selected,this.selected=[],this.leaderChangeMode=!0,this.selectionMode="single"}cancelLeaderChange(){this.selected=this.jobsToMove,this.leaveLeaderChangeMode()}leaveLeaderChangeMode(){this.jobsToMove=[],this.leaderChangeMode=!1,this.selectionMode="multiple"}submitMoveLeader(){const t=this.selected.pop();this.selected=[],console.log("New desired Leader: ",t?.key),console.log("Jobs to move: ",this.jobsToMove?.map(i=>i.key)),this.leaveLeaderChangeMode()}fetchTopLevelJob(){this.teamApiService.getTopMostJobInHierarchy().then(t=>this.teamApiService.getTeamByLeader(t.jobId)).then(t=>{let i=t.teamMembers.map(s=>this.createNodeFromJob(s));this.data=[this.createNodeFromJob(t,i)]})}fetchChildrenForJob(t){this.teamApiService.getTeamByLeader(t).then(i=>{const s=this.findChild(i._id);if(void 0===s)return;let p=i.teamMembers.map(D=>this.createNodeFromJob(D,[]));if(s.children)for(let D of s.children){let L=p.findIndex(y=>y.key===D.key);-1!=L&&(D={...p[L],children:D.children},p.splice(L,1))}s.children?.push(...p),this.data=JSON.parse(JSON.stringify(this.data)),this.selected=this.getSelectedNodes(this.selected)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N.U),e.Y36(S.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["org-chart-widget"]],decls:5,vars:7,consts:[["class","text-right",4,"ngIf"],[4,"ngIf"],[3,"value","selectionMode","selection","onNodeExpand","onNodeCollapse","onNodeSelect","onNodeUnselect"],["pTemplate","job"],[1,"text-right"],["class","btn btn-outline-primary mr-2","routerLink","/app/team",3,"queryParams",4,"ngIf"],["class","btn btn-outline-dark",3,"click",4,"ngIf"],["routerLink","/app/team",1,"btn","btn-outline-primary","mr-2",3,"queryParams"],["aria-hidden","true",1,"fas","fa-sitemap","pr-1"],[1,"btn","btn-outline-dark",3,"click"],["aria-hidden","true",1,"fas","fa-arrows-alt","pr-1"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"mt-2","alert","alert-info"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"mb-1"],[1,"mb-1","font-weight-light"],["class","mb-0",3,"line-height","font-size",4,"ngIf"],[1,"mb-0"],["aria-hidden","true",1,"fa","fa-info-circle","mr-1","text-warning"]],template:function(t,i){1&t&&(e.YNc(0,H,3,2,"div",0),e.YNc(1,V,15,3,"div",1),e.TgZ(2,"alasta-overflow-shadow-container")(3,"p-organizationChart",2),e.NdJ("onNodeExpand",function(p){return i.nodeExpanded(p)})("onNodeCollapse",function(p){return i.nodeCollapsed(p)})("onNodeSelect",function(p){return i.nodeSelected(p)})("onNodeUnselect",function(p){return i.nodeUnselected(p)}),e.YNc(4,j,9,19,"ng-template",3),e.qZA()()),2&t&&(e.Q6J("ngIf",!i.leaderChangeMode),e.xp6(1),e.Q6J("ngIf",i.leaderChangeMode&&i.canMoveLeader),e.xp6(2),e.Udp("flex-grow",1),e.Q6J("value",i.data)("selectionMode",i.selectionMode)("selection",i.selected))},dependencies:[g.O5,A.yS,x,u.jx,J.t]}),n})(),K=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["alasta-jobs"]],decls:7,vars:0,consts:[[1,"card"],[1,"card-body"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3,"Organization Chart"),e.qZA(),e.TgZ(4,"p"),e._uU(5," You can view your full organization chart on this page and go to the Job Navigator for more fine-grained control. "),e.qZA(),e._UZ(6,"org-chart-widget"),e.qZA()())},dependencies:[G]}),n})();var q=h(6781),$=h(5593);let X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,A.Bz.forChild([{path:"",component:K}]),Z,$.hJ,q._]}),n})()},5593:(U,v,h)=>{h.d(v,{Hq:()=>E,hJ:()=>T,zx:()=>O});var g=h(6895),e=h(1571),M=h(805),N=h(9592),S=h(1795),A=h(982);function l(r,C){1&r&&e.GkF(0)}const u=function(r,C,o,c){return{"p-button-icon":!0,"p-button-icon-left":r,"p-button-icon-right":C,"p-button-icon-top":o,"p-button-icon-bottom":c}};function R(r,C){if(1&r&&e._UZ(0,"span",4),2&r){const o=e.oxw();e.Tol(o.loading?"p-button-loading-icon "+o.loadingIcon:o.icon),e.Q6J("ngClass",e.l5B(4,u,"left"===o.iconPos&&o.label,"right"===o.iconPos&&o.label,"top"===o.iconPos&&o.label,"bottom"===o.iconPos&&o.label)),e.uIk("aria-hidden",!0)}}function a(r,C){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.uIk("aria-hidden",o.icon&&!o.label),e.xp6(1),e.Oqu(o.label)}}function m(r,C){if(1&r&&(e.TgZ(0,"span",4),e._uU(1),e.qZA()),2&r){const o=e.oxw();e.Tol(o.badgeClass),e.Q6J("ngClass",o.badgeStyleClass()),e.xp6(1),e.Oqu(o.badge)}}const _=function(r,C,o,c,I){return{"p-button p-component":!0,"p-button-icon-only":r,"p-button-vertical":C,"p-disabled":o,"p-button-loading":c,"p-button-loading-label-only":I}},f=["*"];let E=(()=>{class r{constructor(o){this.el=o,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}get label(){return this._label}set label(o){this._label=o,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(o){this._icon=o,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(o){this._loading=o,this.initialized&&(this.updateIcon(),this.setStyleClass())}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,N.p.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){let o="p-button p-component";return this.icon&&!this.label&&A.gb.isEmpty(this.el.nativeElement.textContent)&&(o+=" p-button-icon-only"),this.loading&&(o+=" p-disabled p-button-loading",!this.icon&&this.label&&(o+=" p-button-loading-label-only")),o}setStyleClass(){let o=this.getStyleClass();this.el.nativeElement.className=o+" "+this._initialStyleClass}createLabel(){if(this.label){let o=document.createElement("span");this.icon&&!this.label&&o.setAttribute("aria-hidden","true"),o.className="p-button-label",o.appendChild(document.createTextNode(this.label)),this.el.nativeElement.appendChild(o)}}createIcon(){if(this.icon||this.loading){let o=document.createElement("span");o.className="p-button-icon",o.setAttribute("aria-hidden","true");let c=this.label?"p-button-icon-"+this.iconPos:null;c&&N.p.addClass(o,c);let I=this.getIconClass();I&&N.p.addMultipleClasses(o,I),this.el.nativeElement.insertBefore(o,this.el.nativeElement.firstChild)}}updateLabel(){let o=N.p.findSingle(this.el.nativeElement,".p-button-label");this.label?o?o.textContent=this.label:this.createLabel():o&&this.el.nativeElement.removeChild(o)}updateIcon(){let o=N.p.findSingle(this.el.nativeElement,".p-button-icon");this.icon||this.loading?o?o.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon():o&&this.el.nativeElement.removeChild(o)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}ngOnDestroy(){this.initialized=!1}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(e.SBq))},r.\u0275dir=e.lG2({type:r,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),r})(),O=(()=>{class r{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe}ngAfterContentInit(){this.templates.forEach(o=>{o.getType(),this.contentTemplate=o.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["p-button"]],contentQueries:function(o,c,I){if(1&o&&e.Suo(I,M.jx,4),2&o){let b;e.iGM(b=e.CRH())&&(c.templates=b)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:f,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(o,c){1&o&&(e.F$t(),e.TgZ(0,"button",0),e.NdJ("click",function(b){return c.onClick.emit(b)})("focus",function(b){return c.onFocus.emit(b)})("blur",function(b){return c.onBlur.emit(b)}),e.Hsn(1),e.YNc(2,l,1,0,"ng-container",1),e.YNc(3,R,1,9,"span",2),e.YNc(4,a,2,2,"span",3),e.YNc(5,m,2,4,"span",2),e.qZA()),2&o&&(e.Tol(c.styleClass),e.Q6J("ngStyle",c.style)("disabled",c.disabled||c.loading)("ngClass",e.qbA(11,_,c.icon&&!c.label,("top"===c.iconPos||"bottom"===c.iconPos)&&c.label,c.disabled||c.loading,c.loading,c.loading&&!c.icon&&c.label)),e.uIk("type",c.type)("aria-label",c.ariaLabel),e.xp6(2),e.Q6J("ngTemplateOutlet",c.contentTemplate),e.xp6(1),e.Q6J("ngIf",!c.contentTemplate&&(c.icon||c.loading)),e.xp6(1),e.Q6J("ngIf",!c.contentTemplate&&c.label),e.xp6(1),e.Q6J("ngIf",!c.contentTemplate&&c.badge))},dependencies:[g.mk,g.O5,g.tP,g.PC,S.H],encapsulation:2,changeDetection:0}),r})(),T=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,S.T]}),r})()}}]);