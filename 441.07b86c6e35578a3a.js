"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[441],{6441:(P,M,c)=>{c.r(M),c.d(M,{ReviewsModule:()=>ie});var f=c(9808),g=c(2382),r=c(3489),B=c(7531),x=c(7311),I=c(5350),D=c(1217),E=c(5652),Z=c(1424),F=c(9014),e=c(5e3);function l(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"Add "),e.qZA())}function h(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"Edit "),e.qZA())}function s(a,u){if(1&a&&(e.TgZ(0,"div",13),e.TgZ(1,"form",14),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e.TgZ(4,"h6",17),e._uU(5,"Review cycle name"),e.qZA(),e.TgZ(6,"div",18),e._UZ(7,"input",19),e.qZA(),e.qZA(),e.TgZ(8,"div",16),e.TgZ(9,"h6",17),e._uU(10,"Cycle Start Date"),e.qZA(),e.TgZ(11,"div",18),e._UZ(12,"p-calendar",20),e.qZA(),e.qZA(),e.TgZ(13,"div",16),e.TgZ(14,"h6",17),e._uU(15,"Cycle End Date"),e.qZA(),e.TgZ(16,"div",18),e._UZ(17,"p-calendar",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.addEditForm),e.xp6(11),e.Q6J("showIcon",!0)("minDate",t.today)("disabled",t.hasStarted),e.xp6(5),e.Q6J("showIcon",!0)("minDate",t.today)}}function d(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.processing=!0,n.onDeleteClick.emit()}),e._UZ(1,"i",23),e._uU(2," Delete "),e.qZA()}}function R(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"Add new cycle"),e.qZA())}function U(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"Update cycle details"),e.qZA())}let J=(()=>{class a{constructor(t){this.fb=t,this.addingReviewCycle=!0,this.hasStarted=!1,this.canBeDeleted=!1,this.processing=!1,this.onSumbit=new e.vpe,this.onCloseModal=new e.vpe,this.onDeleteClick=new e.vpe,this.today=new Date}ngOnInit(){var t,i,n,o;this.addEditForm=this.fb.group({name:[null===(t=this.existing)||void 0===t?void 0:t.name,g.kI.required],startDate:[null===(i=this.existing)||void 0===i?void 0:i.startDate.date,g.kI.required],endDate:[null===(n=this.existing)||void 0===n?void 0:n.endDate.date,g.kI.required]}),(null===(o=this.existing)||void 0===o?void 0:o._id)&&(this.addingReviewCycle=!1,this.hasStarted=!!this.existing.hasStarted&&this.existing.hasStarted,this.canBeDeleted=!this.hasStarted)}getFormValue(){var t,i,n,o,v,_,p,C,y,w,b,T;let O=null===(t=this.addEditForm)||void 0===t?void 0:t.value.name,q=null===(i=this.addEditForm)||void 0===i?void 0:i.value.startDate,A=null===(n=this.addEditForm)||void 0===n?void 0:n.value.endDate;return A.setHours(23),A.setMinutes(59),Object.assign(Object.assign(Object.assign(Object.assign({},(null===(o=this.existing)||void 0===o?void 0:o._id)?{_id:null===(v=this.existing)||void 0===v?void 0:v._id}:{}),(null===(_=this.existing)||void 0===_?void 0:_.name)===O?{}:{name:O}),(null===(y=null===(C=null===(p=this.existing)||void 0===p?void 0:p.startDate)||void 0===C?void 0:C.date)||void 0===y?void 0:y.valueOf())===(null==q?void 0:q.valueOf())?{}:{startDate:q}),(null===(T=null===(b=null===(w=this.existing)||void 0===w?void 0:w.endDate)||void 0===b?void 0:b.date)||void 0===T?void 0:T.valueOf())===(null==A?void 0:A.valueOf())?{}:{endDate:A})}clearTalentFromForm(){var t,i,n,o,v,_,p,C,y,w,b,T;null===(i=null===(t=this.addEditForm)||void 0===t?void 0:t.get("name"))||void 0===i||i.setValue(null),null===(o=null===(n=this.addEditForm)||void 0===n?void 0:n.get("name"))||void 0===o||o.markAsPristine(),null===(_=null===(v=this.addEditForm)||void 0===v?void 0:v.get("startDate"))||void 0===_||_.setValue(null),null===(C=null===(p=this.addEditForm)||void 0===p?void 0:p.get("startDate"))||void 0===C||C.markAsPristine(),null===(w=null===(y=this.addEditForm)||void 0===y?void 0:y.get("endDate"))||void 0===w||w.setValue(null),null===(T=null===(b=this.addEditForm)||void 0===b?void 0:b.get("endDate"))||void 0===T||T.markAsPristine()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.qu))},a.\u0275cmp=e.Xpm({type:a,selectors:[["reviews-add-edit-review-cycle-modal"]],inputs:{existing:"existing",processing:"processing"},outputs:{onSumbit:"onSumbit",onCloseModal:"onCloseModal",onDeleteClick:"onDeleteClick"},decls:20,vars:7,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[4,"ngIf"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-primary","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"btn","btn-secondary","ml-1",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-edit"],[1,"modal-body"],[3,"formGroup"],[1,"form-row"],[1,"col-12"],[1,"mb-0"],[1,"p-fluid"],["type","text","pInputText","","formControlName","name"],["formControlName","startDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","minDate","disabled"],["formControlName","endDate","dateFormat","dd M yy","icon","fas fa-calendar-alt",3,"showIcon","minDate"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-trash-alt"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e.TgZ(2,"span"),e.YNc(3,l,2,0,"span",2),e.YNc(4,h,2,0,"span",2),e._uU(5," Review Cycle "),e.qZA(),e.qZA(),e.TgZ(6,"button",3),e.NdJ("click",function(o){return i.onCloseModal.emit(o)}),e.TgZ(7,"span",4),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,s,18,6,"div",5),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.YNc(12,d,3,0,"button",8),e.TgZ(13,"button",9),e.NdJ("click",function(o){return i.clearTalentFromForm(),i.onCloseModal.emit(o)}),e._UZ(14,"i",10),e._uU(15," Cancel "),e.qZA(),e.TgZ(16,"button",11),e.NdJ("click",function(){return i.processing=!0,i.onSumbit.emit(i.getFormValue())}),e._UZ(17,"i",12),e.YNc(18,R,2,0,"span",2),e.YNc(19,U,2,0,"span",2),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",i.addingReviewCycle),e.xp6(1),e.Q6J("ngIf",!i.addingReviewCycle),e.xp6(5),e.Q6J("ngIf",i.addEditForm),e.xp6(3),e.Q6J("ngIf",i.canBeDeleted),e.xp6(4),e.Q6J("disabled",(null==i.addEditForm?null:i.addEditForm.invalid)||(null==i.addEditForm?null:i.addEditForm.pristine)),e.xp6(2),e.Q6J("ngIf",i.addingReviewCycle),e.xp6(1),e.Q6J("ngIf",!i.addingReviewCycle))},directives:[f.O5,g._Y,g.JL,g.sg,g.Fj,Z.o,g.JJ,g.u,E.f],styles:[""]}),a})();var N=c(727),Y=c(8372),S=c(2027),Q=c(4954),j=c(2733),H=c(9783),K=c(171);function L(a,u){if(1&a&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e._UZ(2,"app-shared-review-cycle-progress",12),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("reviewCycle",null==t.progressBarStats?null:t.progressBarStats.reviewCycle)("totalPossibleReviews",null==t.progressBarStats?null:t.progressBarStats.totalPossibleReviews)("completedReviews",null==t.progressBarStats?null:t.progressBarStats.completedReviews)}}function W(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),o=e.MAs(23);return n.targetReviewCycle=void 0,n.modalsController.openModal(o)}),e._UZ(2,"i",15),e._uU(3," Add new Review Cycle "),e.qZA(),e.qZA()}}function $(a,u){1&a&&(e.TgZ(0,"div",16),e.TgZ(1,"h6"),e._uU(2,"More"),e.qZA(),e.qZA())}function V(a,u){1&a&&(e.TgZ(0,"span",18),e._uU(1,"Current Cycle"),e.qZA())}function X(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,o=e.oxw(),v=e.MAs(23);return o.targetReviewCycle=n,o.modalsController.openModal(v)}),e._UZ(1,"i",21),e._uU(2," Edit "),e.qZA()}}function z(a,u){if(1&a&&(e.TgZ(0,"div",16),e.YNc(1,X,3,0,"button",19),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.canBeEdited)}}function G(a,u){if(1&a&&(e.TgZ(0,"div",4),e.TgZ(1,"div",7),e.TgZ(2,"p"),e._uU(3),e.YNc(4,V,2,0,"span",17),e.qZA(),e.qZA(),e.TgZ(5,"div",8),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",8),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.YNc(11,z,2,1,"div",9),e.qZA()),2&a){const t=u.$implicit,i=e.oxw();e.xp6(3),e.hij(" ",t.name||"None on file"," "),e.xp6(1),e.Q6J("ngIf",t.hasStarted&&!t.hasEnded),e.xp6(3),e.AsE("",t.startDate||"None on file"," - ",t.startDate.displayTime(),""),e.xp6(3),e.AsE("",t.endDate||"None on file"," - ",t.endDate.displayTime(),""),e.xp6(1),e.Q6J("ngIf",i.canAddEditReviewCycles)}}function ee(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"reviews-add-edit-review-cycle-modal",22),e.NdJ("onSumbit",function(n){return e.CHM(t),e.oxw().handleAddEditSubmission(n)})("onCloseModal",function(){return e.CHM(t),e.oxw().modalsController.closeUpperModal()})("onDeleteClick",function(){e.CHM(t);const n=e.oxw();return n.handleDelete(null==n.targetReviewCycle?null:n.targetReviewCycle._id)}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("existing",t.targetReviewCycle)("processing",t.processingModalRequest)}}var m=(()=>{return(a=m||(m={}))[a.CREATE=0]="CREATE",a[a.EDIT=1]="EDIT",a[a.DELETE=2]="DELETE",m;var a})();let k=(()=>{class a{constructor(t,i,n,o,v){this.reviewCycleServiceApi=t,this.modalsController=i,this.messageService=n,this.router=o,this.authStateService=v,this.subscriptions=new N.w0,this.today=new S.p,this.aMonthAgo=new S.p,this.canAddEditReviewCycles=!1,this.allReviewCycles=[],this.processingModalRequest=!1,this.searchInputControl=new g.NI,this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,Y.b)(350)).subscribe(_=>{this.searchInputControl.valid&&(console.log("New v2 calls"),this.fetchReviewCycles())})),this.subscriptions.add(this.authStateService.authState.subscribe(_=>{let p;_.identity&&(p=_.identity),this.canAddEditReviewCycles="SuperAdmin"==(null==p?void 0:p.role)||"Admin"==(null==p?void 0:p.role)})),this.progressBarStats={completedReviews:0,totalPossibleReviews:0}}ngOnInit(){this.today=new S.p,this.aMonthAgo=new S.p,this.aMonthAgo.date.setMonth(this.aMonthAgo.date.getMonth()-1),this.fetchCurrentReviewCycle(),this.fetchReviewCycles()}ngOnDestroy(){this.subscriptions.unsubscribe()}fetchCurrentReviewCycle(){this.reviewCycleServiceApi.getCurrentReviewCycle().then(t=>{var i,n;this.currentReviewCycle!==t.reviewCycle&&(this.currentReviewCycle=t.reviewCycle?t.reviewCycle:void 0,this.fetchReviewCycleStats((null===(i=this.currentReviewCycle)||void 0===i?void 0:i._id)?null===(n=this.currentReviewCycle)||void 0===n?void 0:n._id:""))}).catch(t=>{console.error(t)})}fetchReviewCycleStats(t){this.reviewCycleServiceApi.getProgressBarStats(t,{}).then(i=>{var n,o;(null===(n=i.reviewCycle)||void 0===n?void 0:n._id.toString())===(null===(o=this.currentReviewCycle)||void 0===o?void 0:o._id.toString())&&(this.progressBarStats.reviewCycle=i.reviewCycle,this.progressBarStats.completedReviews=i.completedReviews,this.progressBarStats.totalPossibleReviews=i.totalPossibleReviews)}).catch(i=>{console.error(i)})}fetchReviewCycles(){this.reviewCycleServiceApi.getAllReviewCycles().then(t=>{t.reviewCycles.length&&(this.allReviewCycles=[]);for(let i of t.reviewCycles){if(null===i._id)continue;const n={_id:i._id,name:i.name,org:i.org,startDate:i.startDate,endDate:i.endDate};n.hasStarted=n.startDate.date.valueOf()<this.today.date.valueOf(),n.hasEnded=n.endDate.date.valueOf()<this.today.date.valueOf(),n.canBeEdited=!1,n.hasStarted?n.endDate.date.valueOf()>this.aMonthAgo.date.valueOf()&&(n.canBeEdited=!0):n.canBeEdited=!0,this.allReviewCycles.push(n)}this.allReviewCycles=this.allReviewCycles.sort((i,n)=>i.startDate.date.valueOf()<n.endDate.date.valueOf()?1:-1)}).catch(t=>{console.error(t)})}handleAddEditSubmission(t){var i,n;let o,v=void 0!==(null===(i=this.targetReviewCycle)||void 0===i?void 0:i._id)?m.EDIT:m.CREATE,_=(null===(n=this.currentReviewCycle)||void 0===n?void 0:n._id)===(null==t?void 0:t._id);switch(v){case m.EDIT:o=this.reviewCycleServiceApi.editReviewCycle(t);break;case m.CREATE:o=this.reviewCycleServiceApi.createReviewCycle(t)}this.processingModalRequest=!0,o.then(p=>this.handleSuccessAddEdit(p,v,_)).catch(p=>this.handleErrorAddEdit(p,v)).finally(()=>{this.processingModalRequest=!1})}handleDelete(t){this.processingModalRequest=!0,this.reviewCycleServiceApi.deleteReviewCycle(t).then(i=>this.handleSuccessAddEdit(i,m.DELETE,!1)).catch(i=>this.handleErrorAddEdit(i,m.DELETE)).finally(()=>{this.processingModalRequest=!1})}handleSuccessAddEdit(t,i,n){let o;switch(i){case m.EDIT:o="Edited Review Cycle";break;case m.CREATE:o="Created new Review Cycle";break;case m.DELETE:o="Deleted Review Cycle"}this.messageService.add({severity:"success",summary:o,detail:"With title "+t.name,life:3e3}),n&&this.fetchCurrentReviewCycle(),this.fetchReviewCycles(),this.modalsController.closeAllModals()}handleErrorAddEdit(t,i){var n;let o,v;switch(i){case m.EDIT:o="Could not edit";break;case m.CREATE:o="Could not create";break;case m.DELETE:o="Could not delete"}switch(null===(n=t.message)||void 0===n?void 0:n.keiroError){case"KE060400":v="Review cycle does not exist";break;case"KE060401":v="The start date must be in the future";break;case"KE060402":v="The start date must be before the end date";break;case"KE060403":v="The dates cannot overlap with other review cycles";break;case"KE060404":v="The review cycle has already ended more than a month ago, it can no longer be modified";break;case"KE060405":v="The start date can't be modified because this review cycle has already begun";break;case"KE060406":v="The end date must be in the future";break;case"KE060407":v="The review cycle has already begun, it can no longer be deleted";break;default:v="Please retry",this.modalsController.closeAllModals()}this.messageService.add({severity:"error",summary:o,detail:v,life:4e3})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Q.m),e.Y36(j.l),e.Y36(H.ez),e.Y36(x.F0),e.Y36(K.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-window"]],decls:24,vars:4,consts:[[1,"animated","fadeIn"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-auto"],["class","col text-right",4,"ngIf"],[1,"col-4","col-md-3"],[1,"col-3","col-md-3"],["class","col-2 col-md-3",4,"ngIf"],["class","row",4,"ngFor","ngForOf"],["addEditWindowModal",""],["sectionHeader","Current Review Cycle",3,"reviewCycle","totalPossibleReviews","completedReviews"],[1,"col","text-right"],[1,"btn","btn-sm","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square"],[1,"col-2","col-md-3"],["class","badge badge-pill badge-primary",4,"ngIf"],[1,"badge","badge-pill","badge-primary"],["class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-alt"],[3,"existing","processing","onSumbit","onCloseModal","onDeleteClick"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,L,3,3,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h4"),e._uU(7,"All Review Cycles"),e.qZA(),e.qZA(),e.YNc(8,W,4,0,"div",6),e.qZA(),e.TgZ(9,"div"),e.TgZ(10,"div",4),e.TgZ(11,"div",7),e.TgZ(12,"h6"),e._uU(13,"Review cycle:"),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"h6"),e._uU(16,"Cycle start:"),e.qZA(),e.qZA(),e.TgZ(17,"div",8),e.TgZ(18,"h6"),e._uU(19,"Cycle end:"),e.qZA(),e.qZA(),e.YNc(20,$,3,0,"div",9),e.qZA(),e.YNc(21,G,12,7,"div",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(22,ee,1,2,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",i.currentReviewCycle),e.xp6(7),e.Q6J("ngIf",i.canAddEditReviewCycles),e.xp6(12),e.Q6J("ngIf",i.canAddEditReviewCycles),e.xp6(1),e.Q6J("ngForOf",i.allReviewCycles))},encapsulation:2}),a})();var te=c(9213);let ie=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[x.Bz.forChild([{path:"",component:k}]),f.ez,g.UX,I.nM,r.lN,B.c,D.HC.forRoot(),Z.j,E._8,F.l]]}),a})();e.B6R(k,[f.O5,te.p,f.sg,J],[])},1217:(P,M,c)=>{c.d(M,{HC:()=>e,O1:()=>Z});var f=c(4559),g=c(9808),r=c(5e3);function B(l,h){if(1&l&&(r.TgZ(0,"bar",2),r.Hsn(1),r.qZA()),2&l){const s=r.oxw();r.Q6J("type",s.type)("value",s._value)}}function x(l,h){if(1&l&&(r.TgZ(0,"bar",2),r._uU(1),r.qZA()),2&l){const s=h.$implicit;r.Q6J("type",s.type)("value",s.value),r.xp6(1),r.Oqu(s.label)}}function I(l,h){if(1&l&&r.YNc(0,x,2,3,"bar",3),2&l){const s=r.oxw();r.Q6J("ngForOf",s._value)}}const D=["*"];let E=(()=>{class l{constructor(){this.animate=!1,this.max=100}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac}),l})(),Z=(()=>{class l{constructor(s){this.isStacked=!1,this.addClass=!0,this.bars=[],this._max=100,Object.assign(this,s)}set animate(s){this._animate=s,this.bars.forEach(d=>{d.animate=s})}set striped(s){this._striped=s,this.bars.forEach(d=>{d.striped=s})}set value(s){this.isStacked=Array.isArray(s),this._value=s}get isBs3(){return(0,f.XA)()}get max(){return this._max}set max(s){this._max=s,this.bars.forEach(d=>{d.recalculatePercentage()})}addBar(s){s.animate=this._animate,s.striped=this._striped,this.bars.push(s)}removeBar(s){this.bars.splice(this.bars.indexOf(s),1)}}return l.\u0275fac=function(s){return new(s||l)(r.Y36(E))},l.\u0275cmp=r.Xpm({type:l,selectors:[["progressbar"]],hostVars:3,hostBindings:function(s,d){2&s&&(r.uIk("max",d.max),r.ekj("progress",d.addClass))},inputs:{animate:"animate",striped:"striped",value:"value",max:"max",type:"type"},ngContentSelectors:D,decls:2,vars:2,consts:[[3,"type","value",4,"ngIf"],[3,"ngIf"],[3,"type","value"],[3,"type","value",4,"ngFor","ngForOf"]],template:function(s,d){1&s&&(r.F$t(),r.YNc(0,B,2,2,"bar",0),r.YNc(1,I,1,1,"ng-template",1)),2&s&&(r.Q6J("ngIf",!d.isStacked),r.xp6(1),r.Q6J("ngIf",d.isStacked))},directives:function(){return[g.O5,F,g.sg]},styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"]}),l})(),F=(()=>{class l{constructor(s,d,R){this.el=s,this.renderer=R,this.addClass=!0,this.percent=0,this.progress=d}get type(){return this._type}set type(s){this._type=s,this.applyTypeClasses()}get value(){return this._value}set value(s){!s&&0!==s||(this._value=s,this.recalculatePercentage())}get setBarWidth(){return this.recalculatePercentage(),this.percent}get isBs3(){return(0,f.XA)()}ngOnInit(){this.progress.addBar(this)}ngOnDestroy(){this.progress.removeBar(this)}recalculatePercentage(){this.percent=+(this.value/this.progress.max*100).toFixed(2);const s=this.progress.bars.reduce(function(d,R){return d+R.percent},0);s>100&&(this.percent-=s-100)}applyTypeClasses(){if(this._prevType){const d=`bg-${this._prevType}`;this.renderer.removeClass(this.el.nativeElement,`progress-bar-${this._prevType}`),this.renderer.removeClass(this.el.nativeElement,d),this._prevType=null}if(this._type){const d=`bg-${this._type}`;this.renderer.addClass(this.el.nativeElement,`progress-bar-${this._type}`),this.renderer.addClass(this.el.nativeElement,d),this._prevType=this._type}}}return l.\u0275fac=function(s){return new(s||l)(r.Y36(r.SBq),r.Y36(Z,1),r.Y36(r.Qsj))},l.\u0275cmp=r.Xpm({type:l,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:15,hostBindings:function(s,d){2&s&&(r.uIk("aria-valuenow",d.value)("aria-valuetext",d.percent?d.percent.toFixed(0)+"%":"")("aria-valuemax",d.max),r.Udp("height","100","%")("width",d.setBarWidth,"%"),r.ekj("progress-bar-animated",!d.isBs3&&d.animate)("progress-bar-striped",d.striped)("active",d.isBs3&&d.animate)("progress-bar",d.addClass))},inputs:{type:"type",value:"value"},ngContentSelectors:D,decls:1,vars:0,template:function(s,d){1&s&&(r.F$t(),r.Hsn(0))},encapsulation:2}),l})(),e=(()=>{class l{static forRoot(){return{ngModule:l,providers:[E]}}}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=r.oAB({type:l}),l.\u0275inj=r.cJS({imports:[[g.ez]]}),l})()}}]);