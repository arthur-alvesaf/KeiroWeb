"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[357],{9147:(w,M,r)=>{r.d(M,{Ib:()=>L,Vg:()=>s,ub:()=>E});var N,d=r(3905),c=r(4004),O=r(2340),I=r(1571),R=r(529),s=(()=>{return(e=s||(s={}))[e.CANDIDATE=0]="CANDIDATE",e[e.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED=1]="CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED",e[e.CANDIDATE_ENDED_NOT_DESIRED=2]="CANDIDATE_ENDED_NOT_DESIRED",e[e.ACTIVE=10]="ACTIVE",e[e.ENDED=19]="ENDED",e[e.CHANGE_PROMOTION=20]="CHANGE_PROMOTION",e[e.CHANGE_LATERAL_MOVEMENT=21]="CHANGE_LATERAL_MOVEMENT",e[e.CHANGE_TRANSFER_SAME_POSITION=22]="CHANGE_TRANSFER_SAME_POSITION",e[e.CHANGE_TRANSFER_PROMOTION=23]="CHANGE_TRANSFER_PROMOTION",e[e.DISMISSAL_VOLUNTARY_ABSENTEEISM=50]="DISMISSAL_VOLUNTARY_ABSENTEEISM",e[e.DISMISSAL_VOLUNTARY_ABANDONMENT=51]="DISMISSAL_VOLUNTARY_ABANDONMENT",e[e.DISMISSAL_VOLUNTARY_RETIREMENT=52]="DISMISSAL_VOLUNTARY_RETIREMENT",e[e.DISMISSAL_VOLUNTARY_BETTER_OFFER=53]="DISMISSAL_VOLUNTARY_BETTER_OFFER",e[e.DISMISSAL_VOLUNTARY_PERSONAL=54]="DISMISSAL_VOLUNTARY_PERSONAL",e[e.DISMISSAL_FORCED_END_OF_CONTRACT=70]="DISMISSAL_FORCED_END_OF_CONTRACT",e[e.DISMISSAL_FORCED_DISEASE=71]="DISMISSAL_FORCED_DISEASE",e[e.DISMISSAL_FORCED_DEATH=72]="DISMISSAL_FORCED_DEATH",e[e.DISMISSAL_FORCED_LOW_PERFORMANCE=73]="DISMISSAL_FORCED_LOW_PERFORMANCE",e[e.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS=74]="DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS",e[e.DISMISSAL_FORCED_OTHERS=75]="DISMISSAL_FORCED_OTHERS",s;var e})();class E{}N=E,E.changesReasons=[s.CHANGE_PROMOTION,s.CHANGE_LATERAL_MOVEMENT,s.CHANGE_TRANSFER_SAME_POSITION,s.CHANGE_TRANSFER_PROMOTION],E.voluntaryDismissalReasons=[s.DISMISSAL_VOLUNTARY_ABSENTEEISM,s.DISMISSAL_VOLUNTARY_ABANDONMENT,s.DISMISSAL_VOLUNTARY_RETIREMENT,s.DISMISSAL_VOLUNTARY_BETTER_OFFER,s.DISMISSAL_VOLUNTARY_PERSONAL],E.forcedDismissalReasons=[s.DISMISSAL_FORCED_END_OF_CONTRACT,s.DISMISSAL_FORCED_DISEASE,s.DISMISSAL_FORCED_DEATH,s.DISMISSAL_FORCED_LOW_PERFORMANCE,s.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,s.DISMISSAL_FORCED_OTHERS],E.allDismissalReasons=[...N.voluntaryDismissalReasons,...N.forcedDismissalReasons],E.statusNameMap=new Map([[s.CANDIDATE,"Candidate"],[s.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED,"Candidate ended but not selected"],[s.CANDIDATE_ENDED_NOT_DESIRED,"Candidate not desired"],[s.ACTIVE,"Active"],[s.ENDED,"Ended"],[s.CHANGE_PROMOTION,"Promotion"],[s.CHANGE_LATERAL_MOVEMENT,"Lateral movement"],[s.CHANGE_TRANSFER_SAME_POSITION,"Transfer same position"],[s.CHANGE_TRANSFER_PROMOTION,"Transfer promotion"],[s.DISMISSAL_VOLUNTARY_ABSENTEEISM,"Absenteeism"],[s.DISMISSAL_VOLUNTARY_ABANDONMENT,"Abandonment"],[s.DISMISSAL_VOLUNTARY_RETIREMENT,"Retirement"],[s.DISMISSAL_VOLUNTARY_BETTER_OFFER,"Better offer"],[s.DISMISSAL_VOLUNTARY_PERSONAL,"Personal"],[s.DISMISSAL_FORCED_END_OF_CONTRACT,"End of contract"],[s.DISMISSAL_FORCED_DISEASE,"Disease"],[s.DISMISSAL_FORCED_DEATH,"Death"],[s.DISMISSAL_FORCED_LOW_PERFORMANCE,"Low performance"],[s.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,"Inapropiate behaviors"],[s.DISMISSAL_FORCED_OTHERS,"Other"]]);let L=(()=>{class e{constructor(a){this.http=a,this.serverUrl=O.N.v2apiServer}static formatDates(a){return{...a,...a.from?{from:new Date(a.from)}:{},...a.until?{until:new Date(a.until)}:{}}}createEmploymentRecord(a,h,u,T,A){return(0,d.z)(this.http.post(this.serverUrl+"employment/",{job:a,talent:h,status:u,from:T.toISOString(),...A?{allowMultiple:A}:{}}).pipe((0,c.U)(m=>e.formatDates(m))))}getActiveEmploymentForTalent(a){return(0,d.z)(this.http.get(this.serverUrl+"employment/active/"+a).pipe((0,c.U)(h=>h?e.formatDates(h):null)))}getRelevantEmploymentForReview(a,h){return(0,d.z)(this.http.get(this.serverUrl+"employment/relevant/"+a+"/"+h).pipe((0,c.U)(u=>u?e.formatDates(u):null)))}getEmploymentsForTalent(a){return(0,d.z)(this.http.get(this.serverUrl+"employment/talent/"+a).pipe((0,c.U)(h=>h.map(u=>e.formatDates(u)))))}editEmployment(a,h,u,T,A){return(0,d.z)(this.http.put(this.serverUrl+"employment/"+a,{from:h.toISOString(),...void 0!==u?{status:u}:{},...void 0!==T?{until:T}:{},...void 0!==A?{notes:A}:{}}).pipe((0,c.U)(m=>e.formatDates(m))))}endEmployment(a,h,u,T){return(0,d.z)(this.http.put(this.serverUrl+"team/end-employment/"+a,{status:h,until:u.toISOString(),...T?{notes:T}:{}}).pipe((0,c.U)(A=>e.formatDates(A))))}}return e.\u0275fac=function(a){return new(a||e)(I.LFG(R.eN))},e.\u0275prov=I.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9649:(w,M,r)=>{r.d(M,{C:()=>s});var d=r(3905),c=r(4004),O=r(2340),I=r(2027),R=r(1571),N=r(529);let s=(()=>{class E{constructor(e){this.http=e,this.serverUrl=O.N.apiServer,this.v2serverUrl=O.N.v2apiServer}convertDob(e){return{...e,...e.dob?{dateOfBirth:new I.p({values:{year:e.dob?.year,month:e.dob?.month,day:e.dob?.day}})}:{}}}convertToDto(e,l){const a=new Date(e.dobDate);return{givenName:e.firstNames,lastName:e.lastNames,languages:e.languages,nationality:e.nationality,mobility:e.mobility,dobDay:a.getDate(),dobMonth:a.getMonth()+1,dobYear:a.getFullYear(),...l?.email?{email:l?.email}:{},...l?.role?{role:l?.role}:{}}}findTalentsFilterSearch(e,l,a,h,u,T,A,m,b,t){const F={params:{count:e,page:l}};let x={...m?{area:m}:{},...b?{department:b}:{},...t?{name:t}:{}},f={...T?{country:T}:{},...A?{name:A}:{}},V={...h?{cycleId:h}:{},...u?{mapPlacement:u}:{}};const y={...a?{searchTerm:a}:{},...Object.keys(x).length?{positionFilter:x}:{},...Object.keys(f).length?{propertyFilter:f}:{},...Object.keys(V).length?{reviewFilter:V}:{}};return(0,d.z)(this.http.post(this.v2serverUrl+"talent-finder",y,F).pipe(U=>U))}downloadTalentsFilterSearch(e,l,a,h,u,T,A,m){let b={...T?{area:T}:{},...A?{department:A}:{},...m?{name:m}:{}},t={...h?{country:h}:{},...u?{name:u}:{}},F={...l?{cycleId:l}:{},...a?{mapPlacement:a}:{}};const x={...e?{searchTerm:e}:{},...Object.keys(b).length?{positionFilter:b}:{},...Object.keys(t).length?{propertyFilter:t}:{},...Object.keys(F).length?{reviewFilter:F}:{}},f=document.createElement("form"),V=this.v2serverUrl+"talent-finder/download";f.method="POST",f.action=V,Object.entries(x).forEach(y=>{if(null==y[1])return;const U=document.createElement("input");U.type="hidden",U.name=y[0],U.setAttribute("value",JSON.stringify(y[1])),f.appendChild(U)}),document.body.appendChild(f),f.submit(),setTimeout(()=>document.body.removeChild(f),200)}checkEmailAvailability(e){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/email/"+e).pipe(l=>l))}getTalent(e){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/"+e).pipe((0,c.U)(l=>({talent:this.convertDob(l)}))))}createTalent(e,l){return(0,d.z)(this.http.post(this.v2serverUrl+"talent",this.convertToDto(e,l)).pipe((0,c.U)(a=>({talent:this.convertDob(a)}))))}createTalentAccount(e,l){return(0,d.z)(this.http.post(this.v2serverUrl+"talent/"+e+"/account",l).pipe((0,c.U)(a=>({talent:this.convertDob(a)}))))}createLegacyWorkInfo(e,l){return(0,d.z)(this.http.put(this.v2serverUrl+"talent/legacy-work/"+e,l).pipe((0,c.U)(a=>({talent:this.convertDob(a)}))))}getTalentByAccount(e){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/account/"+e).pipe((0,c.U)(l=>({talent:this.convertDob(l)}))))}editTalent(e,l){return(0,d.z)(this.http.put(this.v2serverUrl+"talent/"+e,this.convertToDto(l)).pipe((0,c.U)(a=>({talent:this.convertDob(a)}))))}revokeTalentsAccount(e){return(0,d.z)(this.http.put(this.v2serverUrl+"talent/revoke-access/"+e,{}).pipe((0,c.U)(l=>({talent:this.convertDob(l)}))))}getSupportedCountries(){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/countries/").pipe((0,c.U)(e=>({countries:e}))))}getSupportedLanguages(){return(0,d.z)(this.http.get(this.v2serverUrl+"talent/languages/").pipe((0,c.U)(e=>({languages:e}))))}}return E.\u0275fac=function(e){return new(e||E)(R.LFG(N.eN))},E.\u0275prov=R.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},4053:(w,M,r)=>{r.d(M,{U:()=>s});var d=r(3905),c=r(4004),O=r(2340),I=r(9147),R=r(1571),N=r(529);let s=(()=>{class E{constructor(e){this.http=e,this.serverUrl=O.N.v2apiServer}getTeamByLeader(e){return(0,d.z)(this.http.get(this.serverUrl+"team/"+e).pipe((0,c.U)(l=>({...l,...l.employment?{employment:I.Ib.formatDates(l.employment)}:{},teamMembers:l.teamMembers.map(a=>({...a,...a.employment?{employment:I.Ib.formatDates(a.employment)}:{}}))}))))}getRelevantJobByTalent(e){return(0,d.z)(this.http.get(this.serverUrl+"team/relevant-job/"+e).pipe((0,c.U)(l=>l)))}getTopMostJobInHierarchy(){return(0,d.z)(this.http.get(this.serverUrl+"team/top-most-job/").pipe((0,c.U)(e=>e)))}addJobEmployment(e,l,a,h){return(0,d.z)(this.http.post(this.serverUrl+"team/new-job-employment",{title:void 0,property:e,position:l,talent:a,from:h}).pipe((0,c.U)(u=>u)))}addEndedEmployment(e,l,a,h,u,T,A){return(0,d.z)(this.http.post(this.serverUrl+"team/ended-employment",{title:void 0,leaderJob:void 0,property:e,position:l,talent:a,status:h,from:u,until:T,...A?{notes:A}:{}}).pipe((0,c.U)(m=>m)))}addJob(e,l,a){return(0,d.z)(this.http.post(this.serverUrl+"job/",{leader:e,property:l,position:a}).pipe((0,c.U)(h=>h)))}removeJob(e){return(0,d.z)(this.http.delete(this.serverUrl+"job/"+e).pipe((0,c.U)(l=>l)))}getOwnActiveResponsibiliy(){return(0,d.z)(this.http.get(this.serverUrl+"team/active-responsibility/").pipe((0,c.U)(e=>e)))}}return E.\u0275fac=function(e){return new(e||E)(R.LFG(N.eN))},E.\u0275prov=R.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},5357:(w,M,r)=>{r.r(M),r.d(M,{TalentFinderModule:()=>ht});var d=r(6895),c=r(433),O=r(4789),I=r(5593),R=r(793),N=r(2320),s=r(7064),E=r(5861),L=r(727),e=r(7579),l=r(3905),a=r(4004),h=r(8372),u=r(5653),T=r(9766),A=r(2338),m=r(625),b=r(826),t=r(1571),F=r(171),x=r(1831),f=r(1505),V=r(4053),y=r(9649),U=r(797),W=r(917),B=r(4954),H=r(8254),z=r(4829),j=r(805),Z=r(3608);const J=["searchInput"];function G(i,S){if(1&i){const n=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){t.CHM(n);const _=t.oxw();return t.KtG(_.addReview())}),t._UZ(2,"i",20),t._uU(3),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("disabled",!n.selectedRows.length),t.xp6(2),t.hij(" Review selected (",n.selectedRows.length,") ")}}function Q(i,S){1&i&&(t.TgZ(0,"th"),t._UZ(1,"p-tableHeaderCheckbox"),t.qZA())}function K(i,S){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,Q,2,0,"th",15),t.TgZ(2,"th"),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Property"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Position"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Department"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Area"),t.qZA(),t._UZ(12,"th"),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.currentRWExists)}}function $(i,S){if(1&i&&t._UZ(0,"p-tableCheckbox",23),2&i){const n=t.oxw(2).$implicit;t.Q6J("value",n)}}function X(i,S){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,$,1,1,"p-tableCheckbox",22),t.qZA()),2&i){const n=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.canSelectTalent(n))}}const k=function(i){return["..","view",i]};function q(i,S){if(1&i&&t._UZ(0,"a",24),2&i){const n=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,k,n.talentId))}}function tt(i,S){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,X,2,1,"td",15),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t.YNc(13,q,1,3,"a",21),t.qZA()()),2&i){const n=S.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.currentRWExists),t.xp6(2),t.AsE("",(null==n.talentName?null:n.talentName.given)||""," ",(null==n.talentName?null:n.talentName.last)||"",""),t.xp6(2),t.Oqu(n.property||""),t.xp6(2),t.Oqu(n.position||""),t.xp6(2),t.Oqu(n.department||""),t.xp6(2),t.Oqu(n.area||""),t.xp6(2),t.Q6J("ngIf",o.canViewTalent(n))}}function et(i,S){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const n=t.oxw(2);t.xp6(1),t.hij("(",n.selectedRows.length," selected)")}}function nt(i,S){if(1&i&&(t.TgZ(0,"small"),t._uU(1),t.YNc(2,et,2,1,"span",15),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.hij("",n.total," total "),t.xp6(1),t.Q6J("ngIf",n.selectedRows.length)}}function it(i,S){if(1&i){const n=t.EpF();t.TgZ(0,"p-button",26),t.NdJ("click",function(){t.CHM(n);const _=t.oxw(2);return t.KtG(_.streamExcelFile())}),t.qZA()}}function rt(i,S){1&i&&t.YNc(0,it,1,0,"ng-template",25)}function at(i,S){if(1&i){const n=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(n);const _=t.oxw();return t.KtG(_.addReview())}),t._UZ(1,"i",20),t._uU(2),t.qZA()}if(2&i){const n=t.oxw();t.xp6(2),t.hij(" Review selected (",n.selectedRows.length,") ")}}function ot(i,S){1&i&&(t.TgZ(0,"p",28)(1,"strong"),t._uU(2,"Please note:"),t.qZA(),t._uU(3," Talents can only be selected if they don't have a review yet. To update a review, please contact your Keiro administrator."),t.qZA())}const st=function(){return[10,25,50]};var p=(()=>{return(i=p||(p={}))[i.REVIEW_CYCLE=0]="REVIEW_CYCLE",i[i.MAP_POSITION=1]="MAP_POSITION",i[i.COUNTRY=2]="COUNTRY",i[i.PROPERTY=3]="PROPERTY",i[i.AREA=4]="AREA",i[i.DEPARTMENT=5]="DEPARTMENT",i[i.POSITION=6]="POSITION",p;var i})();let dt=(()=>{class i{constructor(n,o,_,v,D,C,Y,g,pt,ut,Et,Tt){this.filterService=n,this.route=o,this.router=_,this.authStateService=v,this.store=D,this.talentService=C,this.teamService=Y,this.talentsManagementApi=g,this.locationsApi=pt,this.positionsApi=ut,this.reviewCycleServiceApi=Et,this.talentMapBoxesApi=Tt,this.canDownloadExcel=!1,this.total=0,this.page=0,this.step=25,this.rows=[],this.selectedRows=[],this.searchInputControl=new c.p4,this.loadingIndicator=!0,this.subscriptions=new L.w0,this.filterValue={},this.callTalentFinderSubject=new e.x,this.isRowSelectable=P=>this.canSelectTalent(P.data),this.subscriptions.add(this.callTalentFinderSubject.pipe((0,a.U)(P=>(this.loadingIndicator=!0,P)),(0,h.b)(150)).subscribe(()=>this.fetchTalentsWithSearch())),this.fetchLocations(),this.fetchPositions(),this.fetchCurrentReviewCycle(),this.fetchReviewWindows(),this.fetchTalentMapPositions(),this.fetchActiveResponsiblity(),this.subscriptions.add(this.authStateService.authState.subscribe(P=>{P.identity&&(this.currentUser=P.identity),this.canDownloadExcel=this.currentUser?.role==m.u.SUPER_ADMIN||this.currentUser?.role==m.u.ADMIN})),this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,h.b)(250)).subscribe(P=>{this.searchInputControl.valid&&(this.callTalentFinderSubject.next(void 0),this.router.navigate([],{relativeTo:this.route,queryParams:{q:encodeURIComponent(P)},queryParamsHandling:"merge",replaceUrl:!0}))}))}ngOnInit(){(0,l.z)(this.route.queryParams).then(n=>{if(n.f){const o=A.F.decodeURLParamToObject(n.f);this.filterService.addFilterValues(o)}if(n.q){const o=decodeURIComponent(n.q);this.searchInputControl.setValue(o)}}),this.filterService.valueChange.subscribe(n=>{const o=this.filterValue;this.filterValue=n,this.callTalentFinderSubject.next(void 0),this.router.navigate([],{relativeTo:this.route,queryParams:{f:A.F.encodeObjectToURLParam(n)},queryParamsHandling:"merge",replaceUrl:!0}),(this.filterValue.country!=o.country||this.filterValue.location!=o.location)&&this.fetchLocations(),(this.filterValue.area!=o.area||this.filterValue.department!=o.department||this.filterValue.position!=o.position)&&this.fetchPositions()})}ngAfterViewInit(){this.input?.nativeElement.focus()}ngOnDestroy(){this.subscriptions.unsubscribe()}streamExcelFile(){this.talentsManagementApi.downloadTalentsFilterSearch(this.searchInputControl?.value,this.filterValue?.windowRId,this.filterValue?.boxPosition,this.filterValue?.country,this.filterValue?.location,this.filterValue?.area,this.filterValue?.department,this.filterValue?.position)}onSelectionChange(n){this.selectedRows=n}setPage(n){this.step=n.rows,this.page=Math.floor(n.first/n.rows),this.callTalentFinderSubject.next(void 0)}canSelectTalent(n){let o=this.currentUserResponsibility?.activeJob?this.currentUserResponsibility?.activeJob.property._id:this.currentUser?.talent?.location;return!(!this.currentRWExists||this.currentReviewCycle?._id&&n.reviewedDuringCycles?.includes(this.currentReviewCycle._id)||this.currentUser?.role===m.u.EMPLOYEE&&this.currentUser?.id===n.talentId||(this.currentUser?.role===m.u.EMPLOYEE||this.currentUser?.role===m.u.MANAGER)&&o!==n.propertyId)}canViewTalent(n){return!0}onSelect(n){const o=n.selected;this.selectedRows.splice(0,this.selectedRows.length),this.selectedRows.push(...o)}addReview(){this.store.dispatch((0,b.KD)({talents:this.selectedRows})),this.router.navigate(["app","review","create"])}fetchTalentsWithSearch(){this.loadingIndicator=!0,this.talentsManagementApi.findTalentsFilterSearch(this.step,this.page+1,this.searchInputControl?.value,this.filterValue?.windowRId,this.filterValue?.boxPosition,this.filterValue?.country,this.filterValue?.location,this.filterValue?.area,this.filterValue?.department,this.filterValue?.position).then(n=>{this.rows=n.talents,this.total=n.total}).finally(()=>{this.loadingIndicator=!1})}fetchLocations(){this.locationsApi.findDistinctLocations(this.filterValue.country||void 0,this.filterValue.location||void 0).then(n=>{const o=this.filterService.getMetadataWithId(p.COUNTRY.toString()),_=n.countries.map(C=>({name:C,value:C}));o.options=_;const v=this.filterService.getMetadataWithId(p.PROPERTY.toString()),D=n.properties.map(C=>({name:C,value:C}));v.options=D}).catch(n=>{console.error(n)})}fetchPositions(){this.positionsApi.findDistinctPositions(this.filterValue.area||void 0,this.filterValue.department||void 0,this.filterValue.position||void 0).then(n=>{const o=this.filterService.getMetadataWithId(p.AREA.toString()),_=n.areas.map(g=>({name:g,value:g}));o.options=_;const v=this.filterService.getMetadataWithId(p.DEPARTMENT.toString()),D=n.departments.map(g=>({name:g,value:g}));v.options=D;const C=this.filterService.getMetadataWithId(p.POSITION.toString()),Y=n.positions.map(g=>({name:g,value:g}));C.options=Y}).catch(n=>{console.error(n)})}fetchReviewWindows(){this.reviewCycleServiceApi.getAllReviewCycles().then(n=>{const o=this.filterService.getMetadataWithId(p.REVIEW_CYCLE.toString()),_=n.reviewCycles.sort((v,D)=>Date.parse(D.startDate)-Date.parse(v.startDate)).map(v=>({name:v.name,value:v._id}));o.options=_,!this.filterValue.windowRId&&o?.required&&this.filterService.addFilterWithId(p.REVIEW_CYCLE.toString(),_[0]?.value)}).catch(n=>{console.error(n)})}fetchCurrentReviewCycle(){this.reviewCycleServiceApi.getCurrentReviewCycle().then(n=>{this.currentReviewCycle=n.reviewCycle?n.reviewCycle:void 0,this.currentRWExists=void 0!==this.currentReviewCycle}).catch(n=>{console.error(n)})}fetchTalentMapPositions(){this.talentMapBoxesApi.getBoxes().then(n=>{const o=this.filterService.getMetadataWithId(p.MAP_POSITION.toString()),_=n.boxes.sort((v,D)=>v.title[v.title.length-1]-D.title[D.title.length-1]).map(v=>({name:v.title,value:""+v.pos}));o.options=_}).catch(n=>{console.error(n)})}fetchActiveResponsiblity(){var n=this;return(0,E.Z)(function*(){n.currentUserResponsibility=yield n.teamService.getOwnActiveResponsibiliy()})()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(u.i),t.Y36(O.gz),t.Y36(O.F0),t.Y36(F.V),t.Y36(x.yh),t.Y36(f.C),t.Y36(V.U),t.Y36(y.C),t.Y36(U._),t.Y36(W.m),t.Y36(B.m),t.Y36(H.M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-talent-finder"]],viewQuery:function(n,o){if(1&n&&t.Gf(J,5),2&n){let _;t.iGM(_=t.CRH())&&(o.input=_.first)}},features:[t._Bn([{provide:"filterConfiguration",useValue:{dropdownOptions:[{id:p.COUNTRY.toString(),name:"Country"},{id:p.PROPERTY.toString(),name:"Property"},{id:p.AREA.toString(),name:"Area"},{id:p.DEPARTMENT.toString(),name:"Department"},{id:p.POSITION.toString(),name:"Position"},{id:p.REVIEW_CYCLE.toString(),name:"Review cycle"},{id:p.MAP_POSITION.toString(),name:"Talent Map placement"}],filtersMetadata:[{id:p.REVIEW_CYCLE.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Review Cycle",key:"windowRId",group:"Evaluation",children:[{id:p.MAP_POSITION.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Talent Map Placement",key:"boxPosition",group:"Evaluation"}]},{id:p.AREA.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Area",key:"area",group:"Job description",groupOrder:1},{id:p.DEPARTMENT.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Department",key:"department",group:"Job description",groupOrder:2},{id:p.POSITION.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Position",key:"position",group:"Job description",groupOrder:3},{id:p.COUNTRY.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Country",key:"country",group:"Location",groupOrder:1},{id:p.PROPERTY.toString(),type:T.v.DROPDOWN_SEARCH,visibleName:"Property",key:"location",group:"Location",groupOrder:2}]}},{provide:u.i}])],decls:20,vars:17,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-body"],[1,"form-row","justify-content-end"],[1,"col","mb-1"],[1,"has-search"],[1,"fa","fa-search","has-search-icon"],["type","text","placeholder","Search by name, email, or Keiro ID",1,"form-control",3,"formControl"],["searchInput",""],["class","col-12 col-sm-auto text-right mb-1",4,"ngIf"],[1,"d-block","mb-2",3,"service"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","selection","selectionPageOnly","rowSelectable","onLazyLoad","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],[4,"ngIf"],["class","btn btn-primary","title","Select some talents to add reviews",3,"click",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"col-12","col-sm-auto","text-right","mb-1"],["title","Select some talents to add reviews",1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-chart-line","mr-1"],["pButton","","class","p-button-rounded p-button-secondary","icon","fa fa-external-link-alt",3,"routerLink",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value"],["pButton","","icon","fa fa-external-link-alt",1,"p-button-rounded","p-button-secondary",3,"routerLink"],["pTemplate","paginatorright"],["icon","fa fa-file-excel","styleClass","p-button-outlined","type","button","pTooltip","Download as Excel file","tooltipPosition","left",3,"click"],["title","Select some talents to add reviews",1,"btn","btn-primary",3,"click"],[1,"mt-2"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),t._uU(4,"Talent Finder"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5),t._UZ(8,"span",6)(9,"input",7,8),t.qZA()(),t.YNc(11,G,4,2,"div",9),t.qZA(),t._UZ(12,"alasta-filters-list",10),t.TgZ(13,"p-table",11),t.NdJ("onLazyLoad",function(v){return o.setPage(v)})("selectionChange",function(v){return o.onSelectionChange(v)}),t.YNc(14,K,13,1,"ng-template",12),t.YNc(15,tt,14,8,"ng-template",13),t.YNc(16,nt,3,2,"ng-template",14),t.YNc(17,rt,1,0,null,15),t.qZA(),t.YNc(18,at,3,1,"button",16),t.YNc(19,ot,4,0,"p",17),t.qZA()()()),2&n&&(t.xp6(9),t.Q6J("formControl",o.searchInputControl),t.xp6(2),t.Q6J("ngIf",o.currentRWExists&&o.selectedRows.length),t.xp6(1),t.Q6J("service",o.filterService),t.xp6(1),t.Q6J("value",o.rows)("lazy",!0)("loading",o.loadingIndicator)("paginator",!0)("rows",o.step)("totalRecords",o.total)("rowsPerPageOptions",t.DdM(16,st))("selection",o.selectedRows)("selectionPageOnly",!0)("rowSelectable",o.isRowSelectable),t.xp6(4),t.Q6J("ngIf",o.canDownloadExcel),t.xp6(1),t.Q6J("ngIf",o.currentRWExists&&o.selectedRows.length),t.xp6(1),t.Q6J("ngIf",o.currentRWExists))},dependencies:[O.yS,d.O5,c.Fj,c.JJ,c.oH,z.a,R.iA,j.jx,R.UA,R.Mo,I.Hq,I.zx,Z.u],styles:[".has-search[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%] > .has-search-icon[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}"]}),i})(),ht=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[O.Bz.forChild([{path:"",component:dt}]),d.ez,c.UX,N.z8.forRoot(),s.i,R.U$,I.hJ,Z.z]}),i})()}}]);