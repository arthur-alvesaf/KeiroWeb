"use strict";(self.webpackChunkalasta_ui=self.webpackChunkalasta_ui||[]).push([[357],{9147:(Z,M,r)=>{r.d(M,{Ib:()=>b,Vg:()=>l,ub:()=>E});var C,v=r(3905),d=r(4004),m=r(2340),N=r(5e3),I=r(520),l=(()=>{return(e=l||(l={}))[e.CANDIDATE=0]="CANDIDATE",e[e.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED=1]="CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED",e[e.CANDIDATE_ENDED_NOT_DESIRED=2]="CANDIDATE_ENDED_NOT_DESIRED",e[e.ACTIVE=10]="ACTIVE",e[e.ENDED=19]="ENDED",e[e.CHANGE_PROMOTION=20]="CHANGE_PROMOTION",e[e.CHANGE_LATERAL_MOVEMENT=21]="CHANGE_LATERAL_MOVEMENT",e[e.CHANGE_TRANSFER_SAME_POSITION=22]="CHANGE_TRANSFER_SAME_POSITION",e[e.CHANGE_TRANSFER_PROMOTION=23]="CHANGE_TRANSFER_PROMOTION",e[e.DISMISSAL_VOLUNTARY_ABSENTEEISM=50]="DISMISSAL_VOLUNTARY_ABSENTEEISM",e[e.DISMISSAL_VOLUNTARY_ABANDONMENT=51]="DISMISSAL_VOLUNTARY_ABANDONMENT",e[e.DISMISSAL_VOLUNTARY_RETIREMENT=52]="DISMISSAL_VOLUNTARY_RETIREMENT",e[e.DISMISSAL_VOLUNTARY_BETTER_OFFER=53]="DISMISSAL_VOLUNTARY_BETTER_OFFER",e[e.DISMISSAL_VOLUNTARY_PERSONAL=54]="DISMISSAL_VOLUNTARY_PERSONAL",e[e.DISMISSAL_FORCED_END_OF_CONTRACT=70]="DISMISSAL_FORCED_END_OF_CONTRACT",e[e.DISMISSAL_FORCED_DISEASE=71]="DISMISSAL_FORCED_DISEASE",e[e.DISMISSAL_FORCED_DEATH=72]="DISMISSAL_FORCED_DEATH",e[e.DISMISSAL_FORCED_LOW_PERFORMANCE=73]="DISMISSAL_FORCED_LOW_PERFORMANCE",e[e.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS=74]="DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS",e[e.DISMISSAL_FORCED_OTHERS=75]="DISMISSAL_FORCED_OTHERS",l;var e})();class E{}C=E,E.changesReasons=[l.CHANGE_PROMOTION,l.CHANGE_LATERAL_MOVEMENT,l.CHANGE_TRANSFER_SAME_POSITION,l.CHANGE_TRANSFER_PROMOTION],E.voluntaryDismissalReasons=[l.DISMISSAL_VOLUNTARY_ABSENTEEISM,l.DISMISSAL_VOLUNTARY_ABANDONMENT,l.DISMISSAL_VOLUNTARY_RETIREMENT,l.DISMISSAL_VOLUNTARY_BETTER_OFFER,l.DISMISSAL_VOLUNTARY_PERSONAL],E.forcedDismissalReasons=[l.DISMISSAL_FORCED_END_OF_CONTRACT,l.DISMISSAL_FORCED_DISEASE,l.DISMISSAL_FORCED_DEATH,l.DISMISSAL_FORCED_LOW_PERFORMANCE,l.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,l.DISMISSAL_FORCED_OTHERS],E.allDismissalReasons=[...C.voluntaryDismissalReasons,...C.forcedDismissalReasons],E.statusNameMap=new Map([[l.CANDIDATE,"Candidate"],[l.CANDIDATE_ENDED_NOT_SELECTED_BUT_DESIRED,"Candidate ended but not selected"],[l.CANDIDATE_ENDED_NOT_DESIRED,"Candidate not desired"],[l.ACTIVE,"Active"],[l.ENDED,"Ended"],[l.CHANGE_PROMOTION,"Promotion"],[l.CHANGE_LATERAL_MOVEMENT,"Lateral movement"],[l.CHANGE_TRANSFER_SAME_POSITION,"Transfer same position"],[l.CHANGE_TRANSFER_PROMOTION,"Transfer promotion"],[l.DISMISSAL_VOLUNTARY_ABSENTEEISM,"Absenteeism"],[l.DISMISSAL_VOLUNTARY_ABANDONMENT,"Abandonment"],[l.DISMISSAL_VOLUNTARY_RETIREMENT,"Retirement"],[l.DISMISSAL_VOLUNTARY_BETTER_OFFER,"Better offer"],[l.DISMISSAL_VOLUNTARY_PERSONAL,"Personal"],[l.DISMISSAL_FORCED_END_OF_CONTRACT,"End of contract"],[l.DISMISSAL_FORCED_DISEASE,"Disease"],[l.DISMISSAL_FORCED_DEATH,"Death"],[l.DISMISSAL_FORCED_LOW_PERFORMANCE,"Low performance"],[l.DISMISSAL_FORCED_INAPROPIATE_BEHAVIORS,"Inapropiate behaviors"],[l.DISMISSAL_FORCED_OTHERS,"Other"]]);let b=(()=>{class e{constructor(s){this.http=s,this.serverUrl=m.N.v2apiServer}static formatDates(s){return Object.assign(Object.assign(Object.assign({},s),s.from?{from:new Date(s.from)}:{}),s.until?{until:new Date(s.until)}:{})}createEmploymentRecord(s,p,g,O,S){return(0,v.z)(this.http.post(this.serverUrl+"employment/",Object.assign({job:s,talent:p,status:g,from:O.toISOString()},S?{allowMultiple:S}:{})).pipe((0,d.U)(f=>e.formatDates(f))))}getActiveEmploymentForTalent(s){return(0,v.z)(this.http.get(this.serverUrl+"employment/active/"+s).pipe((0,d.U)(p=>p?e.formatDates(p):null)))}getRelevantEmploymentForReview(s,p){return(0,v.z)(this.http.get(this.serverUrl+"employment/relevant/"+s+"/"+p).pipe((0,d.U)(g=>g?e.formatDates(g):null)))}getEmploymentsForTalent(s){return(0,v.z)(this.http.get(this.serverUrl+"employment/talent/"+s).pipe((0,d.U)(p=>p.map(g=>e.formatDates(g)))))}editEmployment(s,p,g,O,S){return(0,v.z)(this.http.put(this.serverUrl+"employment/"+s,Object.assign(Object.assign(Object.assign({from:p.toISOString()},void 0!==g?{status:g}:{}),void 0!==O?{until:O}:{}),void 0!==S?{notes:S}:{})).pipe((0,d.U)(f=>e.formatDates(f))))}endEmployment(s,p,g,O){return(0,v.z)(this.http.put(this.serverUrl+"employment/"+s,Object.assign({status:p,until:g.toISOString()},O?{notes:O}:{})).pipe((0,d.U)(S=>e.formatDates(S))))}}return e.\u0275fac=function(s){return new(s||e)(N.LFG(I.eN))},e.\u0275prov=N.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9649:(Z,M,r)=>{r.d(M,{C:()=>l});var v=r(3905),d=r(4004),m=r(2340),N=r(2027),I=r(5e3),C=r(520);let l=(()=>{class E{constructor(e){this.http=e,this.serverUrl=m.N.apiServer,this.v2serverUrl=m.N.v2apiServer}convertDob(e){var a,s,p;return Object.assign(Object.assign({},e),e.dob?{dateOfBirth:new N.p({values:{year:null===(a=e.dob)||void 0===a?void 0:a.year,month:null===(s=e.dob)||void 0===s?void 0:s.month,day:null===(p=e.dob)||void 0===p?void 0:p.day}})}:{})}convertToDto(e,a){const s=new Date(e.dobDate);return Object.assign(Object.assign({givenName:e.firstNames,lastName:e.lastNames,languages:e.languages,nationality:e.nationality,mobility:e.mobility,dobDay:s.getDate(),dobMonth:s.getMonth()+1,dobYear:s.getFullYear()},(null==a?void 0:a.email)?{email:null==a?void 0:a.email}:{}),(null==a?void 0:a.role)?{role:null==a?void 0:a.role}:{})}findTalentsFilterSearch(e,a,s,p,g,O,S,f,F,t){const Y={params:{count:e,page:a}};let x=Object.assign(Object.assign(Object.assign({},f?{area:f}:{}),F?{department:F}:{}),t?{name:t}:{}),V=Object.assign(Object.assign({},O?{country:O}:{}),S?{name:S}:{}),w=Object.assign(Object.assign({},p?{cycleId:p}:{}),g?{mapPlacement:g}:{});const j=Object.assign(Object.assign(Object.assign(Object.assign({},s?{searchTerm:s}:{}),Object.keys(x).length?{positionFilter:x}:{}),Object.keys(V).length?{propertyFilter:V}:{}),Object.keys(w).length?{reviewFilter:w}:{});return(0,v.z)(this.http.post(this.v2serverUrl+"talent-finder",j,Y).pipe(W=>W))}checkEmailAvailability(e){return(0,v.z)(this.http.get(this.v2serverUrl+"talent/email/"+e).pipe(a=>a))}getTalent(e){return(0,v.z)(this.http.get(this.v2serverUrl+"talent/"+e).pipe((0,d.U)(a=>({talent:this.convertDob(a)}))))}createTalent(e,a){return(0,v.z)(this.http.post(this.v2serverUrl+"talent",this.convertToDto(e,a)).pipe((0,d.U)(s=>({talent:this.convertDob(s)}))))}createTalentAccount(e,a){return(0,v.z)(this.http.post(this.v2serverUrl+"talent/"+e+"/account",a).pipe((0,d.U)(s=>({talent:this.convertDob(s)}))))}createLegacyWorkInfo(e,a){return(0,v.z)(this.http.put(this.v2serverUrl+"talent/legacy-work/"+e,a).pipe((0,d.U)(s=>({talent:this.convertDob(s)}))))}getTalentByAccount(e){return(0,v.z)(this.http.get(this.v2serverUrl+"talent/account/"+e).pipe((0,d.U)(a=>({talent:this.convertDob(a)}))))}editTalent(e,a){return(0,v.z)(this.http.put(this.v2serverUrl+"talent/"+e,this.convertToDto(a)).pipe((0,d.U)(s=>({talent:this.convertDob(s)}))))}revokeTalentsAccount(e){return(0,v.z)(this.http.put(this.v2serverUrl+"talent/revoke-access/"+e,{}).pipe((0,d.U)(a=>({talent:this.convertDob(a)}))))}getSupportedCountries(){return(0,v.z)(this.http.get(this.v2serverUrl+"talent/countries/").pipe((0,d.U)(e=>({countries:e}))))}getSupportedLanguages(){return(0,v.z)(this.http.get(this.v2serverUrl+"talent/languages/").pipe((0,d.U)(e=>({languages:e}))))}}return E.\u0275fac=function(e){return new(e||E)(I.LFG(C.eN))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},4053:(Z,M,r)=>{r.d(M,{U:()=>l});var v=r(3905),d=r(4004),m=r(2340),N=r(9147),I=r(5e3),C=r(520);let l=(()=>{class E{constructor(e){this.http=e,this.serverUrl=m.N.v2apiServer}getTeamByLeader(e){return(0,v.z)(this.http.get(this.serverUrl+"team/"+e).pipe((0,d.U)(a=>Object.assign(Object.assign(Object.assign({},a),a.employment?{employment:N.Ib.formatDates(a.employment)}:{}),{teamMembers:a.teamMembers.map(s=>Object.assign(Object.assign({},s),s.employment?{employment:N.Ib.formatDates(s.employment)}:{}))}))))}getRelevantJobByTalent(e){return(0,v.z)(this.http.get(this.serverUrl+"team/relevant-job/"+e).pipe((0,d.U)(a=>a)))}getTopMostJobInHierarchy(){return(0,v.z)(this.http.get(this.serverUrl+"team/top-most-job/").pipe((0,d.U)(e=>e)))}addEndedEmployment(e,a,s,p,g,O,S){return(0,v.z)(this.http.post(this.serverUrl+"team/ended-employment",Object.assign({title:void 0,leaderJob:void 0,property:e,position:a,talent:s,status:p,from:g,until:O},S?{notes:S}:{})).pipe((0,d.U)(f=>f)))}addJob(e,a,s){return(0,v.z)(this.http.post(this.serverUrl+"job/",{leader:e,property:a,position:s}).pipe((0,d.U)(p=>p)))}removeJob(e){return(0,v.z)(this.http.delete(this.serverUrl+"job/"+e).pipe((0,d.U)(a=>a)))}getOwnActiveResponsibiliy(){return(0,v.z)(this.http.get(this.serverUrl+"team/active-responsibility/").pipe((0,d.U)(e=>e)))}}return E.\u0275fac=function(e){return new(e||E)(I.LFG(C.eN))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},5357:(Z,M,r)=>{r.r(M),r.d(M,{TalentFinderModule:()=>Tt});var v=r(9808),d=r(2382),m=r(7311),N=r(845),I=r(4851),C=r(8397),l=r(7064),E=r(5861),b=r(727),e=r(7579),a=r(3905),s=r(4004),p=r(8372),g=r(5653),O=r(9766),S=r(2338),f=r(625),F=r(826),t=r(5e3),Y=r(171),x=r(1035),V=r(1505),w=r(4053),j=r(9649),W=r(797),G=r(917),Q=r(4954),K=r(8254),$=r(4829),X=r(9783),J=r(4119);const q=["searchInput"];function k(n,R){if(1&n){const i=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"button",19),t.NdJ("click",function(){return t.CHM(i),t.oxw().addReview()}),t._UZ(2,"i",20),t._uU(3),t.qZA(),t.qZA()}if(2&n){const i=t.oxw();t.xp6(1),t.Q6J("disabled",!i.selectedRows.length),t.xp6(2),t.hij(" Review selected (",i.selectedRows.length,") ")}}function tt(n,R){1&n&&(t.TgZ(0,"th"),t._UZ(1,"p-tableHeaderCheckbox"),t.qZA())}function et(n,R){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,tt,2,0,"th",15),t.TgZ(2,"th"),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Property"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Position"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Department"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Area"),t.qZA(),t._UZ(12,"th"),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.currentRWExists)}}function it(n,R){if(1&n&&t._UZ(0,"p-tableCheckbox",23),2&n){const i=t.oxw(2).$implicit;t.Q6J("value",i)}}function nt(n,R){if(1&n&&(t.TgZ(0,"td"),t.YNc(1,it,1,1,"p-tableCheckbox",22),t.qZA()),2&n){const i=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.canSelectTalent(i))}}const ot=function(n){return["..","view",n]};function rt(n,R){if(1&n&&t._UZ(0,"a",24),2&n){const i=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,ot,i.talentId))}}function at(n,R){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,nt,2,1,"td",15),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t.YNc(13,rt,1,3,"a",21),t.qZA(),t.qZA()),2&n){const i=R.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.currentRWExists),t.xp6(2),t.AsE("",(null==i.talentName?null:i.talentName.given)||""," ",(null==i.talentName?null:i.talentName.last)||"",""),t.xp6(2),t.Oqu(i.property||""),t.xp6(2),t.Oqu(i.position||""),t.xp6(2),t.Oqu(i.department||""),t.xp6(2),t.Oqu(i.area||""),t.xp6(2),t.Q6J("ngIf",o.canViewTalent(i))}}function st(n,R){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const i=t.oxw(2);t.xp6(1),t.hij("(",i.selectedRows.length," selected)")}}function lt(n,R){if(1&n&&(t.TgZ(0,"small"),t._uU(1),t.YNc(2,st,2,1,"span",15),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.hij("",i.total," total "),t.xp6(1),t.Q6J("ngIf",i.selectedRows.length)}}function ct(n,R){if(1&n){const i=t.EpF();t.TgZ(0,"p-button",26),t.NdJ("click",function(){return t.CHM(i),t.oxw(2).streamExcelFile()}),t.qZA()}}function dt(n,R){1&n&&t.YNc(0,ct,1,0,"ng-template",25)}function ht(n,R){if(1&n){const i=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(i),t.oxw().addReview()}),t._UZ(1,"i",20),t._uU(2),t.qZA()}if(2&n){const i=t.oxw();t.xp6(2),t.hij(" Review selected (",i.selectedRows.length,") ")}}function vt(n,R){1&n&&(t.TgZ(0,"p",28),t.TgZ(1,"strong"),t._uU(2,"Please note:"),t.qZA(),t._uU(3," Talents can only be selected if they don't have a review yet. To update a review, please contact your Keiro administrator."),t.qZA())}const pt=function(){return[10,25,50]};var u=(()=>{return(n=u||(u={}))[n.REVIEW_CYCLE=0]="REVIEW_CYCLE",n[n.MAP_POSITION=1]="MAP_POSITION",n[n.COUNTRY=2]="COUNTRY",n[n.PROPERTY=3]="PROPERTY",n[n.AREA=4]="AREA",n[n.DEPARTMENT=5]="DEPARTMENT",n[n.POSITION=6]="POSITION",u;var n})();let Et=(()=>{class n{constructor(i,o,c,h,_,T,D,A,U,L,y,B){this.filterService=i,this.route=o,this.router=c,this.authStateService=h,this.store=_,this.talentService=T,this.teamService=D,this.talentsManagementApi=A,this.locationsApi=U,this.positionsApi=L,this.reviewCycleServiceApi=y,this.talentMapBoxesApi=B,this.canDownloadExcel=!1,this.total=0,this.page=0,this.step=25,this.rows=[],this.selectedRows=[],this.searchInputControl=new d.NI,this.loadingIndicator=!0,this.subscriptions=new b.w0,this.filterValue={},this.callTalentFinderSubject=new e.x,this.isRowSelectable=P=>this.canSelectTalent(P.data),this.subscriptions.add(this.callTalentFinderSubject.pipe((0,s.U)(P=>(this.loadingIndicator=!0,P)),(0,p.b)(150)).subscribe(()=>this.fetchTalentsWithSearch())),this.fetchLocations(),this.fetchPositions(),this.fetchCurrentReviewCycle(),this.fetchReviewWindows(),this.fetchTalentMapPositions(),this.fetchActiveResponsiblity(),this.subscriptions.add(this.authStateService.authState.subscribe(P=>{var H,z;P.identity&&(this.currentUser=P.identity),this.canDownloadExcel=(null===(H=this.currentUser)||void 0===H?void 0:H.role)==f.u.SUPER_ADMIN||(null===(z=this.currentUser)||void 0===z?void 0:z.role)==f.u.ADMIN})),this.subscriptions.add(this.searchInputControl.valueChanges.pipe((0,p.b)(250)).subscribe(P=>{this.searchInputControl.valid&&(this.callTalentFinderSubject.next(void 0),this.router.navigate([],{relativeTo:this.route,queryParams:{q:encodeURIComponent(P)},queryParamsHandling:"merge",replaceUrl:!0}))}))}ngOnInit(){(0,a.z)(this.route.queryParams).then(i=>{if(i.f){const o=S.F.decodeURLParamToObject(i.f);this.filterService.addFilterValues(o)}if(i.q){const o=decodeURIComponent(i.q);this.searchInputControl.setValue(o)}}),this.filterService.valueChange.subscribe(i=>{const o=this.filterValue;this.filterValue=i,this.callTalentFinderSubject.next(void 0),this.router.navigate([],{relativeTo:this.route,queryParams:{f:S.F.encodeObjectToURLParam(i)},queryParamsHandling:"merge",replaceUrl:!0}),(this.filterValue.country!=o.country||this.filterValue.location!=o.location)&&this.fetchLocations(),(this.filterValue.area!=o.area||this.filterValue.department!=o.department||this.filterValue.position!=o.position)&&this.fetchPositions()})}ngAfterViewInit(){var i;null===(i=this.input)||void 0===i||i.nativeElement.focus()}ngOnDestroy(){this.subscriptions.unsubscribe()}streamExcelFile(){var i,o,c,h,_,T,D,A;this.talentService.downloadFileStream({windowRId:null===(i=this.filterValue)||void 0===i?void 0:i.windowRId,boxPosition:null===(o=this.filterValue)||void 0===o?void 0:o.boxPosition,country:null===(c=this.filterValue)||void 0===c?void 0:c.country,location:null===(h=this.filterValue)||void 0===h?void 0:h.location,area:null===(_=this.filterValue)||void 0===_?void 0:_.area,department:null===(T=this.filterValue)||void 0===T?void 0:T.department,position:null===(D=this.filterValue)||void 0===D?void 0:D.position,search:null===(A=this.searchInputControl)||void 0===A?void 0:A.value})}onSelectionChange(i){this.selectedRows=i}setPage(i){this.step=i.rows,this.page=Math.floor(i.first/i.rows),this.callTalentFinderSubject.next(void 0)}canSelectTalent(i){var o,c,h,_,T,D,A,U,L,y;let B=(null===(o=this.currentUserResponsibility)||void 0===o?void 0:o.activeJob)?null===(c=this.currentUserResponsibility)||void 0===c?void 0:c.activeJob.property._id:null===(_=null===(h=this.currentUser)||void 0===h?void 0:h.talent)||void 0===_?void 0:_.location;return!(!this.currentRWExists||(null===(T=this.currentReviewCycle)||void 0===T?void 0:T._id)&&(null===(D=i.reviewedDuringCycles)||void 0===D?void 0:D.includes(this.currentReviewCycle._id))||(null===(A=this.currentUser)||void 0===A?void 0:A.role)===f.u.EMPLOYEE&&(null===(U=this.currentUser)||void 0===U?void 0:U.id)===i.talentId||((null===(L=this.currentUser)||void 0===L?void 0:L.role)===f.u.EMPLOYEE||(null===(y=this.currentUser)||void 0===y?void 0:y.role)===f.u.MANAGER)&&B!==i.propertyId)}canViewTalent(i){return!0}onSelect(i){const o=i.selected;this.selectedRows.splice(0,this.selectedRows.length),this.selectedRows.push(...o)}addReview(){this.store.dispatch((0,F.KD)({talents:this.selectedRows})),this.router.navigate(["app","review","create"])}fetchTalentsWithSearch(){var i,o,c,h,_,T,D,A;this.loadingIndicator=!0,this.talentsManagementApi.findTalentsFilterSearch(this.step,this.page+1,null===(i=this.searchInputControl)||void 0===i?void 0:i.value,null===(o=this.filterValue)||void 0===o?void 0:o.windowRId,null===(c=this.filterValue)||void 0===c?void 0:c.boxPosition,null===(h=this.filterValue)||void 0===h?void 0:h.country,null===(_=this.filterValue)||void 0===_?void 0:_.location,null===(T=this.filterValue)||void 0===T?void 0:T.area,null===(D=this.filterValue)||void 0===D?void 0:D.department,null===(A=this.filterValue)||void 0===A?void 0:A.position).then(U=>{this.rows=U.talents,this.total=U.total}).finally(()=>{this.loadingIndicator=!1})}fetchLocations(){this.locationsApi.findDistinctLocations(this.filterValue.country||void 0,this.filterValue.location||void 0).then(i=>{const o=this.filterService.getMetadataWithId(u.COUNTRY.toString()),c=i.countries.map(T=>({name:T,value:T}));o.options=c;const h=this.filterService.getMetadataWithId(u.PROPERTY.toString()),_=i.properties.map(T=>({name:T,value:T}));h.options=_}).catch(i=>{console.error(i)})}fetchPositions(){this.positionsApi.findDistinctPositions(this.filterValue.area||void 0,this.filterValue.department||void 0,this.filterValue.position||void 0).then(i=>{const o=this.filterService.getMetadataWithId(u.AREA.toString()),c=i.areas.map(A=>({name:A,value:A}));o.options=c;const h=this.filterService.getMetadataWithId(u.DEPARTMENT.toString()),_=i.departments.map(A=>({name:A,value:A}));h.options=_;const T=this.filterService.getMetadataWithId(u.POSITION.toString()),D=i.positions.map(A=>({name:A,value:A}));T.options=D}).catch(i=>{console.error(i)})}fetchReviewWindows(){this.reviewCycleServiceApi.getAllReviewCycles().then(i=>{var o;const c=this.filterService.getMetadataWithId(u.REVIEW_CYCLE.toString()),h=i.reviewCycles.sort((_,T)=>Date.parse(T.startDate)-Date.parse(_.startDate)).map(_=>({name:_.name,value:_._id}));c.options=h,!this.filterValue.windowRId&&(null==c?void 0:c.required)&&this.filterService.addFilterWithId(u.REVIEW_CYCLE.toString(),null===(o=h[0])||void 0===o?void 0:o.value)}).catch(i=>{console.error(i)})}fetchCurrentReviewCycle(){this.reviewCycleServiceApi.getCurrentReviewCycle().then(i=>{this.currentReviewCycle=i.reviewCycle?i.reviewCycle:void 0,this.currentRWExists=void 0!==this.currentReviewCycle}).catch(i=>{console.error(i)})}fetchTalentMapPositions(){this.talentMapBoxesApi.getBoxes().then(i=>{const o=this.filterService.getMetadataWithId(u.MAP_POSITION.toString()),c=i.boxes.sort((h,_)=>h.title[h.title.length-1]-_.title[_.title.length-1]).map(h=>({name:h.title,value:""+h.pos}));o.options=c}).catch(i=>{console.error(i)})}fetchActiveResponsiblity(){var i=this;return(0,E.Z)(function*(){i.currentUserResponsibility=yield i.teamService.getOwnActiveResponsibiliy()})()}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(g.i),t.Y36(m.gz),t.Y36(m.F0),t.Y36(Y.V),t.Y36(x.yh),t.Y36(V.C),t.Y36(w.U),t.Y36(j.C),t.Y36(W._),t.Y36(G.m),t.Y36(Q.m),t.Y36(K.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-talent-finder"]],viewQuery:function(i,o){if(1&i&&t.Gf(q,5),2&i){let c;t.iGM(c=t.CRH())&&(o.input=c.first)}},features:[t._Bn([{provide:"filterConfiguration",useValue:{dropdownOptions:[{id:u.COUNTRY.toString(),name:"Country"},{id:u.PROPERTY.toString(),name:"Property"},{id:u.AREA.toString(),name:"Area"},{id:u.DEPARTMENT.toString(),name:"Department"},{id:u.POSITION.toString(),name:"Position"},{id:u.REVIEW_CYCLE.toString(),name:"Review cycle"},{id:u.MAP_POSITION.toString(),name:"Talent Map placement"}],filtersMetadata:[{id:u.REVIEW_CYCLE.toString(),type:O.v.DROPDOWN_SEARCH,visibleName:"Review Cycle",key:"windowRId",group:"Evaluation",children:[{id:u.MAP_POSITION.toString(),type:O.v.DROPDOWN_SEARCH,visibleName:"Talent Map Placement",key:"boxPosition",group:"Evaluation"}]},{id:u.AREA.toString(),type:O.v.DROPDOWN_SEARCH,visibleName:"Area",key:"area",group:"Job description",groupOrder:1},{id:u.DEPARTMENT.toString(),type:O.v.DROPDOWN_SEARCH,visibleName:"Department",key:"department",group:"Job description",groupOrder:2},{id:u.POSITION.toString(),type:O.v.DROPDOWN_SEARCH,visibleName:"Position",key:"position",group:"Job description",groupOrder:3},{id:u.COUNTRY.toString(),type:O.v.DROPDOWN_SEARCH,visibleName:"Country",key:"country",group:"Location",groupOrder:1},{id:u.PROPERTY.toString(),type:O.v.DROPDOWN_SEARCH,visibleName:"Property",key:"location",group:"Location",groupOrder:2}]}},{provide:g.i}])],decls:20,vars:17,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-body"],[1,"form-row","justify-content-end"],[1,"col","mb-1"],[1,"has-search"],[1,"fa","fa-search","has-search-icon"],["type","text","placeholder","Search by name, email, or Keiro ID",1,"form-control",3,"formControl"],["searchInput",""],["class","col-12 col-sm-auto text-right mb-1",4,"ngIf"],[1,"d-block","mb-2",3,"service"],["styleClass","p-datatable-sm","responsiveLayout","scroll",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","selection","selectionPageOnly","rowSelectable","onLazyLoad","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","paginatorleft"],[4,"ngIf"],["class","btn btn-primary","title","Select some talents to add reviews",3,"click",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"col-12","col-sm-auto","text-right","mb-1"],["title","Select some talents to add reviews",1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-chart-line","mr-1"],["pButton","","class","p-button-rounded p-button-secondary","icon","fa fa-external-link-alt",3,"routerLink",4,"ngIf"],[3,"value",4,"ngIf"],[3,"value"],["pButton","","icon","fa fa-external-link-alt",1,"p-button-rounded","p-button-secondary",3,"routerLink"],["pTemplate","paginatorright"],["icon","fa fa-file-excel","styleClass","p-button-outlined","type","button","pTooltip","Download as Excel file","tooltipPosition","left",3,"click"],["title","Select some talents to add reviews",1,"btn","btn-primary",3,"click"],[1,"mt-2"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h4"),t._uU(4,"Talent Finder"),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t._UZ(8,"span",6),t._UZ(9,"input",7,8),t.qZA(),t.qZA(),t.YNc(11,k,4,2,"div",9),t.qZA(),t._UZ(12,"alasta-filters-list",10),t.TgZ(13,"p-table",11),t.NdJ("onLazyLoad",function(h){return o.setPage(h)})("selectionChange",function(h){return o.onSelectionChange(h)}),t.YNc(14,et,13,1,"ng-template",12),t.YNc(15,at,14,8,"ng-template",13),t.YNc(16,lt,3,2,"ng-template",14),t.YNc(17,dt,1,0,void 0,15),t.qZA(),t.YNc(18,ht,3,1,"button",16),t.YNc(19,vt,4,0,"p",17),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(9),t.Q6J("formControl",o.searchInputControl),t.xp6(2),t.Q6J("ngIf",o.currentRWExists&&o.selectedRows.length),t.xp6(1),t.Q6J("service",o.filterService),t.xp6(1),t.Q6J("value",o.rows)("lazy",!0)("loading",o.loadingIndicator)("paginator",!0)("rows",o.step)("totalRecords",o.total)("rowsPerPageOptions",t.DdM(16,pt))("selection",o.selectedRows)("selectionPageOnly",!0)("rowSelectable",o.isRowSelectable),t.xp6(4),t.Q6J("ngIf",o.canDownloadExcel),t.xp6(1),t.Q6J("ngIf",o.currentRWExists&&o.selectedRows.length),t.xp6(1),t.Q6J("ngIf",o.currentRWExists))},directives:[d.Fj,d.JJ,d.oH,v.O5,$.a,I.iA,X.jx,I.Mo,I.UA,m.yS,N.Hq,N.zx,J.u],styles:[".has-search[_ngcontent-%COMP%] > .form-control[_ngcontent-%COMP%]{padding-left:2.375rem}.has-search[_ngcontent-%COMP%] > .has-search-icon[_ngcontent-%COMP%]{position:absolute;z-index:2;display:block;width:2.375rem;height:2.375rem;line-height:2.375rem;text-align:center;pointer-events:none;color:#aaa}"]}),n})(),Tt=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild([{path:"",component:Et}]),v.ez,d.UX,C.z8.forRoot(),l.i,I.U$,N.hJ,J.z]]}),n})()}}]);